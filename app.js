!function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,e,n){Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p=".",e(e.s=77)}([function(t,e,n){t.exports=n(14)},function(t,e,n){t.exports=n(52)},function(t,e,n){"use strict";var r=n(9),o=n(13),i=n(11);n.d(e,"g",function(){return s}),n.d(e,"h",function(){return a}),n.d(e,"i",function(){return l}),n.d(e,"d",function(){return u}),n.d(e,"c",function(){return c}),n.d(e,"a",function(){return i.b}),n.d(e,"b",function(){return i.a}),n.d(e,"e",function(){return i.c}),n.d(e,"f",function(){return i.d}),n.d(e,"j",function(){return i.e}),n.d(e,"k",function(){return i.f});var s="REQUEST_TDO",a="RECEIVE_TDO",l="LOAD_DEFAULT_TDO",u=function(){return{type:l}},c=function(){return function(t){var e=o.a.get();if(e&&e.token&&e.gistId){t({type:s});var l=new r.a(e);return l.load().then(function(e){t({type:a,data:e}),t(n.i(i.a)())})}var c=localStorage.tdo&&JSON.parse(localStorage.tdo);t(c?{type:a,data:c}:u()),t(n.i(i.a)())}}},function(t,e){function n(t){return t=t||7,Math.random().toString(35).substr(2,t)}t.exports=n},function(t,e,n){"use strict";function r(t,e){if(e(t))return t;var n=t.childNodes;if(n)for(var o=0;o<n.length;o++){var i=r(n[o],e);if(i)return i}return null}function o(t,e){var n=t.childNodes;if(n)for(var o=0;o<n.length;o++){var i=r(n[o],e);if(i)return i}return null}function i(t,e){for(;t;){if(e(t))return t;t=t.parentElement}return null}function s(t,e){return t&&i(t.parentElement,e)}function a(t){return document.activeElement==t}function l(t){return document.activeElement==t||t.contains(document.activeElement)}function u(t){var e=t&&"number"==typeof t.tabIndex&&t.tabIndex>=0;return!!e&&(yt.indexOf(t.tagName)!=-1||t.hasAttribute("tabindex"))}function c(){return document.activeElement}function p(t,e){return t.contains(e)}function h(t,e){return t==e||t.contains(e)}function d(t){var e=RegExp(/(\((?:\w+,)*\w+\)|\(\)|\w+)[\r\t ]*=>\s*/),n=e.exec(t);if(n){var r=n[1];"("!==r.charAt(0)&&(r="("+r+")");for(var o=n.index,i=t.substring(0,o),s=t.substring(o+n[0].length),a=0,l=!1,u=0,c=0,p=0;p<s.length;p++){var h=s[p];if("{"===h)l=!0,a++;else if("}"===h)a--;else if(!l){u=f(s,p);break}if(l&&0===a){c=p;break}}var y;if(l){if(0!==a)throw Error("Could not match curly braces for function at : "+o);y=s.substring(0,c+1);var m=s.substring(c+1),g="(function "+r+y+").bind(this)";t=i+g+m}else{if(u<=0)throw Error("could not get function body at : "+o);y=s.substring(0,u+1),m=s.substring(u+1),g="(function "+r+"{return "+y+"}).bind(this)",t=i+g+m}return d(t)}return t}function f(t,e){for(var n=0,r=null,o=e;o<t.length;o++){var i=t[o],s=null;if('"'!==i&&"'"!==i||(r=i,o=y(t,r,o),i=t[o]),0===o||t[o-1].match(/[\t\r ]/)||(s=t[o-1]),"{"===i||"("===i?n++:"}"!==i&&")"!==i||n--,n<0||"."!==s&&"\n"===i)return o-1}return t.length}function y(t,e,n){var r=!1,o=n;for(n++;n<t.length;n++){var i=t[n],s=0!==n?t[n-1]:null;if(i===e&&(i!==e||"\\"!==s)&&i===e){r=!1;break}}if(r)throw new Error("Could not find closing quote for quote at : "+o);return n}function m(t,e){return t=null!=t?Number(t):t,e=null!=e?Number(e):e,"number"==typeof t?"undefined"==typeof e?e=t:"number"==typeof e&&e<t&&(e=t):null==t&&null==e&&(t=0,e=18),{minimumFractionDigits:t,maximumFractionDigits:e}}function g(t){var e=Et;if(t)for(var n=t.split("|"),r=n[1]||"",o=n[0].split(":"),i=0;i<o.length;i++){var s=o[i].split(";"),a=Mt[s[0]];a?0==i?e=a.apply(void 0,s):!function(){var t=a.apply(void 0,s),n=e;e=function(e){return t(n(e))}}():tt.log("Unknown string format: "+t)}return function(t){return null==t||""===t?r:e(t)}}function v(){return Ot.cacheIdentifier!=St.get()&&(Ot={cache:{},cacheIdentifier:St.get()}),Ot.cache}function b(t){t||(t="");var e=v(),n=e[t];return n||(n=e[t]=g(t)),n}function w(t){return t=t.replace(/\t/g,""),t=t.replace(/(\s*[\r\n]\s*)/g,"")}function x(t){return t>="0"&&t<="9"}function D(t){return"object"==("undefined"==typeof t?"undefined":Q(t))&&t&&"function"==typeof t.then}function C(){return null==Ft&&(Ft="ontouchstart"in window),Ft}function k(t){if("string"!=typeof t)return t;for(var e={},n=t.split(";"),r=0;r<n.length;r++){var o=n[r],i=o.indexOf(":");if(i!=-1){var s=o.substring(0,i).trim(),a=o.substring(i+1).trim();s=s.split("-").map(function(t,e){return 0==e?t:t[0].toUpperCase()+t.substring(1)}).join(""),e[s]=a}}return e}function S(t){return null==t?t:"'"+t.replace(/'/g,"\\i")+"'"}function E(t){var e=i(t,function(t){return t.scrollHeight>t.offsetHeight});if(!e)return!1;var n=e.getBoundingClientRect(),r=t.getBoundingClientRect();return r.bottom>n.bottom&&(e.scrollTop=Math.max(0,e.scrollTop+r.bottom-n.bottom)),r.top<n.top&&(e.scrollTop=Math.max(0,e.scrollTop+r.top-n.top)),!0}function M(t,e){var n,r,o="undefined"==typeof t?"undefined":Q(t),i="undefined"==typeof e?"undefined":Q(e);if(o!=i)return!1;if(null==t||null==e)return!1;if("object"==o){if(Array.isArray(t)){if(!Array.isArray(e)||t.length!=e.length)return!1;for(r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}for(n in t)if(t.hasOwnProperty(n)&&(!e.hasOwnProperty(n)||t[n]!==e[n]))return!1;for(n in e)if(e.hasOwnProperty(n)&&(!t.hasOwnProperty(n)||t[n]!==e[n]))return!1;return!0}return t===e}function O(){return{width:window.innerWidth,height:window.innerHeight}}function T(t,e){return t.getTime()-e.getTime()}function F(t){return new Date(t.getFullYear(),t.getMonth(),t.getDate())}function V(t){return new Date(t.getFullYear(),t.getMonth(),1)}function A(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=T(t,e);return r>0||0==r&&!n}function I(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=T(t,e);return r<0||0==r&&!n}function P(){for(var t=arguments[0],e=1;e<arguments.length;e++)T(t,arguments[e])<0&&(t=arguments[e]);return t}function N(){for(var t=arguments[0],e=1;e<arguments.length;e++)T(t,arguments[e])>0&&(t=arguments[e]);return t}function $(t,e){return t.getDate()==e.getDate()&&t.getMonth()==e.getMonth()&&t.getYear()==e.getYear()}function j(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function L(t,e,n){t/=360,e/=100,n/=100;var r,o,i;if(0==e)r=o=i=n;else{var s=n<.5?n*(1+e):n+e-n*e,a=2*n-s;r=j(a,s,t+1/3),o=j(a,s,t),i=j(a,s,t-1/3)}return[Math.round(255*r),Math.round(255*o),Math.round(255*i)]}function _(t){if(!t)return null;if("#"==t[0])return R(t);if(0==t.indexOf("rgb"))return K(t);if(0==t.indexOf("hsl"))return B(t);throw new Error("Unknown color format: "+t+".")}function R(t){if(!t)return null;if("#"!=t[0])throw new Error("Invalid color "+t+".");if(4==t.length)return{type:"rgba",r:17*parseInt(t.charAt(1),16),g:17*parseInt(t.charAt(2),16),b:17*parseInt(t.charAt(3),16),a:1};if(7!=t.length)throw new Error("Invalid color "+t+".");return{type:"rgba",r:parseInt(t.substr(1,2),16),g:parseInt(t.substr(3,2),16),b:parseInt(t.substr(5,2),16),a:1}}function K(t){if(!t)return null;t=t.trim();var e;if(0==t.indexOf("rgba(")){if(e=t.substring(5,t.length-1).split(",").map(function(t){return parseFloat(t.trim())}),4!=e.length)throw new Error("Invalid color "+t+".");return{type:"rgba",r:e[0],g:e[1],b:e[2],a:e[3]}}if(0!=t.indexOf("rgb("))throw new Error("Invalid color "+t+".");if(e=t.substring(5,t.length-1).split(",").map(function(t){return parseFloat(t.trim())}),3!=e.length)throw new Error("Invalid color "+t+".");return{type:"rgba",r:e[0],g:e[1],b:e[2],a:1}}function B(t){if(!t)return null;t=t.trim();var e;if(0==t.indexOf("hsla(")){if(e=t.substring(5,t.length-1).split(",").map(function(t){return parseFloat(t.trim())}),4!=e.length)throw new Error("Invalid color "+t+".");return{type:"hsla",h:e[0],s:e[1],l:e[2],a:e[3]}}if(0!=t.indexOf("hsl("))throw new Error("Invalid color "+t+".");if(e=t.substring(5,t.length-1).split(",").map(function(t){return parseFloat(t.trim())}),3!=e.length)throw new Error("Invalid color "+t+".");return{type:"hsla",h:e[0],s:e[1],l:e[2],a:1}}function W(t){var e=t.toString(16);return 1==e.length?"0"+e:e}function H(t,e,n){return"#"+W(t)+W(e)+W(n)}function U(t,e,n){t/=255,e/=255,n/=255;var r,o,i=Math.max(t,e,n),s=Math.min(t,e,n),a=(i+s)/2;if(i==s)r=o=0;else{var l=i-s;switch(o=a>.5?l/(2-i-s):l/(i+s),i){case t:r=(e-n)/l+(e<n?6:0);break;case e:r=(n-t)/l+2;break;case n:r=(t-e)/l+4}r/=6}return[360*r,100*o,100*a]}function z(t){return _t||(_t=Rt()),_t[t]}var q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(e,"__esModule",{value:!0});var Y=n(21),G=n(4),Q="function"==typeof Symbol&&"symbol"===q(Symbol.iterator)?function(t){return"undefined"==typeof t?"undefined":q(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":"undefined"==typeof t?"undefined":q(t)},X=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},J=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),Z=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},tt=function(){function t(){X(this,t)}return t.log=function(){var t;window&&window.console&&(t=console).log.apply(t,arguments)},t.warn=function(){var t;window&&window.console&&(t=console).warn.apply(t,arguments)},t}(),et={deprecated:!0},nt="production",rt=function(){function t(){X(this,t)}return t.enable=function(t){et[t]=!0},t.disable=function(t){et[t]=!1},t.log=function(t){if("production"!=nt){if(!et[t])return;tt.log.apply(tt,arguments)}},t}(),ot="render",it="prepare",st="process-data",at="cleanup",lt="menu",ut="focus",ct="internal",pt="should-update",ht="app-data",dt="tooltips",ft="deprecated",yt=["INPUT","SELECT","TEXTAREA","A","BUTTON"],mt={},gt={},vt={},bt=function(){function t(){X(this,t)}return t.register=function(t){var e=this;return function(n){return e.registerPrototype(t,n),n}},t.registerPrototype=function(t,e){mt[t]=e.prototype,vt[t]&&Object.assign(e.prototype,vt[t])},t.override=function(t,e){vt[t]=e;var n=mt[t];n&&Object.assign(n,e)},t.localize=function(t,e,n){var r=gt[t];r||(r=gt[t]={}),r[e]=Z({},r[e],n)},t.setCulture=function(t){var e=gt[t];if(e)for(var n in e){var r=mt[n];r&&Object.assign(r,e[n])}},t}(),wt="en",xt={},Dt="USD",Ct=function(){function t(){X(this,t)}return t.setCulture=function(t){wt=t,xt={},bt.setCulture(t),G.GlobalCacheIdentifier.change()},t.setDefaultCurrency=function(t){Dt=t,G.GlobalCacheIdentifier.change()},t.getNumberCulture=function(){return xt.numberCulture||(xt.numberCulture=new Y.NumberCulture(wt)),xt.numberCulture},t.getDateTimeCulture=function(){return xt.dateCulture||(xt.dateCulture=new Y.DateTimeCulture(wt)),xt.dateCulture},J(t,null,[{key:"defaultCurrency",get:function(){return Dt}},{key:"culture",get:function(){return wt}}]),t}(),kt=1,St=function(){function t(){X(this,t)}return t.get=function(){return kt},t.change=function(){kt++},t}(),Et=function(t){return t.toString()},Mt={string:function(){return Et},number:function(t,e,n){var r=Ct.getNumberCulture(),o=r.getFormatter(m(e,n));return function(t){return o.format(t)}},currency:function(t,e,n,r){var o=Ct.getNumberCulture();e=e||Ct.defaultCurrency;var i=o.getFormatter(Z({style:"currency",currency:e},m(n,r)));return function(t){return i.format(t)}},percentage:function(t,e,n){var r=Ct.getNumberCulture(),o=r.getFormatter(Z({style:"percent"},m(e,n)));return function(t){return o.format(t)}},percentSign:function(t,e,n){var r=Ct.getNumberCulture(),o=r.getFormatter(Z({style:"percent"},m(e,n)));return function(t){return o.format(t/100)}},date:function(){var t=Ct.getDateTimeCulture(),e=t.getFormatter();return function(t){return e.format(new Date(t))}},time:function(){var t=Ct.getDateTimeCulture(),e=t.getFormatter({hour:"numeric",minute:"numeric",second:"numeric"});return function(t){return e.format(new Date(t))}},datetime:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyyMd hhmm",n=Ct.getDateTimeCulture(),r=n.getFormatter(e);return function(t){return r.format(new Date(t))}},wrap:function(t,e,n){return e||(e=""),n||(n=""),function(t){return e+t.toString()+n}},prefix:function(t,e){return e||(e=""),function(t){return e+t.toString()}},suffix:function(t,e){return e||(e=""),function(t){return t.toString()+e}},uppercase:function(){return function(t){return t.toString().toUpperCase()}},lowercase:function(){return function(t){return t.toString().toLowerCase()}},urlencode:function(){return function(t){return encodeURIComponent(t)}}};Mt.d=Mt.date,Mt.dt=Mt.datetime,Mt.t=Mt.time,Mt.s=Mt.str=Mt.string,Mt.n=Mt.number,Mt.p=Mt["%"]=Mt.percentage,Mt.ps=Mt.percentSign;var Ot={cache:{}},Tt=function(){function t(){X(this,t)}return t.value=function(t,e){var n=b(e);return n(t)},t.parse=function(t){return b(t)},t.register=function(t,e){Mt[t]=function(){return e}},t.registerFactory=function(t,e){Mt[t]=e},t}(),Ft=null,Vt={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,esc:27,space:32,pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46},At=!0,It="app-loop",Pt="vdom-render",Nt={},$t="production",jt=function(){function t(){X(this,t)}return t.now=function(){return(new Date).getTime()},t.enable=function(t){Lt[t]=!0},t.disable=function(t){Lt[t]=!1},t.count=function(t){if("production"!=$t){if(!Lt[t])return;return Nt[t]=(Nt[t]||0)+1}},t.log=function(t){if("production"!=$t){if(!Lt[t])return;tt.log.apply(tt,arguments)}},t}(),Lt={};window.performance&&window.performance.now&&(jt.now=function(){return performance.now()});var _t,Rt=function(){var t=window.getComputedStyle(document.documentElement,""),e=(Array.prototype.slice.call(t).join("").match(/-(moz|webkit|ms)-/)||""===t.OLink&&["","o"])[1],n="WebKit|Moz|MS|O".match(new RegExp("("+e+")","i"))[1];return{dom:n,lowercase:e,css:"-"+e+"-",js:e[0].toUpperCase()+e.substr(1)}};e.Console=tt,e.Debug=rt,e.renderFlag=ot,e.prepareFlag=it,e.processDataFlag=st,e.cleanupFlag=at,e.menuFlag=lt,e.focusFlag=ut,e.internalFlag=ct,e.shouldUpdateFlag=pt,e.appDataFlag=ht,e.tooltipsFlag=dt,e.deprecatedFlag=ft,e.findFirst=r,e.findFirstChild=o,e.closest=i,e.closestParent=s,e.isFocused=a,e.isFocusedDeep=l,e.isFocusable=u,e.getFocusedElement=c,e.isDescendant=p,e.isSelfOrDescendant=h,e.expandFatArrows=d,e.Format=Tt,e.GlobalCacheIdentifier=St,e.innerTextTrim=w,e.isDigit=x,e.isPromise=D,e.isTouchDevice=C,e.KeyCode=Vt,e.parseStyle=k,e.production=At,e.quoteStr=S,e.scrollElementIntoView=E,e.shallowEquals=M,e.appLoopFlag=It,e.vdomRenderFlag=Pt,e.Timing=jt,e.getViewportSize=O,e.dateDiff=T,e.zeroTime=F,e.monthStart=V,e.lowerBoundCheck=A,e.upperBoundCheck=I,e.maxDate=P,e.minDate=N,e.sameDate=$,e.hslToRgb=L,e.parseColor=_,e.parseHexColor=R,e.parseRgbColor=K,e.parseHslColor=B,e.rgbToHex=H,e.rgbToHsl=U,e.getVendorPrefix=z},function(t,e,n){t.exports=n(4)},function(t,e,n){"use strict";var r=n(19),o=n(63),i=(n(62),n(61));n(18),n(20);n.d(e,"a",function(){return r.b}),n.d(e,"b",function(){return o.a}),n.d(e,"c",function(){return i.a})},function(t,e,n){t.exports=n(10)},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(1),a=(n.n(s),n(22)),l=n.n(a),u=n(31);n.d(e,"a",function(){return c});var c=function(t){function e(){return r(this,e),o(this,t.apply(this,arguments))}return i(e,t),e.prototype.declareData=function(){var e;(e=t.prototype.declareData).call.apply(e,[this].concat(Array.prototype.slice.call(arguments),[{source:void 0}]))},e.prototype.prepareData=function(e,r){var o=r.data;(o.source||this.content)&&(o.source=n.i(u.a)(o.source||this.content),o.innerHtml=l()(o.source)),t.prototype.prepareData.call(this,e,r)},e.prototype.isValidHtmlAttribute=function(e){return"source"!=e&&t.prototype.isValidHtmlAttribute.call(this,e)},e.prototype.add=function(t){var e=this;Array.isArray(t)&&t.forEach(function(t){return e.add(t)}),"string"==typeof t&&(this.content+=t)},e}(s.HtmlElement);c.prototype.trimWhitespace=!1,c.prototype.content=""},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,"a",function(){return o});var o=function(){function t(e){r(this,t),this.gh=e}return t.prototype.checkOk=function(t){if(!t.ok)throw new Error("Invalid response received. "+t.statusText);return t},t.prototype.get=function(){var t={headers:{Authorization:"token "+this.getToken()}};return fetch("https://api.github.com/gists/"+this.getGistId(),t).then(this.checkOk.bind(this)).then(function(t){return t.json()})},t.prototype.load=function(){return this.get().then(function(t){var e=t.files["tdo.json"],n={};return e&&e.content&&(n=JSON.parse(e.content)),n})},t.prototype.create=function(t){var e={method:"POST",headers:{Authorization:"token "+this.getToken(),"Content-Type":"application/json"},body:JSON.stringify({description:"tdo tasks",files:this.convertFiles(t)})};return fetch("https://api.github.com/gists",e).then(this.checkOk.bind(this)).then(function(t){return t.json()})},t.prototype.update=function(t){var e={method:"PATCH",headers:{Authorization:"token "+this.getToken(),"Content-Type":"application/json"},body:JSON.stringify({files:this.convertFiles(t)})};return fetch("https://api.github.com/gists/"+this.getGistId(),e).then(this.checkOk.bind(this)).then(function(t){return t.json()})},t.prototype.convertFiles=function(t){return{"tdo.json":{content:JSON.stringify(t,null,2)}}},t.prototype.getGistId=function(){if(!this.gh||!this.gh.gistId)throw new Error("GistId not set. Please visit the Settings page.");return this.gh.gistId},t.prototype.getToken=function(){if(!this.gh||!this.gh.token)throw new Error("GitHub personal access token not set. Please visit the Settings page.");return this.gh.token},t}()},function(module,exports,__webpack_require__){"use strict";function computable(){function t(t,e){var n,r=e&&s.map(function(t,n){return t(e)});return function(e){if(t||!r)r=s.map(function(t,n){return t(e)});else{for(var i=0,a=0;a<s.length;a++){var l=r[a],u=s[a](e);r[a]=u,l!==u&&i++}if(!i)return n}return n=o.apply(null,r)}}for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];if(0==n.length)throw new Error("computable requires at least a compute function to be passed in arguments.");var o=n[n.length-1];if("function"!=typeof o)throw new Error("Last argument to the computable function should be a function.");for(var i,s=[],a=0;a+1<n.length;a++)if(i=n[a],"string"==typeof i)s.push(Binding.get(i).value);else if(i.createSelector)s.push(i.createSelector());else{if("function"!=typeof i)throw new Error("Invalid selector type '"+("undefined"==typeof i?"undefined":_typeof(i))+"' received.");s.push(i)}var l=t(!0);return l.memoize=t,l}function expression(t){var e,n=expCache[t];if(n)return n;for(var r,o=!1,i=-1,s=0,a=["return ("],l=[],u=[],c=0,p=0;p<t.length;p++){var h=t[p];switch(h){case"{":s>0?s++:!o&&i<0&&("{"!=t[p+1]||"%"==t[p-1])?(i=p+1,s=1,r="%"==t[p-1],r&&a.pop()):"{"!=t[p-1]&&a.push(h);break;case"}":if(i>=0){if(0==--s){var d=t.substring(i,p),f=d.indexOf(":"),y=f==-1?d:d.substring(0,f),m=f==-1?null:d.substring(f+1),g=y.replace(/\./g,"_");if(__util.isDigit(g[0])&&(g="$"+g),r||"["==y[0]&&"]"==y[y.length-1]?(g="expr"+ ++c,l[g]=expression(r?y:y.substring(1,y.length-1))):l[g]=y,m){var v="fmt"+u.length;a.push(v,"(",g,", ",__util.quoteStr(m),")"),u.push(__util.Format.parse(m))}else a.push(g);i=-1}}else a.push(h);break;case'"':case"'":o?"\\"!=t[p-1]&&o==h&&(o=!1):o=h,a.push(h);break;default:i<0&&a.push(h)}}a.push(")");var b=a.join("");Expression.expandFatArrows&&(b=__util.expandFatArrows(b));var w=Object.keys(l),x=(e=new(Function.prototype.bind.apply(Function,[null].concat(u.map(function(t,e){return"fmt"+e}),w,helperNames,[b])))).bind.apply(e,[__util.Format].concat(u,helperValues)),D=computable.apply(void 0,w.map(function(t){return l[t]}).concat([x]));return expCache[t]=D,D}function plus(t){return t.length?t+" + ":t}function stringTemplate(t){var e=tplCache[t];if(e)return e;e="";for(var n,r,o=-1,i=0,s=0,a=0;a<t.length;a++){var l=t[a];switch(l){case"{":o<0?"{"==t[a+1]&&"%"!=t[a-1]?(e=plus(e)+__util.quoteStr(t.substring(i,a)+"{"),a++,i=a+1):(o=a+1,r="%"==t[a-1],a>i&&(e=plus(e)+__util.quoteStr(t.substring(i,r?a-1:a))),s=1):s++;break;case"}":o>=0?0==--s&&(n=t.substring(o,a),n.indexOf(":")==-1&&(n+=":s"),e=plus(e)+(r?"%{":"{")+n+"}",o=-1,i=a+1,s=0):"}"==t[a+1]&&(e=plus(e)+__util.quoteStr(t.substring(i,a)+"}"),a++,i=a+1)}}return i<t.length&&(e=plus(e)+__util.quoteStr(t.substring(i))),tplCache[t]=expression(e)}function createStructuredSelector(t){var e=Object.keys(t),n={};return function(r){for(var o=n,i=0;i<e.length;i++){var s=e[i],a=t[s](r);if(o==n&&a!==n[s]){o={};for(var l=0;l<i;l++)o[e[l]]=n[e[l]]}o[s]=a}return n=o}}function getSelector(t){if(null==t)return nullF;switch("undefined"==typeof t?"undefined":_typeof(t)){case"object":if(Array.isArray(t)){var e=function(){var e=t.map(function(t){return getSelector(t)});return{v:function(t){return e.map(function(e){return e(t)})}}}();if("object"===("undefined"==typeof e?"undefined":_typeof(e)))return e.v}if(t.bind)return Binding.get(t.bind).value;if(t.tpl)return StringTemplate.get(t.tpl);if(t.expr)return Expression.get(t.expr);break;case"function":return t;default:return function(){return t}}}function defaultValue(t){return"object"==("undefined"==typeof t?"undefined":_typeof(t))&&t&&t.structured?t.defaultValue:t}function getSelectorConfig(t,e,n){var r={bindings:{},templates:{},expressions:{},functions:{},structures:{}},o=function(){var o=e[i],s=t[i];if("undefined"==typeof o&&s&&(s.bind||s.tpl||s.expr)&&(o=s),null===o)r.functions[i]=function(){return null};else if("object"==("undefined"==typeof o?"undefined":_typeof(o)))o.bind?(r.bindings[i]=o,"undefined"==typeof o.defaultValue&&o!=s&&(o.defaultValue=defaultValue(s)),n[i]=o.bind):o.expr?r.expressions[i]=o.expr:o.tpl?r.templates[i]=o.tpl:s&&"object"==("undefined"==typeof s?"undefined":_typeof(s))&&s.structured?Array.isArray(o)?r.functions[i]=getSelector(o):r.structures[i]=getSelectorConfig(o,o,{}):r.functions[i]=function(){return o};else if("function"==typeof o)r.functions[i]=o;else{if("undefined"==typeof o){if("undefined"==typeof s)return"continue";o=defaultValue(s)}r.functions[i]=function(){return o}}};for(var i in t){o()}return r}function createSelector(t){var e={};for(var n in t.bindings){var r=t.bindings[n],o=Binding.get(r.bind);e[n]=o.value}for(var i in t.templates){var s=t.templates[i];e[i]=StringTemplate.compile(s)}for(var a in t.expressions){var l=t.expressions[a];e[a]=Expression.compile(l)}for(var u in t.functions){var c=t.functions[u];e[u]=c.memoize?c.memoize():c}for(var p in t.structures)e[p]=createSelector(t.structures[p]);var h=createStructuredSelector(e);return h}function isSelector(t){if(null==t)return!0;switch("undefined"==typeof t?"undefined":_typeof(t)){case"object":return!t.type&&!t.$type&&(!!t.bind||(!!t.tpl||!!t.expr));case"function":return!0;case"string":return!0;case"number":return!0;case"boolean":return!0}return!1}function transform(t,e){var n={};for(var r in t)n[r]=e(t[r],r);return n}function getComparer(t,e){var n=(t||[]).map(function(t){var n=getSelector(t.value);return{getter:e?function(t){return n(e(t))}:n,factor:t.direction&&"d"==t.direction[0].toLowerCase()?-1:1}});return function(t,e){for(var r=0;r<n.length;r++){var o=n[r],i=o.getter(t),s=o.getter(e);if(i<s)return-o.factor;if(i>s)return o.factor}return 0}}function indexSorter(t,e){var n=getComparer(t,e);return function(t){var e=Array.from({length:t.length},function(t,e){return e});return e.sort(function(e,r){return n(t[e],t[r])}),e}}function sorter(t,e){var n=getComparer(t,e);return function(t){var e=[].concat(t);return e.sort(n),e}}function append(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return 0==n.length?t:[].concat(t,n)}function merge(t,e){var n=t;if(e)for(var r in e)n=Binding.get(r).set(n,e[r]);return n}function filter(t,e){var n=t.filter(e);return n.length==t.length?t:n}function updateArray(t,e,n){var r=[],o=!1;return t.forEach(function(t){if(!n||n(t)){var i=e(t);r.push(i),i!==t&&(o=!0)}else r.push(t)}),o?r:t}function updateTree(t,e,n,r){return updateArray(t,n,function(t){var o=e(t);if(o){var i=o[r],s=updateTree(i,n,e,r);if(s!=i){var a;o=_extends({},o,(a={},a[r]=s,a))}}return o})}function diffArrays(t,e,n){n||(n=function(t){return t});for(var r=new Map,o=0;o<t.length;o++)r.set(n(t[o]),t[o]);for(var i=[],s=[],a=[],l=0;l<e.length;l++){var u=e[l],c=n(u),p=r.get(c);"undefined"==typeof p?i.push(u):(r.delete(c),u==p?a.push(u):s.push({before:p,after:u}))}var h=Array.from(r.values());return{added:i,changed:s,unchanged:a,removed:h}}var _typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(exports,"__esModule",{value:!0});var __util=__webpack_require__(4),_typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(t){return"undefined"==typeof t?"undefined":_typeof2(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":"undefined"==typeof t?"undefined":_typeof2(t)},classCallCheck=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},_extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},get$1=function t(e,n,r){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,n,r)}if("value"in o)return o.value;var s=o.get;if(void 0!==s)return s.call(r)},inherits=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":_typeof2(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},possibleConstructorReturn=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":_typeof2(e))&&"function"!=typeof e?t:e},set$1=function t(e,n,r,o){var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var s=Object.getPrototypeOf(e);null!==s&&t(s,n,r,o)}else if("value"in i&&i.writable)i.value=r;else{var a=i.set;void 0!==a&&a.call(o,r)}return r},bindingCache={},Binding=function(){function t(e){classCallCheck(this,t),this.path=e,this.parts=e.split(".");for(var n="return (x",r="x",o=0;o<this.parts.length;o++)r+=this.parts[o][0]>="0"&&this.parts[o][0]<="9"?"["+this.parts[o]+"]":"."+this.parts[o],n+=" && "+r;n+=")",this.value=new Function("x",n)}return t.prototype.set=function(t,e){var n=this.value(t);if(n===e)return t;for(var r=Object.assign({},t),o=r,i=0;i<this.parts.length;i++){var s=this.parts[i],a=i==this.parts.length-1?e:Object.assign({},o[s]);o[s]=a,o=a}return r},t.prototype.delete=function(t){for(var e,n=Object.assign({},t),r=n,o=0;o<this.parts.length-1;o++){e=this.parts[o];var i=Object.assign({},r[e]);r[e]=i,r=i}return e=this.parts[this.parts.length-1],r.hasOwnProperty(e)?(delete r[e],n):t},t.get=function(e){if("string"==typeof e){var n=bindingCache[e];return n?n:(n=new t(e),bindingCache[e]=n,n)}return e},t}(),expCache={},helpers={},helperNames=[],helperValues=[],Expression=function(){function t(){classCallCheck(this,t)}return t.get=function(t){return expression(t)},t.compile=function(t){return this.get(t).memoize()},t.registerHelper=function(t,e){helpers[t]=e,helperNames=Object.keys(helpers),helperValues=helperNames.map(function(t){return helpers[t]})},t}();Expression.expandFatArrows=!0;try{5===eval("(() => 5)()")&&(Expression.expandFatArrows=!1)}catch(t){}var tplCache={},StringTemplate=function(){function t(){classCallCheck(this,t)}return t.get=function(t){return stringTemplate(t)},t.compile=function(t){return this.get(t).memoize()},t.format=function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return this.get(t)(n)},t}(),View=function(){function t(e){classCallCheck(this,t),Object.assign(this,e),this.cache={version:-1},this.store&&this.setStore(this.store)}return t.prototype.getData=function(){throw new Error("abstract method")},t.prototype.init=function(t,e){var n=this.get(t);"undefined"==typeof n&&this.set(t,e)},t.prototype.set=function(t,e){if(this.store)return this.store.set(t,e);throw new Error("abstract method")},t.prototype.delete=function(t){if(this.store)return this.store.delete(t);throw new Error("abstract method")},t.prototype.clear=function(){if(this.store)return this.store.clear();throw new Error("abstract method")},t.prototype.get=function(t){return Binding.get(t).value(this.getData())},t.prototype.toggle=function(t){this.set(t,!this.get(t))},t.prototype.update=function(t,e){for(var n=arguments.length,r=Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];this.set(t,e.apply(null,[this.get(t)].concat(r)))},t.prototype.batch=function(t){this.notificationsSuspended=(this.notificationsSuspended||0)+1;try{t(this)}finally{this.notificationsSuspended--,this.dirty&&(this.dirty=!1,this.notify())}},t.prototype.silently=function(t){this.notificationsSuspended=(this.notificationsSuspended||0)+1;var e,n=this.dirty;this.dirty=!1;try{t(this)}finally{this.notificationsSuspended--,e=this.dirty,this.dirty=n}return e},t.prototype.notify=function(t){this.notificationsSuspended?this.dirty=!0:this.doNotify(t)},t.prototype.doNotify=function(t){if(this.store)return this.store.notify(t);throw new Error("abstract method")},t.prototype.subscribe=function(t){if(this.store)return this.store.subscribe(t);throw new Error("abstract method")},t.prototype.load=function(t){this.batch(function(e){for(var n in t)e.set(n,t[n])})},t.prototype.dispatch=function(t){if(this.store)return this.store.dispatch(t);throw new Error("The underlying store doesn't support dispatch.")},t.prototype.getMeta=function(){return this.meta},t.prototype.setStore=function(t){this.store=t,this.meta=t.getMeta()},t}(),Store=function(t){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};classCallCheck(this,e);var r=possibleConstructorReturn(this,t.call(this));return r.data=n.data||{},r.subscriptions={},r.subscriptionKey=0,r.changes=[],r.meta={version:0},r}return inherits(e,t),e.prototype.getData=function(){return this.data},e.prototype.set=function(t,e){var n=Binding.get(t).set(this.data,e);n!=this.data&&(this.data=n,this.meta.version++,this.notify(t))},e.prototype.delete=function(t){var e=Binding.get(t).delete(this.data);e!=this.data&&(this.data=e,this.meta.version++,this.notify(t))},e.prototype.clear=function(){this.data={},this.meta.version++,this.notify()},e.prototype.subscribe=function(t){var e=this,n=++this.subscriptionKey;return this.subscriptions[n]=t,function(){return delete e.subscriptions[n]}},e.prototype.unsubscribeAll=function(){this.subscriptions={}},e.prototype.doNotify=function(t){
var e=this;this.changes.push(t||""),this.scheduled||(this.scheduled=!0,setTimeout(function(){e.scheduled=!1;var t=e.changes;e.changes=[];for(var n in e.subscriptions)e.subscriptions[n](t)},0))},e}(View),ExposedRecordView=function(t){function e(){return classCallCheck(this,e),possibleConstructorReturn(this,t.apply(this,arguments))}return inherits(e,t),e.prototype.getData=function(){return this.immutable&&this.meta.version==this.cache.version&&this.cache.itemIndex==this.itemIndex||(this.cache.result=this.embed(this.store.getData()),this.cache.version=this.meta.version,this.cache.itemIndex=this.itemIndex),this.cache.result},e.prototype.embed=function(t){var e=this.collectionBinding.value(t),n=e[this.itemIndex],r=this.immutable?_extends({},t):t;return r[this.recordName]=n,this.indexName&&(r[this.indexName]=this.itemIndex),r},e.prototype.setIndex=function(t){this.itemIndex=t},e.prototype.set=function(t,e){if(t instanceof Binding&&(t=t.path),t==this.recordName||0==t.indexOf(this.recordName+".")){var n=this.store.getData(),r=this.collectionBinding.value(n),o=this.embed(n),i=Binding.get(t).set(o,e);if(i!=o){var s=i[this.recordName],a=[].concat(r.slice(0,this.itemIndex),[s],r.slice(this.itemIndex+1));this.store.set(this.collectionBinding,a)}}else this.store.set(t,e)},e.prototype.delete=function(t){t instanceof Binding&&(t=t.path);var e,n,r;if(t==this.recordName)e=this.store.getData(),n=this.collectionBinding.value(e),r=[].concat(n.slice(0,this.itemIndex),n.slice(this.itemIndex+1)),this.store.set(this.collectionBinding,r);else if(0==t.indexOf(this.recordName+".")){e=this.store.getData(),n=this.collectionBinding.value(e);var o=this.embed(e),i=Binding.get(t).delete(o);if(i!=o){var s=i[this.recordName];r=[].concat(n.slice(0,this.itemIndex),[s],n.slice(this.itemIndex+1)),this.store.set(this.collectionBinding,r)}}else this.store.delete(t)},e}(View);ExposedRecordView.prototype.immutable=!1;var ExposedValueView=function(t){function e(){return classCallCheck(this,e),possibleConstructorReturn(this,t.apply(this,arguments))}return inherits(e,t),e.prototype.getData=function(){if(!this.immutable||this.meta.version!=this.cache.version||this.cache.key!=this.key){var t=this.store.getData(),e=this.containerBinding.value(t)||{},n=e[this.key];this.cache.result=this.immutable?_extends({},t):t,this.cache.result[this.recordName]=n,this.cache.version=this.meta.version,this.cache.key=this.key}return this.cache.result},e.prototype.setKey=function(t){this.key=t},e.prototype.getKey=function(){return this.key},e.prototype.set=function(t,e){if(t instanceof Binding&&(t=t.path),t==this.recordName||0==t.indexOf(this.recordName+".")){var n=this.getData(),r=Binding.get(t).set(n,e);if(r!=n){var o=this.containerBinding.value(r),i=r[this.recordName],s=Object.assign({},o);s[this.key]=i,this.store.set(this.containerBinding,s)}}else this.store.set(t,e)},e.prototype.delete=function(t){t instanceof Binding&&(t=t.path);var e,n,r;if(t==this.recordName){if(e=this.getData(),n=this.containerBinding.value(e),!n.hasOwnProperty(t))return!1;r=Object.assign({},n),delete r[this.key],this.store.set(this.containerBinding,r)}else if(0==t.indexOf(this.recordName+".")){e=this.getData();var o=Binding.get(t).delete(e);if(o!=e){n=this.containerBinding.value(o);var i=o[this.recordName];r=Object.assign({},n),r[this.key]=i,this.store.set(this.containerBinding,r)}}else this.store.delete(t)},e}(View);ExposedValueView.prototype.immutable=!1;var ReadOnlyDataView=function(t){function e(){return classCallCheck(this,e),possibleConstructorReturn(this,t.apply(this,arguments))}return inherits(e,t),e.prototype.getData=function(){if(!this.immutable||this.meta.version!=this.cache.version||this.cache.data!=this.data){var t=this.store.getData();this.cache.result=this.immutable?Object.assign({},t,this.data):Object.assign(t,this.data),this.cache.version=this.meta.version,this.cache.data=this.data}return this.cache.result},e.prototype.setData=function(t){this.data=t},e}(View);ReadOnlyDataView.prototype.immutable=!1;var ZoomIntoPropertyView=function(t){function e(){return classCallCheck(this,e),possibleConstructorReturn(this,t.apply(this,arguments))}return inherits(e,t),e.prototype.getData=function(){if(this.cache.version!=this.meta.version){var t,e=this.store.getData(),n=this.binding.value(e);if(null!=n&&"object"!=("undefined"==typeof n?"undefined":_typeof(n)))throw new Error("Zoomed value must be an object.");this.cache.result=_extends({},n,(t={},t[this.rootName]=e,t)),this.cache.version=this.meta.version}return this.cache.result},e.prototype.set=function(t,e){t instanceof Binding&&(t=t.path),0==t.indexOf(this.rootName+".")?this.store.set(t.substring(this.rootName.length+1),e):this.store.set(this.binding.path+"."+t,e)},e.prototype.delete=function(t){t instanceof Binding&&(t=t.path),0==t.indexOf(this.rootName+".")?this.store.delete(t.substring(this.rootName.length+1)):this.store.delete(this.binding.path+"."+t)},e}(View);ZoomIntoPropertyView.prototype.rootName="$root";var nullF=function(){return null},StructuredSelector=function(){function t(e){var n=e.props,r=e.values;classCallCheck(this,t),this.nameMap={},this.config=getSelectorConfig(n,r,this.nameMap)}return t.prototype.init=function(t){for(var e in this.config.bindings){var n=this.config.bindings[e];"undefined"!=typeof n.defaultValue&&t.init(n.bind,n.defaultValue)}},t.prototype.create=function(){return createSelector(this.config)},t}(),AggregateFunction=function(){function t(){classCallCheck(this,t)}return t.sum=function(){return new Sum},t.avg=function(){return new Avg},t.count=function(){return new Count},t.distinct=function(){return new Distinct},t.min=function(){return new Min},t.max=function(){return new Max},t}(),Sum=function(){function t(){classCallCheck(this,t)}return t.prototype.process=function(t){this.empty=!1,isNaN(t)?this.invalid=!0:this.result+=t},t.prototype.getResult=function(){return this.invalid?null:this.result},t}();Sum.prototype.result=0,Sum.prototype.empty=!0;var Avg=function(){function t(){classCallCheck(this,t)}return t.prototype.process=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.empty=!1,isNaN(t)||isNaN(e)?this.invalid=!0:(this.result+=t*e,this.count+=e)},t.prototype.getResult=function(){return this.empty||this.invalid||0==this.count?null:this.result/this.count},t}();Avg.prototype.result=0,Avg.prototype.count=0,Avg.prototype.empty=!0;var Count=function(){function t(){classCallCheck(this,t)}return t.prototype.process=function(t){this.empty=!1,null!=t&&this.result++},t.prototype.getResult=function(){return this.empty||this.invalid?null:this.result},t}();Count.prototype.result=0,Count.prototype.empty=!0;var Distinct=function(){function t(){classCallCheck(this,t),this.values={}}return t.prototype.process=function(t){null==t||this.values[t]||(this.values[t]=!0,this.empty=!1,this.result++)},t.prototype.getResult=function(){return this.empty||this.invalid?null:this.result},t}();Distinct.prototype.result=0,Distinct.prototype.empty=!0;var Max=function(){function t(){classCallCheck(this,t)}return t.prototype.process=function(t){isNaN(t)?this.invalid=!0:(this.empty?this.result=t:t>this.result&&(this.result=t),this.empty=!1)},t.prototype.getResult=function(){return this.empty||this.invalid?null:this.result},t}();Max.prototype.result=0,Max.prototype.empty=!0;var Min=function(){function t(){classCallCheck(this,t)}return t.prototype.process=function(t){isNaN(t)?this.invalid=!0:(this.empty?this.result=t:t<this.result&&(this.result=t),this.empty=!1)},t.prototype.getResult=function(){return this.empty||this.invalid?null:this.result},t}();Min.prototype.result=0,Min.prototype.empty=!0;var Grouper=function(){function t(e,n,r,o){classCallCheck(this,t),this.keys=Object.keys(e).map(function(t){return{name:t,value:getSelector(e[t])}}),o&&(this.nameGetter=getSelector(o)),this.dataGetter=r||function(t){return t},this.aggregates=n&&transform(n,function(t){if(!AggregateFunction[t.type])throw new Error("Unknown aggregate function '"+t.type+"'.");return{value:getSelector(t.value),weight:getSelector(t.weight||1),type:t.type}}),this.reset()}return t.prototype.reset=function(){this.groups=this.initGroup(0==this.keys.length)},t.prototype.initGroup=function(t){return t?{records:[],indexes:[],aggregates:this.aggregates&&transform(this.aggregates,function(t){var e=AggregateFunction[t.type];return{processor:e(),value:t.value,weight:t.weight}})}:{}},t.prototype.process=function(t,e){for(var n=this.dataGetter(t),r=this.keys.map(function(t){return t.value(n)}),o=this.groups,i=0;i<r.length;i++){var s=o[r[i]];s||(s=o[r[i]]=this.initGroup(i+1==r.length),this.nameGetter&&(s.name=this.nameGetter(n))),o=s}if(o.records.push(t),o.indexes.push(e),o.aggregates)for(var a in o.aggregates)o.aggregates[a].processor.process(o.aggregates[a].value(n),o.aggregates[a].weight(n))},t.prototype.processAll=function(t,e){var n=this;if(e)for(var r=0;r<t.length;r++)this.process(t[r],e[r]);else t.forEach(function(t,e){return n.process(t,e)})},t.prototype.report=function(t,e,n,r){var o=this;if(n==this.keys.length){var i={};this.keys.forEach(function(t,n){return i[t.name]=e[n]}),r.push({key:i,name:t.name,records:t.records,indexes:t.indexes,aggregates:transform(t.aggregates,function(t){return t.processor.getResult()})})}else Object.keys(t).forEach(function(i){return o.report(t[i],[].concat(e,[i]),n+1,r)})},t.prototype.getResults=function(){var t=this.groups,e=[];return this.report(t,[],0,e),e},t}();exports.Binding=Binding,exports.expression=expression,exports.Expression=Expression,exports.stringTemplate=stringTemplate,exports.StringTemplate=StringTemplate,exports.View=View,exports.Store=Store,exports.ExposedRecordView=ExposedRecordView,exports.ExposedValueView=ExposedValueView,exports.ReadOnlyDataView=ReadOnlyDataView,exports.ZoomIntoPropertyView=ZoomIntoPropertyView,exports.StructuredSelector=StructuredSelector,exports.computable=computable,exports.getSelector=getSelector,exports.isSelector=isSelector,exports.Grouper=Grouper,exports.getComparer=getComparer,exports.indexSorter=indexSorter,exports.sorter=sorter,exports.append=append,exports.merge=merge,exports.filter=filter,exports.updateArray=updateArray,exports.updateTree=updateTree,exports.diffArrays=diffArrays},function(t,e,n){"use strict";var r=n(3),o=n.n(r);n.d(e,"e",function(){return a}),n.d(e,"f",function(){return l}),n.d(e,"d",function(){return u}),n.d(e,"a",function(){return c}),n.d(e,"c",function(){return p}),n.d(e,"b",function(){return h});var i="ADD_BOARD",s="REMOVE_BOARD",a="GOTO_BOARD",l="SELECT_FIRST_BOARD",u=function(t){return{type:a,id:t}},c=function(t){return{type:l,forced:t}},p=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e){t||(t.id=o()()),t.createdDate=(new Date).toISOString(),e({type:i,data:t})}},h=function(t){return{type:s,id:t}}},function(t,e,n){"use strict";e.a=function(t){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t;arguments[1];return e}}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,"a",function(){return o});var o=function(){function t(){r(this,t)}return t.get=function(){return localStorage.gh&&JSON.parse(localStorage.gh)},t.set=function(t){t?localStorage.gh=JSON.stringify(t):delete localStorage.gh},t}()},function(t,e,n){"use strict";function r(t,e,n){if(null==e||e===!1)return!1;if(Array.isArray(e))e.forEach(function(e){return r(t,e)});else{if("undefined"!=typeof e.content&&!e.atomic)return r(t,e.content);n&&t.push(" "),t.push(e)}return!0}function o(t){var e=[];return r(e,t),e}function i(t){var e=o(t);return 0==e.length?null:1==e.length?e[0]:e}function s(){if(U.length)return U.pop();var t=String(H++);return t}function a(t,e){z[t]===e&&(U.push(t),delete z[t])}function l(t,e,n){t.oneFocusOut||(t.oneFocusOut=G.oneFocusOut(e,function(e){delete t.oneFocusOut,n(e)}))}function u(t){t.oneFocusOut&&(t.oneFocusOut(),delete t.oneFocusOut)}function c(){if(X.length)return X.pop();var t=String(Q++);return t}function p(t){X.push(t),delete J[t]}function h(t){var e=[];for(var n in t)"label"!=n&&r(e,t[n]);return e}function d(t){var e=[];for(var n in t)"label"!=n&&r(e,t[n]);return e}function f(t,e,n){var r=t.content&&t.content[e],o=t.contentPlaceholder&&t.contentPlaceholder[e];r&&(t.content[e]=null),o&&(t.contentPlaceholder[e]=null),n(),t.content&&(r?t.content[e]=r:delete t.content[e]),t.contentPlaceholder&&(o?t.contentPlaceholder[e]=o:delete t.contentPlaceholder[e])}function y(t){return null!=t&&"undefined"!=typeof t.content?t:{content:t}}function m(t,e,n,r){if(!t||1!==t.nodeType)throw new Error("First argument to startAppLoop should be a valid DOM element.");n=$.create(n),e||(e=new b.Store);var o=new ht(n,"root");o.setStore(e);var i=function(){n.mount(t,e,r,o)},s=!1,a=function(){s||(requestAnimationFrame(function(){s=!1,i()}),s=!0)},l=e.subscribe(a);return i(),l}function g(t){var e="",n=0;0==t.indexOf("~/")&&(n=2);for(var r=n;r<t.length;r++)switch(t[r]){case".":e+="\\.";break;case"*":e+=".*";break;default:e+=t[r]}return new RegExp(e+"(\\?.*)?$","i")}var v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(e,"__esModule",{value:!0});var b=n(10),w=n(4),x=n(64),D="function"==typeof Symbol&&"symbol"===v(Symbol.iterator)?function(t){return"undefined"==typeof t?"undefined":v(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":"undefined"==typeof t?"undefined":v(t)},C=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},k=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},S=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":v(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},E=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":v(e))&&"function"!=typeof e?t:e},M={},O=function(){function t(e){C(this,t),Object.assign(this,e)}return t.prototype.init=function(){},t.alias=function(t,e){var n=this;return e?(e.prototype.componentAlias=t,void(M[this.namespace+t]=e)):function(e){return n.alias(t,e),e}},t.create=function(t,e,n){var r=this;if(!t)return this.factory(t,e,n);if(t.isComponent)return t;if(Array.isArray(t))return t.map(function(t){return r.create(t,e,n)});if(t.$type)return this.create(t.$type,t,e);if(t.type)return this.create(t.type,t,e);var o=void 0,i=void 0;if(t.isComponentType)o=t;else{if("function"==typeof t){if(this.factory)return this.factory(t,e,n);throw new Error("Unsupported component type "+t+".")}if("string"==typeof t){if(i=this.namespace+t,o=M[i],!o){if(t&&this.factory)return this.factory(t,e,n);throw new Error("Unknown component alias "+i+".")}}else"object"==("undefined"==typeof t?"undefined":D(t))&&(o=t.type||t.$type,o||(o=this,n=n?Object.assign({},e,n):e,e=t))}if(Array.isArray(e))return e.map(function(t){return r.create(o,t,n)});var s=e;n&&(s=Object.assign({},e,n));var a=new o(s);return this.lazyInit||a.init(),a},t}();O.isComponentType=!0,O.prototype.isComponent=!0,O.namespace="",O.lazyInit=!1,O.factory=function(t,e,n){throw new Error("Unknown component alias "+t+".")};var T=function(t){function e(){return C(this,e),E(this,t.apply(this,arguments))}return S(e,t),e.prototype.prepare=function(t){var e=this.instance.store;if(this.store=e,this.initialized||(this.init(),this.initialized=!0),this.computables)for(var n in this.computables)e.set(n,this.computables[n](e.getData()));if(this.triggers)for(var n in this.triggers)this.triggers[n](e.getData())},e.prototype.cleanup=function(t){},e.prototype.addComputable=function(t,e,n){if(!Array.isArray(e))throw new Error("Second argument to the addComputable method should be an array.");var r=b.computable.apply(void 0,e.concat([n])).memoize();this.computables||(this.computables={}),this.computables[t]=r},e.prototype.addTrigger=function(t,e,n,r){if(!Array.isArray(e))throw new Error("Second argument to the addComputable method should be an array.");var o=b.computable.apply(void 0,e.concat([n])).memoize(!1,!r&&this.store.getData());this.triggers||(this.triggers={}),this.triggers[t]=o},e.prototype.removeTrigger=function(t){this.triggers&&delete this.triggers[t]},e}(O);T.namespace="ui.controller.",T.lazyInit=!0;var F={},V=function(){function t(){C(this,t)}return t.get=function(t){var e=F[t];if(!e)throw new Error("Unknown CSS helper '"+t+"'.");return e},t.register=function(t,e){F[t]=e},t.alias=function(t,e){F[t]=e},t}(),A=function(){function t(){C(this,t)}return t.resolve=function(){for(var t=[],e=0;e<arguments.length;e++){var n=arguments[e];if(n){var r="undefined"==typeof n?"undefined":D(n);if("string"==r)t.push(n);else if("object"==r)if(Array.isArray(n))t.push.apply(t,this.resolve.apply(this,n));else for(var o in n)n[o]&&t.push(o)}}return t},t.block=function(t,e,n){var r=this,o=[];return t&&o.push(this.classPrefix+"b-"+t),o.push.apply(o,this.resolve(e).map(function(t){return r.classPrefix+"m-"+t})),o.push.apply(o,this.resolve(n).map(function(t){return r.classPrefix+"s-"+t})),o.join(" ")||null},t.element=function(t,e,n){var r=this;if(t&&e)return[this.classPrefix+"e-"+t+"-"+e].concat(this.resolve(n).map(function(t){return r.classPrefix+"s-"+t})).join(" ")||null},t.state=function(t){var e=this;return[].concat(this.resolve(t).map(function(t){return e.classPrefix+"s-"+t})).join(" ")||null},t.expand=function(){return this.resolve.apply(this,arguments).join(" ")||null},t.parseStyle=function(t){return w.parseStyle(t)},t}();A.classPrefix="cx",V.alias("cx",A);var I=function t(e){C(this,t),this.options=e||{}},P=x.VDOM,N=100,$=function(t){function e(n){C(this,e);var r=E(this,t.call(this,n));return r.widgetId=N++,Array.isArray(r.jsxSpread)&&(r.jsxAttributes||(r.jsxAttributes=[]),r.jsxSpread.forEach(function(t){for(var e in t)r[e]=t[e],r.jsxAttributes.push(e)})),Array.isArray(r.jsxAttributes)&&r.jsxAttributes.forEach(function(t){0==t.indexOf("on")&&t.length>2&&"string"==typeof r[t]&&!function(){var e=r[t];r[t]=function(t,n){for(var r=arguments.length,o=Array(r>2?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];var s;return(s=n.controller)[e].apply(s,[t,n].concat(o))}}(),0==t.indexOf("pipe")&&t.length>6&&"string"==typeof r[t]&&!function(){var e=r[t];r[t]=function(t,n){for(var r=arguments.length,o=Array(r>2?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];var s;return(s=n.controller)[e].apply(s,[t,n].concat(o))}}()}),r}return S(e,t),e.prototype.init=function(){if("undefined"!=typeof this.if&&(this.visible=this.if),this.declareData(),this.outerLayout){if(Array.isArray(this.outerLayout))throw new Error("Only single element outer layout is supported.");this.outerLayout=e.create(this.outerLayout)}this.contentFor&&(this.putInto=this.contentFor),this.putInto&&(this.isContent=!0),"string"==typeof this.CSS&&(this.CSS=V.get(this.CSS)),this.initHelpers(),this.initComponents(),this.initialized=!0},e.prototype.initComponents=function(){if(arguments.length>0){this.components=Object.assign.apply(Object,arguments);for(var t in this.components)this.components[t]||delete this.components[t]}},e.prototype.initHelpers=function(){arguments.length>0&&(this.helpers=Object.assign.apply(Object,arguments))},e.prototype.declareData=function(){var t={visible:!0,mod:{structured:!0}};Object.assign.apply(Object,[t].concat(Array.prototype.slice.call(arguments))),this.selector=new b.StructuredSelector({props:t,values:this}),this.nameMap=this.selector.nameMap},e.prototype.prepareCSS=function(t,e){var n=e.data;n.classNames=this.CSS.expand(this.CSS.block(this.baseClass,n.mod,n.stateMods),n.class,n.className),n.style=this.CSS.parseStyle(n.style)},e.prototype.prepareData=function(t,e){this.prepareCSS(t,e)},e.prototype.initInstance=function(t,e){this.onInit&&this.onInit(t,e)},e.prototype.initState=function(t,e){},e.prototype.checkVisible=function(t,e,n){return n.visible},e.prototype.explore=function(t,e){if(e.components)for(var n in e.components)e.components[n].explore(t)},e.prototype.prepare=function(t,e){if(e.components)for(var n in e.components)e.components[n].prepare(t)},e.prototype.render=function(t,e,n){throw new Error("render method should be overridden.")},e.prototype.cleanup=function(t,e){},e.prototype.update=function(){this.version=(this.version||0)+1},e.prototype.mount=function(t,e,n,r){var o=w.Timing.now(),i=this.prepareRenderCleanup(e,n,null,r);if(i){var s=w.Timing.now();P.DOM.render(i,t);var a=w.Timing.now(),l=w.Timing.count(w.vdomRenderFlag);w.Timing.log(w.vdomRenderFlag,l,"cx",(s-o).toFixed(2)+"ms","vdom",(a-s).toFixed(2)+"ms")}else P.DOM.unmountComponentAtNode(t)},e.prototype.prepareRenderCleanup=function(t,n,r,o){var i=o.getChild(null,this,r,t);return e.renderInstance(i,n)},e.renderInstance=function(t,n){for(var r,o,s=w.Timing.now(),a=0,l=t.store;++a<3&&(o=l.silently(function(){r=new I(n),t.explore(r),t.prepare(r)}),o&&e.optimizePrepare););o&&l.notify();var u=w.Timing.now(),c=i(t.render(r)),p=w.Timing.now();t.cleanup(r);var h=w.Timing.now(),d=w.Timing.count(w.appLoopFlag);return w.Timing.log(w.appLoopFlag,d,r.options.name||"main",(h-s).toFixed(1)+"ms","prepare",(u-s).toFixed(1),"render",(p-u).toFixed(1),"cleanup",(h-p).toFixed(1)),w.Debug.log(w.appDataFlag,l.getData()),c},e.resetCounter=function(){N=100},e}(O);$.prototype.memoize=!0,$.prototype.pure=!0,$.prototype.CSS="cx",$.namespace="ui.",$.lazyInit=!0,$.optimizePrepare=!0,$.factory=function(t,e,n){throw new Error("Invalid widget type: "+t+".")};var j=function(t){function e(){return C(this,e),E(this,t.apply(this,arguments))}return S(e,t),e.prototype.render=function(){return this.text},e}($);$.alias("static-text",j);var L=function(t){function e(){return C(this,e),E(this,t.apply(this,arguments))}return S(e,t),e.prototype.init=function(){t.prototype.init.call(this),"string"==typeof this.CSS&&(this.CSS=V.get(this.CSS))},e.prototype.explore=function(t,e,n){e.children=[];for(var r=!e.shouldUpdate&&null!=e.cached.children,o=0;o<n.length;o++){var i=e.getChild(t,n[o]);i.explore(t),i.visible&&(r&&e.cached.children[e.children.length]!==i&&(r=!1),e.children.push(i))}r&&e.children.length==e.cached.children.length||(e.shouldUpdate=!0)},e.prototype.prepare=function(t,e){for(var n=0;n<e.children.length;n++)e.children[n].prepare(t)},e.prototype.append=function(t,e){if(null!=e)if("object"==("undefined"==typeof e?"undefined":D(e)))if(e.atomic)t.push(e);else{var n=!0;for(var o in e)r(t,e[o],!n)&&(n=!1)}else r(t,e)},e.prototype.render=function(t,e,n){for(var r,o,i=this,s=[],a=0;a<e.children.length;a++)r=e.children[a],o=r.render(t,n),r.widget.layout&&r.widget.layout.useParentLayout&&Array.isArray(o.content)?o.content.forEach(function(t){return i.append(s,t)}):this.append(s,o);return s},e.prototype.cleanup=function(t,e){for(var n=0;n<e.children.length;n++)e.children[n].cleanup(t);e.cached.children=e.children},e}(O);L.prototype.CSS="cx",L.namespace="ui.layout.",L.alias("default",L);var _=function(t){function e(){return C(this,e),E(this,t.apply(this,arguments))}return S(e,t),e.prototype.init=function(){!this.value&&(this.tpl||this.expr||this.bind)&&(this.value={tpl:this.tpl,expr:this.expr,bind:this.bind}),t.prototype.init.call(this)},e.prototype.declareData=function(){var e;(e=t.prototype.declareData).call.apply(e,[this,{value:void 0}].concat(Array.prototype.slice.call(arguments)))},e.prototype.render=function(t,e,n){var r=e.data;return null!=r.value?r.value:""},e}($);$.alias("text",_);var R=function(t){function e(){return C(this,e),E(this,t.apply(this,arguments))}return S(e,t),e.prototype.init=function(){"undefined"!=typeof this.ws&&(this.preserveWhitespace=this.ws),this.preserveWhitespace&&(this.trimWhitespace=!1),this.styled&&(this.style=w.parseStyle(this.style));var e=this.items||this.children||[];this.items=[],this.add(e),t.prototype.init.call(this),this.layout=L.create(this.layout||"default")},e.prototype.declareData=function(){var e,n=this.styled?{className:{structured:!0},class:{structured:!0},style:{structured:!0}}:{};(e=t.prototype.declareData).call.apply(e,[this].concat(Array.prototype.slice.call(arguments),[n]))},e.prototype.explore=function(e,n){this.layout.explore(e,n,this.items),t.prototype.explore.call(this,e,n)},e.prototype.prepare=function(e,n){this.layout.prepare(e,n),t.prototype.prepare.call(this,e,n)},e.prototype.render=function(t,e,n){return this.renderChildren(t,e,n)},e.prototype.cleanup=function(e,n){this.layout.cleanup(e,n),t.prototype.cleanup.call(this,e,n)},e.prototype.renderChildren=function(t,e,n){return this.layout.render(t,e,n)},e.prototype.add=function(){for(var t=this,e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];n.forEach(function(e){e&&(Array.isArray(e)?e.forEach(function(e){return t.add(e)}):"string"==typeof e?(t.trimWhitespace&&(e=w.innerTextTrim(e)),e&&t.addText(e)):e.isComponent?t.items.push(e):t.add($.create(e,t.itemDefaults)))})},e.prototype.addText=function(t){this.plainText||t.indexOf("{")==-1||t.indexOf("}")==-1?this.items.push($.create(j,{text:t})):this.items.push($.create(_,{text:{tpl:t}}))},e.prototype.find=function(t,e){if(e||(e={}),!t||!this.items)return[];var n=t;"string"==typeof t&&(t=function(t){return t.componentAlias==n}),t.isComponentType&&(t=function(t){return t instanceof n});for(var r=[],o=0;o<this.items.length;o++){var i=this.items[o];if(i.initialized||i.init(),t(i)&&(r.push(i),e.first))break;i.find&&r.push.apply(r,i.find(t,e))}return r},e.prototype.findFirst=function(t,e){return this.find(t,k({},e,{first:!0}))[0]},e}($);R.prototype.trimWhitespace=!0,R.prototype.plainText=!0,R.prototype.styled=!1,$.alias("pure-container",R);var K=function(t){function e(){return C(this,e),E(this,t.apply(this,arguments))}return S(e,t),e.prototype.init=function(){t.prototype.init.call(this),this.storageBinding=b.Binding.get(this.storage.bind)},e.prototype.initInstance=function(t,e){e.store=new b.ExposedValueView({store:e.store,containerBinding:this.storageBinding,key:null,recordName:this.recordName,immutable:this.immutable}),e.setStore=function(t){e.store.setStore(t)}},e.prototype.declareData=function(){var e;(e=t.prototype.declareData).call.apply(e,[this,{storage:void 0,key:void 0}].concat(Array.prototype.slice.call(arguments)))},e.prototype.prepareData=function(e,n){var r=n.store,o=n.data;r.getKey()!==o.key&&(n.store=new b.ExposedValueView({store:r,containerBinding:this.storageBinding,key:o.key,recordName:this.recordName,immutable:this.immutable}),n.clearChildrenCache()),t.prototype.prepareData.call(this,e,n)},e}(R);K.prototype.recordName="$page",K.prototype.immutable=!1,$.alias("sandbox",K);var B=function(t){function e(){return C(this,e),E(this,t.apply(this,arguments))}return S(e,t),e.prototype.init=function(){t.prototype.init.call(this),this.binding=b.Binding.get(this.bind)},e.prototype.initInstance=function(t,e){e.store=new b.ZoomIntoPropertyView({store:e.store,binding:this.binding,rootName:this.rootName}),e.setStore=function(t){e.store.setStore(t)}},e}(R);B.prototype.bind="$page",B.prototype.rootName="$root",$.alias("rescope",B);var W,H=1,U=[],z={},q=null,Y=!1,G=function(){function t(){C(this,t)}return t.subscribe=function(t){var e=s();return z[e]=t,function(){a(e,t)}},t.onFocusOut=function(t,e){var n=w.isSelfOrDescendant(t,document.activeElement);return this.subscribe(function(r){n?w.isSelfOrDescendant(t,r)||(n=!1,e(r)):n=w.isSelfOrDescendant(t,document.activeElement)})},t.oneFocusOut=function(t,e){this.nudge();var n=this.subscribe(function(r){w.isSelfOrDescendant(t,r)||(e(r),n())});return n},t.nudge=function(){document.activeElement!=q&&(Y||(Y=!0,setTimeout(function(){Y=!1,document.activeElement!=q&&(q=document.activeElement,Object.keys(z).forEach(function(t){var e=z[t];e&&e(q)}))},0)))},t.focus=function(t){t.focus(),this.nudge()},t.focusFirst=function(t){var e=w.findFirst(t,w.isFocusable);return e&&this.focus(e),e},t.setInterval=function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t){clearInterval(W),W=setInterval(this.nudge,t)}),t}();G.setInterval(300);var Q=1,X=[],J={};window.addEventListener("resize",function(){return Z.notify()});var Z=function(){function t(){C(this,t)}return t.subscribe=function(t){var e=c();return J[e]=t,function(){p(e)}},t.notify=function(){Object.keys(J).forEach(function(t){var e=J[t];e&&e()})},t}(),tt=function(t){function e(){return C(this,e),E(this,t.apply(this,arguments))}return S(e,t),e.prototype.isSelected=function(t,e,n){return this.bind&&t.get(this.bind)===e},e.prototype.getIsSelectedDelegate=function(t){var e=this;return function(n,r){return e.isSelected(t,n,r)}},e.prototype.select=function(t,e,n){},e.prototype.declareData=function(){var t={$selection:{structured:!0}};return Object.assign.apply(Object,[t].concat(Array.prototype.slice.call(arguments)))},e.prototype.configureWidget=function(t){return(this.record||this.index)&&(t.$selection=Object.assign(t.$selection||{},{record:this.record,index:this.index})),this.declareData()},e.prototype.selectInstance=function(t){var e=t.store,n=t.data;if(!n.$selection)throw new Error("Selection model not properly configured. Using the selectInstance method without specified record and index bindings.");return this.select(e,n.$selection.record,n.$selection.index)},e.prototype.isInstanceSelected=function(t){var e=t.store,n=t.data;return n.$selection&&this.isSelected(e,n.$selection.record,n.$selection.index)},e}(O);tt.namespace="ui.selection.";var et=function(t){function e(){return C(this,e),E(this,t.apply(this,arguments))}return S(e,t),e.prototype.isSelected=function(t,e,n){return getIsSelectedDelegate(t)(e,n)},e.prototype.getIsSelectedDelegate=function(t){var e=this.bind&&t.get(this.bind);return function(t,n){return t===e}},e.prototype.select=function(t,e,n){this.bind&&t.set(this.bind,e)},e}(tt),nt=function(t){function e(){return C(this,e),E(this,t.apply(this,arguments))}return S(e,t),e.prototype.isSelected=function(t,e,n){return!1},e}(tt);nt.prototype.isDummy=!0,tt.factory=function(t){return"object"==("undefined"==typeof t?"undefined":D(t))?new et(t):new nt};var rt=function(t){function e(){return C(this,e),E(this,t.apply(this,arguments))}return S(e,t),e.prototype.select=function(t,e,n){var r=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=o.toggle;if(this.records&&this.records.bind){var s=t.get(this.records.bind),a=s[n];if(a!==e)throw new Error("Stale data.");var l=a[this.selectedField],u=!i||!l;if(l==u)return;var c=[].concat(s);u&&!i&&c.forEach(function(t,e){if(t[r.selectedField]){var n=Object.assign({},t);n[r.selectedField]=!1,c[e]=n}});var p=Object.assign({},a);p[this.selectedField]=u,c[n]=p,t.set(this.records.bind,c)}},e.prototype.isSelected=function(t,e,n){return e&&e[this.selectedField]},e}(tt);rt.prototype.selectedField="selected",rt.prototype.multiple=!1,tt.alias("property",rt);var ot=function(t){function e(){return C(this,e),E(this,t.apply(this,arguments))}return S(e,t),e.prototype.init=function(){t.prototype.init.call(this),this.bind&&!this.selection&&(this.selection={bind:this.bind}),this.selection||(this.selection={}),Array.isArray(this.keyFields)&&(this.keyField=!1),this.initialized=!0},e.prototype.getKey=function(t){if(null!=this.key)return this.key;if(!t)return null;if(this.keyField)return t[this.keyField];var e={};return this.keyFields.forEach(function(n){e[n]=t[n]}),e},e.prototype.areKeysEqual=function(t,e){return this.keyField?t===e&&null!=t:!(!t||!e)&&!this.keyFields.some(function(n){return t[n]!==e[n]})},e.prototype.declareData=function(){var e;return(e=t.prototype.declareData).call.apply(e,[this,{$selection:{structured:!0}}].concat(Array.prototype.slice.call(arguments)));
},e.prototype.configureWidget=function(e){return this.initialized||this.init(),e.$selection=Object.assign(e.$selection||{},{keys:this.selection}),t.prototype.configureWidget.call(this,e)},e.prototype.select=function(t,e,n){var r=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=o.toggle;if(!this.selection.bind)return!1;var s=this.getKey(e),a=t.get(this.selection.bind);if(this.multiple){if("array"==this.storage){var l=Array.isArray(a)&&a.some(function(t){return r.areKeysEqual(t,s)});i?l?t.set(this.selection.bind,a.filter(function(t){return!r.areKeysEqual(t,s)})):t.set(this.selection.bind,[].concat(a||[],[s])):t.set(this.selection.bind,[s])}else if("hash"==this.storage){var u=Object.assign({},a);u[s]=!0,t.set(this.selection.bind,u)}}else i?this.areKeysEqual(a,s)&&t.delete(this.selection.bind):t.set(this.selection.bind,s)},e.prototype.getIsSelectedDelegate=function(t){var e=this;if(!this.selection.bind)return function(){return!1};var n=t.get(this.selection.bind);return this.multiple?"array"==this.storage?(n=n||[],function(t,r){return n.some(function(n){return e.areKeysEqual(e.getKey(t),n)})}):(n=n||{},function(t,r){return n[e.getKey(t)]}):function(t,r){return e.areKeysEqual(n,e.getKey(t))}},e.prototype.isSelected=function(t,e,n){return this.getIsSelectedDelegate(t)(e,n)},e}(tt);ot.prototype.multiple=!1,ot.prototype.keyField="id",ot.prototype.storage="array",tt.alias("key",ot);var it=function(t){function e(){return C(this,e),E(this,t.apply(this,arguments))}return S(e,t),e.prototype.checkVisible=function(t){var e=this;return!!t.visible&&(!t.widget.layout||!t.widget.layout.useParentLayout||Array.isArray(t.children)&&t.children.some(function(t){return e.checkVisible(t)}))},e.prototype.explore=function(t,e,n){e.children=[];for(var r=!e.shouldUpdate&&null!=e.cached.children,o=0;o<n.length;o++){var i=e.getChild(t,n[o]);if(i.explore(t),this.checkVisible(i)){r&&e.cached.children[e.children.length]!==i&&(r=!1),e.children.push(i);break}}r&&e.children.length==e.cached.children.length||(e.shouldUpdate=!0)},e}(L);L.alias("firstvisiblechild",it);var st=function(t){function e(){return C(this,e),E(this,t.apply(this,arguments))}return S(e,t),e.prototype.render=function(t,e,n){var r=[];return e.children.forEach(function(e){var n=e.render(t);e.widget.layout&&e.widget.layout.useParentLayout&&Array.isArray(n.content)?n.content.forEach(function(t){r.push(t)}):r.push(n)}),r},e}(L);st.prototype.useParentLayout=!0,L.alias("parent",st);var at=function(t){function e(){return C(this,e),E(this,t.apply(this,arguments))}return S(e,t),e.prototype.render=function(t,e,n){var r=[],o=e.children,s=this.CSS,a=this.baseClass;return o.forEach(function(e,n){var o=e.render(t);o&&(e.widget.layout&&e.widget.layout.useParentLayout&&Array.isArray(o.content)?o.content.forEach(function(t,e){r.push(P.createElement("tr",{key:n+"-"+e},P.createElement("td",{className:s.element(a,"label")},i(t.label)),P.createElement("td",{className:s.element(a,"field")},h(t))))}):r.push(P.createElement("tr",{key:n},P.createElement("td",{className:s.element(a,"label")},i(o.label)),P.createElement("td",{className:s.element(a,"field")},h(o)))))}),P.createElement("table",{key:n,className:s.block(a,this.mod)},P.createElement("tbody",null,r))},e}(L);at.prototype.baseClass="labelsleftlayout",L.alias("labels-left",at);var lt=function(t){function e(){return C(this,e),E(this,t.apply(this,arguments))}return S(e,t),e.prototype.render=function(t,e,n){var r=[],o=[],s=e.children,a=this.CSS,l=this.baseClass;return s.forEach(function(e,n){var s=e.render(t);e.widget.layout&&e.widget.layout.useParentLayout&&Array.isArray(s.content)?s.content.forEach(function(t,e){r.push(P.createElement("td",{key:n+"-"+e,className:a.element(l,"label")},i(t.label))),o.push(P.createElement("td",{key:n+"-"+e,className:a.element(l,"field")},d(t)))}):(r.push(P.createElement("td",{key:n,className:a.element(l,"label")},i(s.label))),o.push(P.createElement("td",{key:n,className:a.element(l,"field")},d(s))))}),P.createElement("table",{key:n,className:a.block(l,this.mod)},P.createElement("tbody",null,P.createElement("tr",null,r),P.createElement("tr",null,o)))},e}(L);lt.prototype.baseClass="labelstoplayout",L.alias("labels-top",lt);var ut=function(t){function e(){return C(this,e),E(this,t.apply(this,arguments))}return S(e,t),e.prototype.init=function(){t.prototype.init.call(this),this.putInto=this.name},e}(R);ut.prototype.name="body",ut.prototype.isContent=!0,$.alias("content",ut);var ct=function(t){function e(){return C(this,e),E(this,t.apply(this,arguments))}return S(e,t),e.prototype.declareData=function(){var e;(e=t.prototype.declareData).call.apply(e,[this].concat(Array.prototype.slice.call(arguments),[{name:void 0}]))},e.prototype.explore=function(e,n,r){var o=this;n.content=null;var i=e.content&&e.content[r.name];i?this.setContent(e,n,i):(e.contentPlaceholder||(e.contentPlaceholder={}),e.contentPlaceholder[r.name]=function(t){o.setContent(e,n,t)}),t.prototype.explore.call(this,e,n)},e.prototype.prepare=function(e,n){n.content?n.content.shouldUpdate&&(n.shouldUpdate=!0):t.prototype.prepare.call(this,e,n)},e.prototype.setContent=function(t,e,n){e.content=n,n.pure||(e.pure=!1),n.shouldUpdate&&(e.shouldUpdate=!0)},e.prototype.cleanup=function(e,n){n.content||t.prototype.cleanup.call(this,e,n)},e.prototype.render=function(e,n,r){var o=n.content;if(o){o.shouldRenderContent=!0;var i=o.render(e);return o.shouldRenderContent=!1,i}return t.prototype.render.call(this,e,n,r)},e}(R);ct.prototype.name="body",$.alias("content-placeholder",ct);var pt=1e3,ht=function(){function t(e,n){C(this,t),this.widget=e,this.key=n,this.id=String(++pt)}return t.prototype.setStore=function(t){this.store=t},t.prototype.init=function(t){if(this.widget.initialized||(this.widget.init(),this.widget.initialized=!0),this.cached={},this.dataSelector||(this.widget.selector.init(this.store),this.dataSelector=this.widget.selector.create()),this.widget.controller&&(this.controller=T.create(this.widget.controller,{widget:this.widget,instance:this,store:this.store})),this.widget.helpers){this.helpers={};for(var e in this.widget.helpers){var n=this.widget.helpers[e];if(n){var r=this.getChild(t,n,"helper-"+e);this.helpers[e]=r}}}if(this.widget.components){this.components={};for(var e in this.widget.components){var o=this.widget.components[e];if(o){var r=this.getChild(t,o,"helper-"+e);this.components[e]=r}}}this.widget.initInstance(t,this),this.widget.initState(t,this),this.initialized=!0},t.prototype.explore=function(t){this.initialized||this.init(t);var e=this.dataSelector(this.store.getData());if(this.visible=this.widget.checkVisible(t,this,e),!this.visible)return delete this.instanceCache,!1;this.instanceCache&&this.instanceCache.mark();var n=t.controller;if(this.parentOptions=t.parentOptions,!this.controller&&t.controller&&(this.controller=t.controller),this.controller&&(this.widget.controller&&this.controller.prepare(t),t.controller=this.controller),this.pure=this.widget.pure,this.rawData=e,this.shouldUpdate=this.rawData!==this.cached.rawData||this.cached.state!==this.state||this.cached.widgetVersion!==this.widget.version||this.cached.globalCacheIdentifier!==w.GlobalCacheIdentifier.get(),this.widget.memoize||(this.shouldUpdate=!0),this.shouldUpdate&&(this.data=k({},this.rawData),this.widget.prepareData(t,this),w.Debug.log(w.processDataFlag,this.widget)),this.helpers)for(var r in this.helpers)this.helpers[r].explore(t);if(this.widget.explore(t,this,e),this.widget.onExplore&&this.widget.onExplore(t,this),this.widget.isContent){if(t.contentPlaceholder){var o=t.contentPlaceholder[this.widget.putInto];o&&o(this)}t.content||(t.content={}),t.content[this.widget.putInto]=this}if(this.widget.outerLayout){this.outerLayout=this.parent.getChild(t,this.widget.outerLayout,null,this.store),this.shouldRenderContent=!1,t.content||(t.content={});var i=t.content.body;t.content.body=this,this.outerLayout.explore(t),this.outerLayout.shouldUpdate&&(this.shouldUpdate=!0),t.content.body=i}return t.controller=n,this.shouldUpdate&&(this.parent.shouldUpdate=!0),this.pure||(this.parent.pure=!1),!0},t.prototype.prepare=function(t){if(this.visible){if(this.shouldUpdate||!this.pure){if(this.helpers)for(var e in this.helpers){var n=this.helpers[e];n.prepare(t),n.shouldUpdate&&(this.shouldUpdate=!0)}w.Debug.log(w.prepareFlag,this.widget),this.widget.prepare(t,this),this.shouldUpdate&&(this.parent.shouldUpdate=!0)}this.shouldUpdate&&w.Debug.log(w.shouldUpdateFlag,this.widget,this.shouldUpdate),this.outerLayout&&this.widget.outerLayout&&this.outerLayout.prepare(t)}},t.prototype.render=function(t,e){if(this.visible&&(!this.widget.isContent||this.shouldRenderContent)){if(this.outerLayout&&this.widget.outerLayout&&!this.shouldRenderContent)return this.outerLayout.render(t,e);this.cached.rawData=this.rawData,this.cached.state=this.state,this.cached.widgetVersion=this.widget.version,this.cached.visible=!0,this.cached.globalCacheIdentifier=w.GlobalCacheIdentifier.get();var n=this.widget.memoize&&this.shouldUpdate===!1&&this.cached.vdom?this.cached.vdom:y(this.widget.render(t,this,(null!=e?e+"-":"")+this.widget.widgetId));return this.shouldUpdate&&w.Debug.log(w.renderFlag,this.widget,(null!=e?e+"-":"")+this.widget.widgetId),this.widget.memoize&&(this.cached.vdom=n),n}},t.prototype.cleanup=function(t){if(this.visible&&(this.outerLayout&&(this.widget.outerLayout?this.outerLayout.cleanup(t):delete this.outerLayout),!this.pure||this.shouldUpdate)){if(w.Debug.log(w.cleanupFlag,this.widget),this.components)for(var e in this.components)this.components[e].cleanup(t);if(this.controller&&this.controller.cleanup(t),this.widget.cleanup(t,this),this.helpers)for(var e in this.helpers)this.helpers[e].cleanup(t);this.instanceCache&&this.instanceCache.sweep()}},t.prototype.setState=function(t){var e=this.state;if(this.state)for(var n in t)if(this.state[n]!==t[n]){e=!1;break}e||(this.cached.state=this.state,this.state=Object.assign({},this.state,t),this.store.notify())},t.prototype.set=function(t,e){var n=this.widget[t];if(n&&"object"==("undefined"==typeof n?"undefined":D(n)))if(n.set){if("function"==typeof n.set)return n.set(e,this),!0;if("string"==typeof n.set)return this.controller[n.set](e,this),!0}else{if(n.action){var r=n.action(e,this);return this.store.dispatch(r),!0}if(n.bind)return this.store.set(n.bind,e),!0}return!1},t.prototype.replaceState=function(t){this.cached.state=this.state,this.state=t,this.store.notify()},t.prototype.getInstanceCache=function(){return this.instanceCache||(this.instanceCache=new dt(this)),this.instanceCache},t.prototype.clearChildrenCache=function(){delete this.instanceCache},t.prototype.getChild=function(t,e,n,r){return this.getInstanceCache().getChild(e,r||this.store,n)},t.prototype.prepareRenderCleanupChild=function(t,e,n,r){return t.prepareRenderCleanup(e||this.store,r,n,this)},t}(),dt=function(){function t(e){C(this,t),this.children={},this.parent=e,this.marked={}}return t.prototype.getChild=function(t,e,n){var r=(null!=n?n+"-":"")+t.widgetId,o=this.children[r];return o||(o=new ht(t,r),o.parent=this.parent,this.children[r]=o),o.store!=e&&o.setStore(e),this.marked[r]=o,o},t.prototype.mark=function(){this.marked={}},t.prototype.sweep=function(){this.children=this.marked},t}(),ft=function(){function t(){C(this,t)}return t.resolve=function(t){return t.replace("~/",this.base)},t.absolute=function(t){return t.replace("~/",this.absoluteBase)},t.unresolve=function(t){if(0==t.indexOf("~/"))return t;var e=this.absoluteBase||"";return 0==t.indexOf(e)?"~/"+t.substring(e.length):"~/"+t.substring(this.base.length)},t.getAbsoluteBase=function(){return this.absoluteBase},t.isLocal=function(t){var e=this.getAbsoluteBase();return 0==t.indexOf(e)||0==t.indexOf(this.base)},t.setBase=function(t){t&&"/"==t[t.length-1]||(t+="/"),this.base=t,"undefined"!=typeof window&&(this.absoluteBase=window.location.protocol+"//"+window.location.host+this.base)},t.getOrigin=function(){return"undefined"==typeof window?"":window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")},t.getBaseFromScriptSrc=function(t,e){e instanceof RegExp||(e=g(e));var n=t.search(e);if(n==-1)return!1;var r=this.getOrigin();return t.substring(0==t.indexOf(r)?r.length:0,n)},t.setBaseFromScript=function(t){var e,n=document.getElementsByTagName("script");t instanceof RegExp||(t=g(t));for(var r=0;r<n.length;r++)if(e=this.getBaseFromScriptSrc(n[r].src,t))return void this.setBase(e);throw new Error("Could not resolve url base from script matching '"+t+"'.")},t}();ft.setBase("/");var yt=function(){function t(){C(this,t)}return t.connect=function(t,e){var n=this;this.store=t,this.bind=e,this.updateStore(),window.onpopstate=function(){n.updateStore()}},t.pushState=function(t,e,n){if(window.history.pushState)return n=ft.resolve(n),window.history.pushState(t,e,n),this.updateStore(n),!0},t.replaceState=function(t,e,n){if(window.history.replaceState)return n=ft.resolve(n),window.history.replaceState(t,e,n),this.updateStore(n),!0},t.updateStore=function(t){var e=ft.unresolve(t||document.location.href),n=e.indexOf("#");n!=-1&&(e=e.substring(0,n)),this.store.set(this.bind,e)},t}();e.Component=O,e.Controller=T,e.VDOM=P,e.Widget=$,e.contentAppend=r,e.getContentArray=o,e.getContent=i,e.PureContainer=R,e.Sandbox=K,e.Rescope=B,e.CSS=A,e.CSSHelper=V,e.FocusManager=G,e.oneFocusOut=l,e.offFocusOut=u,e.ResizeManager=Z,e.Selection=tt,e.PropertySelection=rt,e.KeySelection=ot,e.Layout=L,e.FirstVisibleChildLayout=it,e.UseParentLayout=st,e.LabelsLeftLayout=at,e.LabelsTopLayout=lt,e.Content=ut,e.ContentPlaceholder=ct,e.contentSandbox=f,e.startAppLoop=m,e.History=yt,e.Url=ft},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,"a",function(){return i});var o={},i=function(){function t(e){r(this,t),this.path=e,this.parts=e.split(".");for(var n="return (x",o="x",i=0;i<this.parts.length;i++)o+=this.parts[i][0]>="0"&&this.parts[i][0]<="9"?"["+this.parts[i]+"]":"."+this.parts[i],n+=" && "+o;n+=")",this.value=new Function("x",n)}return t.prototype.set=function(t,e){var n=this.value(t);if(n===e)return t;for(var r=Object.assign({},t),o=r,i=0;i<this.parts.length;i++){var s=this.parts[i],a=i==this.parts.length-1?e:Object.assign({},o[s]);o[s]=a,o=a}return r},t.prototype.delete=function(t){for(var e,n=Object.assign({},t),r=n,o=0;o<this.parts.length-1;o++){e=this.parts[o];var i=Object.assign({},r[e]);r[e]=i,r=i}return e=this.parts[this.parts.length-1],r.hasOwnProperty(e)?(delete r[e],n):t},t.get=function(e){if("string"==typeof e){var n=o[e];return n?n:(n=new t(e),o[e]=n,n)}return e},t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r="CX-REPLACE-STATE"},function(t,e,n){"use strict";function r(t){if(!n.i(i.a)(t)||h.call(t)!=s)return!1;var e=n.i(o.a)(t);if(null===e)return!0;var r=c.call(e,"constructor")&&e.constructor;return"function"==typeof r&&r instanceof r&&u.call(r)==p}var o=n(57),i=n(59),s="[object Object]",a=Function.prototype,l=Object.prototype,u=a.toString,c=l.hasOwnProperty,p=u.call(Object),h=l.toString;e.a=r},function(t,e,n){"use strict";function r(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];if(0===e.length)return function(t){return t};if(1===e.length)return e[0];var r=e[e.length-1],o=e.slice(0,-1);return function(){return o.reduceRight(function(t,e){return e(t)},r.apply(void 0,arguments))}}e.a=r},function(t,e,n){"use strict";function r(t,e,i){function u(){b===v&&(b=v.slice())}function c(){return g}function p(t){if("function"!=typeof t)throw new Error("Expected listener to be a function.");var e=!0;return u(),b.push(t),function(){if(e){e=!1,u();var n=b.indexOf(t);b.splice(n,1)}}}function h(t){if(!n.i(o.a)(t))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if("undefined"==typeof t.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(w)throw new Error("Reducers may not dispatch actions.");try{w=!0,g=m(g,t)}finally{w=!1}for(var e=v=b,r=0;r<e.length;r++)e[r]();return t}function d(t){if("function"!=typeof t)throw new Error("Expected the nextReducer to be a function.");m=t,h({type:l.INIT})}function f(){var t,e=p;return t={subscribe:function(t){function n(){t.next&&t.next(c())}if("object"!==("undefined"==typeof t?"undefined":a(t)))throw new TypeError("Expected the observer to be an object.");n();var r=e(n);return{unsubscribe:r}}},t[s.a]=function(){return this},t}var y;if("function"==typeof e&&"undefined"==typeof i&&(i=e,e=void 0),"undefined"!=typeof i){if("function"!=typeof i)throw new Error("Expected the enhancer to be a function.");return i(r)(t,e)}if("function"!=typeof t)throw new Error("Expected the reducer to be a function.");var m=t,g=e,v=[],b=v,w=!1;return h({type:l.INIT}),y={dispatch:h,subscribe:p,getState:c,replaceReducer:d},y[s.a]=f,y}var o=n(17),i=n(71),s=n.n(i);n.d(e,"a",function(){return l}),e.b=r;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l={INIT:"@@redux/INIT"}},function(t,e,n){"use strict"},function(t,e){"use strict";function n(t){if("string"!=typeof t)return t;for(var e={Y:0,y:0,M:0,D:0,d:0,H:0,h:0,m:0,i:0,S:0,s:0,A:0,a:0,P:0,p:0,N:0,n:0,T:0,t:0,U:0,u:0,Z:0,z:0},n=0;n<t.length;n++)e[t[n]]++;var r={},o=e.Y+e.y;o>2?r.year="numeric":o>0&&(r.year="2-digit");var i=e.M;i>3?r.month="long":i>2?r.month="short":i>1?r.month="2-digit":i>0&&(r.month="numeric");var s=e.d;s>1?r.day="2-digit":s>0&&(r.day="numeric");var a=e.D;a>3&&(r.weekday="long"),a>1?r.weekday="short":a>0&&(r.weekday="narrow");var l=e.H+e.h;l>1?r.hour="2-digit":l>0&&(r.hour="numeric");var u=e.m;u>1?r.minute="2-digit":u>0&&(r.minute="numeric");var c=e.S+e.s;c>1?r.second="2-digit":c>0&&(r.second="numeric");var p=e.T+e.t;p>3?r.timeZoneName="long":p>0&&(r.timeZoneName="short");var h=e.A+e.a+e.P+e.p;h&&(r.hour12=!0);var d=e.N+e.n;d&&(r.hour12=!1);var f=e.U+e.u+e.Z+e.z;return f>0&&(r.timeZone="UTC"),r}function r(t){for(var e,n,r,o=[],i=[],s="",a=0,l=0;l<=t.length;l++)l==t.length?e="end":(n=t[l],e=n.match(/[a-z]/i)?"alpha":n.match(/[0-9]/)?"number":"sep"),e!=s&&(l>a&&(r=t.substring(a,l),"alpha"==s?i.push(r.toLowerCase()):"number"==s&&o.push(parseInt(r))),a=l,s=e);return{alphas:i,numbers:o}}var o=function(t){this.cultures=t};o.prototype.load=function(){var t=new Intl.NumberFormat(this.cultures),e=t.format("0.1");this.decimalSeparator=e[1],this.decimalSepRegex=new RegExp("\\"+this.decimalSeparator,"g")},o.prototype.parse=function(t){var e=this;if("string"!=typeof t||!t)return null;this.decimalSeparator||this.load();for(var n="",r=0;r<t.length;r++)(t[r]==e.decimalSeparator||t[r]>="0"&&t[r]<="9"||"-"==t[r])&&(n+=t[r]);var o=n.replace(this.decimalSepRegex,".");return parseFloat(o)},o.prototype.format=function(t,e){return this.getFormatter(e).format(t)},o.prototype.getFormatter=function(t){return new Intl.NumberFormat(this.cultures,t)};var i=["narrow","short","long"],s=["narrow","short","long"],a=function(t){this.cultures=t};a.prototype.format=function(t,e){return this.getFormatter(e).format(t)},a.prototype.getFormatter=function(t){return new Intl.DateTimeFormat(this.cultures,n(t))},a.prototype.getWeekdayNames=function(t){return this.load(),this.weekdayNames.map(function(e){return e[t]})},a.prototype.getMonthNames=function(t){return this.load(),this.monthNames.map(function(e){return e[t]})},a.prototype.parse=function(t,e){var n=this;void 0===e&&(e={useCurrentDateForDefaults:!1});var o=e.useCurrentDateForDefaults;if("string"!=typeof t||!t)return null;this.load();var i=r(t),s={year:void 0,month:void 0,date:void 0,hour:0,minute:0,second:0};return i.alphas.forEach(function(t){for(var e=0;e<12;e++)for(var r in n.monthNames[e])if(t==n.monthNames[e][r].toLowerCase()){s.month=e+1,e=12;break}}),i.numbers.forEach(function(t){if(t>=1970)s.year=t;else if(t>12)s.date=t;else for(var e=0;e<n.dateParts.length;e++){var r=n.dateParts[e];if(void 0==s[r]){s[r]=t;break}}}),o&&(void 0==s.date&&(void 0==s.month?s.date=(new Date).getDate():s.date=1),void 0==s.month&&(void 0==s.year?s.month=(new Date).getMonth()+1:s.month=1),void 0==s.year&&(s.year=(new Date).getFullYear())),s.year>=1970&&s.date>=1&&s.date<=31&&s.month>=1&&s.month<=12?new Date(s.year,s.month-1,s.date,s.hour,s.minute,s.second):Number.NaN},a.prototype.load=function(){var t=this;if(!this.loaded){for(var e,n=[],o=0;o<12;o++)n.push({});s.forEach(function(r){var o=new Intl.DateTimeFormat(t.cultures,{month:r});for(e=0;e<12;e++)n[e][r]=o.format(new Date(2e3,e,1))}),this.monthNames=n;var a=[];for(e=0;e<7;e++)a.push({});i.forEach(function(n){var r=new Intl.DateTimeFormat(t.cultures,{weekday:n});for(e=0;e<7;e++){var o=new Date(2e3,0,e);a[o.getDay()][n]=r.format(o)}}),this.weekdayNames=a;var l=new Date(2077,10,22),u=new Intl.DateTimeFormat(this.cultures).format(l),c=u.replace(2077,"year").replace(11,"month").replace(22,"date");this.dateParts=r(c).alphas,this.loaded=!0}},e.NumberCulture=o,e.weekdayFormats=i,e.monthFormats=s,e.DateTimeCulture=a},function(t,e,n){(function(e){(function(){function e(t){this.tokens=[],this.tokens.links={},this.options=t||c.defaults,this.rules=p.normal,this.options.gfm&&(this.options.tables?this.rules=p.tables:this.rules=p.gfm)}function n(t,e){if(this.options=e||c.defaults,this.links=t,this.rules=h.normal,this.renderer=this.options.renderer||new r,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.gfm?this.options.breaks?this.rules=h.breaks:this.rules=h.gfm:this.options.pedantic&&(this.rules=h.pedantic)}function r(t){this.options=t||{}}function o(t){this.tokens=[],this.token=null,this.options=t||c.defaults,this.options.renderer=this.options.renderer||new r,this.renderer=this.options.renderer,this.renderer.options=this.options}function i(t,e){return t.replace(e?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function s(t){return t.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/g,function(t,e){return e=e.toLowerCase(),"colon"===e?":":"#"===e.charAt(0)?"x"===e.charAt(1)?String.fromCharCode(parseInt(e.substring(2),16)):String.fromCharCode(+e.substring(1)):""})}function a(t,e){return t=t.source,e=e||"",function n(r,o){return r?(o=o.source||o,o=o.replace(/(^|[^\[])\^/g,"$1"),t=t.replace(r,o),n):new RegExp(t,e)}}function l(){}function u(t){for(var e,n,r=1;r<arguments.length;r++){e=arguments[r];for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t}function c(t,n,r){if(r||"function"==typeof n){r||(r=n,n=null),n=u({},c.defaults,n||{});var s,a,l=n.highlight,p=0;try{s=e.lex(t,n)}catch(t){return r(t)}a=s.length;var h=function(t){if(t)return n.highlight=l,r(t);var e;try{e=o.parse(s,n)}catch(e){t=e}return n.highlight=l,t?r(t):r(null,e)};if(!l||l.length<3)return h();if(delete n.highlight,!a)return h();for(;p<s.length;p++)!function(t){return"code"!==t.type?--a||h():l(t.text,t.lang,function(e,n){return e?h(e):null==n||n===t.text?--a||h():(t.text=n,t.escaped=!0,void(--a||h()))})}(s[p])}else try{return n&&(n=u({},c.defaults,n)),o.parse(e.lex(t,n),n)}catch(t){if(t.message+="\nPlease report this to https://github.com/chjj/marked.",(n||c.defaults).silent)return"<p>An error occured:</p><pre>"+i(t.message+"",!0)+"</pre>";throw t}}var p={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:l,hr:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,nptable:l,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,blockquote:/^( *>[^\n]+(\n(?!def)[^\n]+)*\n*)+/,list:/^( *)(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment *(?:\n|\s*$)|closed *(?:\n{2,}|\s*$)|closing *(?:\n{2,}|\s*$))/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,table:l,paragraph:/^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n*/,text:/^[^\n]+/};p.bullet=/(?:[*+-]|\d+\.)/,p.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/,p.item=a(p.item,"gm")(/bull/g,p.bullet)(),p.list=a(p.list)(/bull/g,p.bullet)("hr","\\n+(?=\\1?(?:[-*_] *){3,}(?:\\n+|$))")("def","\\n+(?="+p.def.source+")")(),p.blockquote=a(p.blockquote)("def",p.def)(),p._tag="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|[^\\w\\s@]*@)\\b",p.html=a(p.html)("comment",/<!--[\s\S]*?-->/)("closed",/<(tag)[\s\S]+?<\/\1>/)("closing",/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/)(/tag/g,p._tag)(),p.paragraph=a(p.paragraph)("hr",p.hr)("heading",p.heading)("lheading",p.lheading)("blockquote",p.blockquote)("tag","<"+p._tag)("def",p.def)(),p.normal=u({},p),p.gfm=u({},p.normal,{fences:/^ *(`{3,}|~{3,})[ \.]*(\S+)? *\n([\s\S]*?)\s*\1 *(?:\n+|$)/,paragraph:/^/,heading:/^ *(#{1,6}) +([^\n]+?) *#* *(?:\n+|$)/}),p.gfm.paragraph=a(p.paragraph)("(?!","(?!"+p.gfm.fences.source.replace("\\1","\\2")+"|"+p.list.source.replace("\\1","\\3")+"|")(),p.tables=u({},p.gfm,{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/}),e.rules=p,e.lex=function(t,n){var r=new e(n);return r.lex(t)},e.prototype.lex=function(t){return t=t.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(t,!0)},e.prototype.token=function(t,e,n){for(var r,o,i,s,a,l,u,c,h,t=t.replace(/^ +$/gm,"");t;)if((i=this.rules.newline.exec(t))&&(t=t.substring(i[0].length),i[0].length>1&&this.tokens.push({type:"space"})),i=this.rules.code.exec(t))t=t.substring(i[0].length),i=i[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?i:i.replace(/\n+$/,"")});else if(i=this.rules.fences.exec(t))t=t.substring(i[0].length),this.tokens.push({type:"code",lang:i[2],text:i[3]||""});else if(i=this.rules.heading.exec(t))t=t.substring(i[0].length),this.tokens.push({type:"heading",depth:i[1].length,text:i[2]});else if(e&&(i=this.rules.nptable.exec(t))){for(t=t.substring(i[0].length),l={type:"table",header:i[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:i[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:i[3].replace(/\n$/,"").split("\n")},c=0;c<l.align.length;c++)/^ *-+: *$/.test(l.align[c])?l.align[c]="right":/^ *:-+: *$/.test(l.align[c])?l.align[c]="center":/^ *:-+ *$/.test(l.align[c])?l.align[c]="left":l.align[c]=null;for(c=0;c<l.cells.length;c++)l.cells[c]=l.cells[c].split(/ *\| */);this.tokens.push(l)}else if(i=this.rules.lheading.exec(t))t=t.substring(i[0].length),this.tokens.push({type:"heading",depth:"="===i[2]?1:2,text:i[1]});else if(i=this.rules.hr.exec(t))t=t.substring(i[0].length),this.tokens.push({type:"hr"});else if(i=this.rules.blockquote.exec(t))t=t.substring(i[0].length),this.tokens.push({type:"blockquote_start"}),i=i[0].replace(/^ *> ?/gm,""),this.token(i,e,!0),this.tokens.push({type:"blockquote_end"});else if(i=this.rules.list.exec(t)){for(t=t.substring(i[0].length),s=i[2],this.tokens.push({type:"list_start",ordered:s.length>1}),i=i[0].match(this.rules.item),r=!1,h=i.length,c=0;c<h;c++)l=i[c],u=l.length,l=l.replace(/^ *([*+-]|\d+\.) +/,""),~l.indexOf("\n ")&&(u-=l.length,l=this.options.pedantic?l.replace(/^ {1,4}/gm,""):l.replace(new RegExp("^ {1,"+u+"}","gm"),"")),this.options.smartLists&&c!==h-1&&(a=p.bullet.exec(i[c+1])[0],s===a||s.length>1&&a.length>1||(t=i.slice(c+1).join("\n")+t,c=h-1)),o=r||/\n\n(?!\s*$)/.test(l),c!==h-1&&(r="\n"===l.charAt(l.length-1),o||(o=r)),this.tokens.push({type:o?"loose_item_start":"list_item_start"}),this.token(l,!1,n),this.tokens.push({type:"list_item_end"});this.tokens.push({type:"list_end"})}else if(i=this.rules.html.exec(t))t=t.substring(i[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&("pre"===i[1]||"script"===i[1]||"style"===i[1]),text:i[0]});else if(!n&&e&&(i=this.rules.def.exec(t)))t=t.substring(i[0].length),this.tokens.links[i[1].toLowerCase()]={href:i[2],title:i[3]};else if(e&&(i=this.rules.table.exec(t))){for(t=t.substring(i[0].length),l={type:"table",header:i[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:i[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:i[3].replace(/(?: *\| *)?\n$/,"").split("\n")},c=0;c<l.align.length;c++)/^ *-+: *$/.test(l.align[c])?l.align[c]="right":/^ *:-+: *$/.test(l.align[c])?l.align[c]="center":/^ *:-+ *$/.test(l.align[c])?l.align[c]="left":l.align[c]=null;for(c=0;c<l.cells.length;c++)l.cells[c]=l.cells[c].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */);this.tokens.push(l)}else if(e&&(i=this.rules.paragraph.exec(t)))t=t.substring(i[0].length),this.tokens.push({type:"paragraph",text:"\n"===i[1].charAt(i[1].length-1)?i[1].slice(0,-1):i[1]});else if(i=this.rules.text.exec(t))t=t.substring(i[0].length),this.tokens.push({type:"text",text:i[0]});else if(t)throw new Error("Infinite loop on byte: "+t.charCodeAt(0));return this.tokens};var h={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ >]+(@|:\/)[^ >]+)>/,url:l,tag:/^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:[^_]|__)+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,code:/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:l,text:/^[\s\S]+?(?=[\\<!\[_*`]| {2,}\n|$)/};h._inside=/(?:\[[^\]]*\]|[^\[\]]|\](?=[^\[]*\]))*/,h._href=/\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/,h.link=a(h.link)("inside",h._inside)("href",h._href)(),h.reflink=a(h.reflink)("inside",h._inside)(),h.normal=u({},h),h.pedantic=u({},h.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/}),h.gfm=u({},h.normal,{escape:a(h.escape)("])","~|])")(),url:/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:a(h.text)("]|","~]|")("|","|https?://|")()}),h.breaks=u({},h.gfm,{br:a(h.br)("{2,}","*")(),text:a(h.gfm.text)("{2,}","*")()}),n.rules=h,n.output=function(t,e,r){var o=new n(e,r);return o.output(t)},n.prototype.output=function(t){for(var e,n,r,o,s="";t;)if(o=this.rules.escape.exec(t))t=t.substring(o[0].length),s+=o[1];else if(o=this.rules.autolink.exec(t))t=t.substring(o[0].length),"@"===o[2]?(n=":"===o[1].charAt(6)?this.mangle(o[1].substring(7)):this.mangle(o[1]),r=this.mangle("mailto:")+n):(n=i(o[1]),r=n),s+=this.renderer.link(r,null,n);else if(this.inLink||!(o=this.rules.url.exec(t))){if(o=this.rules.tag.exec(t))!this.inLink&&/^<a /i.test(o[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(o[0])&&(this.inLink=!1),t=t.substring(o[0].length),s+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(o[0]):i(o[0]):o[0];else if(o=this.rules.link.exec(t))t=t.substring(o[0].length),this.inLink=!0,s+=this.outputLink(o,{href:o[2],title:o[3]}),this.inLink=!1;else if((o=this.rules.reflink.exec(t))||(o=this.rules.nolink.exec(t))){if(t=t.substring(o[0].length),e=(o[2]||o[1]).replace(/\s+/g," "),e=this.links[e.toLowerCase()],!e||!e.href){s+=o[0].charAt(0),t=o[0].substring(1)+t;continue}this.inLink=!0,s+=this.outputLink(o,e),this.inLink=!1}else if(o=this.rules.strong.exec(t))t=t.substring(o[0].length),s+=this.renderer.strong(this.output(o[2]||o[1]));else if(o=this.rules.em.exec(t))t=t.substring(o[0].length),s+=this.renderer.em(this.output(o[2]||o[1]));else if(o=this.rules.code.exec(t))t=t.substring(o[0].length),s+=this.renderer.codespan(i(o[2],!0));else if(o=this.rules.br.exec(t))t=t.substring(o[0].length),s+=this.renderer.br();else if(o=this.rules.del.exec(t))t=t.substring(o[0].length),s+=this.renderer.del(this.output(o[1]));else if(o=this.rules.text.exec(t))t=t.substring(o[0].length),s+=this.renderer.text(i(this.smartypants(o[0])));else if(t)throw new Error("Infinite loop on byte: "+t.charCodeAt(0))}else t=t.substring(o[0].length),n=i(o[1]),r=n,s+=this.renderer.link(r,null,n);return s},n.prototype.outputLink=function(t,e){var n=i(e.href),r=e.title?i(e.title):null;
return"!"!==t[0].charAt(0)?this.renderer.link(n,r,this.output(t[1])):this.renderer.image(n,r,i(t[1]))},n.prototype.smartypants=function(t){return this.options.smartypants?t.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014\/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014\/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…"):t},n.prototype.mangle=function(t){if(!this.options.mangle)return t;for(var e,n="",r=t.length,o=0;o<r;o++)e=t.charCodeAt(o),Math.random()>.5&&(e="x"+e.toString(16)),n+="&#"+e+";";return n},r.prototype.code=function(t,e,n){if(this.options.highlight){var r=this.options.highlight(t,e);null!=r&&r!==t&&(n=!0,t=r)}return e?'<pre><code class="'+this.options.langPrefix+i(e,!0)+'">'+(n?t:i(t,!0))+"\n</code></pre>\n":"<pre><code>"+(n?t:i(t,!0))+"\n</code></pre>"},r.prototype.blockquote=function(t){return"<blockquote>\n"+t+"</blockquote>\n"},r.prototype.html=function(t){return t},r.prototype.heading=function(t,e,n){return"<h"+e+' id="'+this.options.headerPrefix+n.toLowerCase().replace(/[^\w]+/g,"-")+'">'+t+"</h"+e+">\n"},r.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},r.prototype.list=function(t,e){var n=e?"ol":"ul";return"<"+n+">\n"+t+"</"+n+">\n"},r.prototype.listitem=function(t){return"<li>"+t+"</li>\n"},r.prototype.paragraph=function(t){return"<p>"+t+"</p>\n"},r.prototype.table=function(t,e){return"<table>\n<thead>\n"+t+"</thead>\n<tbody>\n"+e+"</tbody>\n</table>\n"},r.prototype.tablerow=function(t){return"<tr>\n"+t+"</tr>\n"},r.prototype.tablecell=function(t,e){var n=e.header?"th":"td",r=e.align?"<"+n+' style="text-align:'+e.align+'">':"<"+n+">";return r+t+"</"+n+">\n"},r.prototype.strong=function(t){return"<strong>"+t+"</strong>"},r.prototype.em=function(t){return"<em>"+t+"</em>"},r.prototype.codespan=function(t){return"<code>"+t+"</code>"},r.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"},r.prototype.del=function(t){return"<del>"+t+"</del>"},r.prototype.link=function(t,e,n){if(this.options.sanitize){try{var r=decodeURIComponent(s(t)).replace(/[^\w:]/g,"").toLowerCase()}catch(t){return""}if(0===r.indexOf("javascript:")||0===r.indexOf("vbscript:"))return""}var o='<a href="'+t+'"';return e&&(o+=' title="'+e+'"'),o+=">"+n+"</a>"},r.prototype.image=function(t,e,n){var r='<img src="'+t+'" alt="'+n+'"';return e&&(r+=' title="'+e+'"'),r+=this.options.xhtml?"/>":">"},r.prototype.text=function(t){return t},o.parse=function(t,e,n){var r=new o(e,n);return r.parse(t)},o.prototype.parse=function(t){this.inline=new n(t.links,this.options,this.renderer),this.tokens=t.reverse();for(var e="";this.next();)e+=this.tok();return e},o.prototype.next=function(){return this.token=this.tokens.pop()},o.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},o.prototype.parseText=function(){for(var t=this.token.text;"text"===this.peek().type;)t+="\n"+this.next().text;return this.inline.output(t)},o.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,this.token.text);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":var t,e,n,r,o,i="",s="";for(n="",t=0;t<this.token.header.length;t++)r={header:!0,align:this.token.align[t]},n+=this.renderer.tablecell(this.inline.output(this.token.header[t]),{header:!0,align:this.token.align[t]});for(i+=this.renderer.tablerow(n),t=0;t<this.token.cells.length;t++){for(e=this.token.cells[t],n="",o=0;o<e.length;o++)n+=this.renderer.tablecell(this.inline.output(e[o]),{header:!1,align:this.token.align[o]});s+=this.renderer.tablerow(n)}return this.renderer.table(i,s);case"blockquote_start":for(var s="";"blockquote_end"!==this.next().type;)s+=this.tok();return this.renderer.blockquote(s);case"list_start":for(var s="",a=this.token.ordered;"list_end"!==this.next().type;)s+=this.tok();return this.renderer.list(s,a);case"list_item_start":for(var s="";"list_item_end"!==this.next().type;)s+="text"===this.token.type?this.parseText():this.tok();return this.renderer.listitem(s);case"loose_item_start":for(var s="";"list_item_end"!==this.next().type;)s+=this.tok();return this.renderer.listitem(s);case"html":var l=this.token.pre||this.options.pedantic?this.token.text:this.inline.output(this.token.text);return this.renderer.html(l);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText())}},l.exec=l,c.options=c.setOptions=function(t){return u(c.defaults,t),c},c.defaults={gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,sanitizer:null,mangle:!0,smartLists:!1,silent:!1,highlight:null,langPrefix:"lang-",smartypants:!1,headerPrefix:"",renderer:new r,xhtml:!1},c.Parser=o,c.parser=o.parse,c.Renderer=r,c.Lexer=e,c.lexer=e.lex,c.InlineLexer=n,c.inlineLexer=n.output,c.parse=c,t.exports=c}).call(function(){return this||("undefined"!=typeof window?window:e)}())}).call(e,n(25))},function(t,e){"use strict";function n(t){return function(e,n){return{displayName:t,props:e,children:n||[]}}}t.exports={Root:n("Root"),Concat:n("Concat"),Literal:n("Literal"),Splat:n("Splat"),Param:n("Param"),Optional:n("Optional")}},function(t,e,n){"use strict";function r(t){return o.forEach(function(e){if("undefined"==typeof t[e])throw new Error("No handler defined for "+e.displayName)}),{visit:function(t,e){return this.handlers[t.displayName].call(this,t,e)},handlers:t}}var o=Object.keys(n(23));t.exports=r},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";var r=n(32),o=n(33),i=n(60),s=n.n(i);e.a=[r.a,s.a,o.a]},function(t,e,n){"use strict";var r=n(6),o=n(37),i=n(12);e.a=n.i(r.b)({tdo:o.a,hash:n.i(i.a)("#"),search:n.i(i.a)({}),pages:n.i(i.a)({}),layout:n.i(i.a)({})})},function(t,e,n){"use strict";var r=n(1),o=(n.n(r),n(0)),i=(n.n(o),n(47)),s=n(51),a=n(49),l=n(42),u={$type:r.PureContainer,children:["\n        ",{$type:r.Repeater,records:{bind:"tdo.boards"},filter:function(t){return!t.deleted},jsxAttributes:["records","filter"],children:["\n            ",{$type:r.MenuItem,mod:{active:{expr:'{hash}=="#" + {$record.id}'},test:!0},jsxAttributes:["mod"],children:["\n                ",{$type:r.HtmlElement,tag:"a",href:{tpl:"#{$record.id}"},class:"cxm-menu-pad",className:{bind:"$record.headerClass"},style:{bind:"$record.headerStyle"},text:{bind:"$record.name"},jsxAttributes:["href","class","className","style","text"]},"\n            "]},"\n        "]},"\n        ",{$type:r.HtmlElement,tag:"a",href:"#",onClick:"addBoard",class:"cxm-menu-pad",jsxAttributes:["href","onClick","class"],children:["Add Board"]},"\n\n        ",{$type:r.HtmlElement,tag:"div",class:"spacer",visible:{expr:"{layout.mode}=='desktop'"},jsxAttributes:["class","visible"]},"\n        ",{$type:r.HtmlElement,tag:"hr",visible:{expr:"{layout.mode}=='phone'"},jsxAttributes:["visible"]},"\n    "]},c={$type:r.PureContainer,children:["\n        ",{$type:r.MenuItem,mod:{active:{expr:'{hash}=="#settings"'}},jsxAttributes:["mod"],children:["\n            ",{$type:r.HtmlElement,tag:"a",href:"#settings",class:"cxm-menu-pad",jsxAttributes:["href","class"],children:["\n                Settings\n            "]},"\n        "]},"\n\n        ",{$type:r.MenuItem,mod:{active:{expr:'{hash}=="#help"'}},jsxAttributes:["mod"],children:["\n            ",{$type:r.HtmlElement,tag:"a",href:"#help",class:"cxm-menu-pad",jsxAttributes:["href","class"],children:["\n                Help ",{$type:r.HtmlElement,tag:"code",children:["?"]},"\n            "]},"\n        "]},"\n\n        ",{$type:r.HtmlElement,tag:"div",class:"spacer",visible:{expr:"{layout.mode}=='desktop'"},jsxAttributes:["class","visible"]},"\n        ",{$type:r.HtmlElement,tag:"hr",visible:{expr:"{layout.mode}!='desktop'"},jsxAttributes:["visible"]},"\n\n        ",{$type:r.HtmlElement,tag:"a",href:"https://github.com/mstijak/tdo",class:"cxm-menu-pad",target:"_blank",jsxAttributes:["href","class","target"],children:["Report/Suggest"]},"\n        ",{$type:r.HtmlElement,tag:"a",href:"http://twitter.com/home?status="+encodeURIComponent("tdo - hackable todo list #todo https://goo.gl/rhkuYP"),class:"cxm-menu-pad",target:"_blank",jsxAttributes:["href","class","target"],children:["Tweet"]},"\n    "]};e.a={$type:r.HtmlElement,tag:"div",class:"cxb-layout",controller:l.a,jsxAttributes:["class","controller"],children:["\n        ",{$type:r.HtmlElement,tag:"style",innerHtml:{bind:"tdo.settings.css"},jsxAttributes:["innerHtml"]},"\n        ",{$type:r.Sandbox,key:{bind:"hash"},storage:{bind:"pages"},immutable:!0,jsxAttributes:["key","storage","immutable"],children:["\n            ",{$type:r.HtmlElement,tag:"header",class:"cxe-layout-header",jsxAttributes:["class"],children:["\n                ",{$type:r.HtmlElement,tag:"h1",children:["tdo"]},"\n                ",{$type:r.TextField,value:{bind:"search.query"},placeholder:"Search...",mod:"search",id:"search",autoFocus:!0,jsxAttributes:["value","placeholder","mod","id","autoFocus"]},"\n\n                ",{$type:r.Menu,horizontal:!0,jsxAttributes:["horizontal"],children:["\n                    ",{$type:u,visible:{expr:"{layout.mode}=='desktop' || {layout.mode}=='tablet'"},jsxAttributes:["visible"]},"\n                    ",{$type:c,visible:{expr:"{layout.mode}=='desktop'"},jsxAttributes:["visible"]},"\n                    ",{$type:r.MenuItem,visible:{expr:"{layout.mode}!='desktop'"},jsxAttributes:["visible"],children:["\n                        ",{$type:r.Submenu,style:"padding: 5px 10px;",jsxAttributes:["style"],children:["\n                            ☰\n                            ",{$type:r.Menu,putInto:"dropdown",jsxAttributes:["putInto"],children:["\n                                ",{$type:u,visible:{expr:"{layout.mode}=='phone'"},jsxAttributes:["visible"]},"\n                                ",{$type:c},"\n                            "]},"\n                        "]},"\n                    "]},"\n                "]},"\n            "]},"\n            ",{$type:r.HtmlElement,tag:"main",class:"cxe-layout-main",layout:o.FirstVisibleChildLayout,jsxAttributes:["class","layout"],children:["\n                ",{$type:r.Route,url:{bind:"hash"},route:"#settings",jsxAttributes:["url","route"],children:["\n                    ",{$type:s.a},"\n                "]},"\n                ",{$type:r.Route,url:{bind:"hash"},route:"#help",jsxAttributes:["url","route"],children:["\n                    ",{$type:a.a},"\n                "]},"\n                ",{$type:r.Route,url:{bind:"hash"},route:"#(:boardId)",jsxAttributes:["url","route"],children:["\n                    ",{$type:i.a},"\n                "]},"\n            "]},"\n        "]},"\n    "]}},function(t,e,n){"use strict";var r=n(56),o=n(54);n.d(e,"a",function(){return r.a}),n.d(e,"b",function(){return o.a})},function(t,e){},function(t,e,n){"use strict";function r(t){var e,n=t.split("\n"),r=1e5,o=1e5;return n.forEach(function(t,n){for(var i=0;i<t.length;i++)if(" "!=t[i]){i<r&&(r=i),e=n,n<o&&(o=n);break}}),0==r?t:n.filter(function(t,n){return n>=o&&n<=e}).map(function(t){return t.length>r?t.substring(r):""}).join("\n")}e.a=r},function(t,e,n){"use strict";var r=n(2);e.a=function(t){return function(e){return function(n){switch(n.type){case r.j:return void(window.location.hash="#"+n.id);case r.k:if(n.forced||"#"==(window.location.hash||"#")){var o=t.getState(),i=o.tdo;i.boards.length>0&&(window.location.hash="#"+i.boards[0].id)}return;default:return e(n)}}}}},function(t,e,n){"use strict";function r(t){if(t!=o&&t.lists&&t.lists.length>0){o=t;var e=a.a.get();e&&e.token&&e.gistId?(i&&clearTimeout(i),i=setTimeout(function(){i=null;var n=new s.a(e);n.update(t)},5e3)):localStorage.tdo=JSON.stringify(t)}}var o,i,s=n(9),a=n(13);e.a=function(t){return function(e){return function(n){var o=e(n),i=t.getState(),s=i.tdo;return r(s),o}}}},function(t,e,n){"use strict";var r=n(7),o=(n.n(r),n(2),Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t});e.a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments[1];switch(e.type){case"ADD_BOARD":return n.i(r.append)(t,e.data);case"REMOVE_BOARD":return n.i(r.updateArray)(t,function(t){return o({},t,{deleted:!0,deletedDate:(new Date).toISOString()})},function(t){return t.id==e.id});default:return t}}},function(t,e,n){"use strict";function r(t,e){return"number"==typeof t?t:e}function o(t){for(var e=(new Date).getTime(),n=864e5,o=r(t.settings.purgeDeletedObjectsAfterDays,7)*n,i=r(t.settings.deleteCompletedTasksAfterDays,7)*n,s={},a=t.boards,l=Array.isArray(a),u=0,a=l?a:a[Symbol.iterator]();;){var c;if(l){if(u>=a.length)break;c=a[u++]}else{if(u=a.next(),u.done)break;c=u.value}var p=c;(!p.deleted||p.deletedDate&&Date.parse(p.deletedDate)+o>e)&&(s[p.id]=!0)}t.boards=t.boards.filter(function(t){return s[t.id]});for(var h={},d=t.lists,f=Array.isArray(d),y=0,d=f?d:d[Symbol.iterator]();;){var m;if(f){if(y>=d.length)break;m=d[y++]}else{if(y=d.next(),y.done)break;m=y.value}var g=m;(s[g.boardId]&&!g.deleted||g.deletedDate&&Date.parse(g.deletedDate)+o>e)&&(h[g.id]=!0)}t.lists=t.lists.filter(function(t){return h[t.id]});for(var v={},b=t.tasks,w=Array.isArray(b),x=0,b=w?b:b[Symbol.iterator]();;){var D;if(w){if(x>=b.length)break;D=b[x++]}else{if(x=b.next(),x.done)break;D=x.value}var C=D;(h[C.listId]&&!C.deleted||C.deletedDate&&Date.parse(C.deletedDate)+o<e)&&(!C.completed||!t.settings.deleteCompletedTasks||C.completedDate&&Date.parse(C.completedDate)+i>e)&&(v[C.id]=!0)}t.tasks=t.tasks.filter(function(t){return v[t.id]})}var i=n(5);n.n(i);e.a=o},function(t,e,n){"use strict";function r(){var t={id:i()(),name:"Tasks",createdDate:(new Date).toISOString()},e={id:i()(),boardId:t.id,name:"List 1",createdDate:(new Date).toISOString()};return{boards:[t],lists:[e],tasks:[]}}var o=n(3),i=n.n(o);e.a=r},function(t,e,n){"use strict";var r=n(39),o=n(36),i=n(6),s=n(12),a=n(34),l=n(38),u=n(40),c=n(2),p=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},h=n.i(i.b)({version:n.i(s.a)(0),boards:a.a,lists:l.a,tasks:u.a,settings:n.i(s.a)({})});e.a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1];switch(e.type){case c.g:return p({},t,{status:"loading"});case c.h:return n.i(r.a)(e.data),e.data;case c.i:var i=n.i(o.a)();return n.i(r.a)(i),i;default:return h(t,e)}}},function(t,e,n){"use strict";e.a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments[1];switch(e.type){default:return t}}},function(t,e,n){"use strict";function r(t){for(var e=t.version||0,r=e+1;r<l.length;r++)l[r](t),t.version=r;n.i(s.a)(t)}var o=n(3),i=n.n(o),s=n(35),a=n(41);e.a=r;var l=[];l.push(function(t){}),l.push(function(t){Array.isArray(t.boards)||(t.boards=[]),Array.isArray(t.lists)||(t.lists=[]),Array.isArray(t.tasks)||(t.tasks=[]),0==t.boards.length&&(t.boards=[{id:i()(),name:"Tasks"}]),t.lists.forEach(function(e){e.boardId||(e.boardId=t.boards[0].id)})}),l.push(function(t){t.settings||(t.settings={completedTasksRetentionDays:1,deleteCompletedTasks:!0,deleteCompletedTasksAfterDays:7,purgeDeletedObjectsAfterDays:3})}),l.push(function(t){for(var e=t.boards,n=t.lists,r=t.tasks,o=[e,n,r],i=0;i<o.length;i++)for(var s=o[i],a=s,l=Array.isArray(a),u=0,a=l?a:a[Symbol.iterator]();;){var c;if(l){if(u>=a.length)break;c=a[u++]}else{if(u=a.next(),u.done)break;c=u.value}var p=c;p.created&&(p.createdDate=p.created,delete p.created),p.isDeleted&&(p.deleted=p.isDeleted,delete p.isDeleted)}}),l.push(function(t){var e=t.settings;Array.isArray(e.taskStyles)||(e.taskStyles=[{regex:"!important",style:"color: orange"},{regex:"#idea",style:"color: yellow"}])}),l.push(function(t){var e=n.i(a.a)();t.boards=[].concat(t.boards,e.boards),t.lists=[].concat(t.lists,e.lists),t.tasks=[].concat(t.tasks,e.tasks)})},function(t,e,n){"use strict";e.a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments[1];switch(e.type){default:return t}}},function(t,e,n){"use strict";function r(){var t=(new Date).toISOString(),e={id:i()(),name:"Tutorial",createdDate:t},n={id:i()(),boardId:e.id,name:"Formatting",headerStyle:"color: lightgreen",createdDate:t},r={id:i()(),boardId:e.id,name:"Keyboard",headerStyle:"color: lightblue",createdDate:t},o={id:i()(),boardId:e.id,name:"General",headerStyle:"color: white",createdDate:t},s=[{id:i()(),listId:n.id,name:"Use Markdown to make some text **bold** or *italic*",createdDate:t},{id:i()(),listId:n.id,name:"You can also use other Markdown features such as [links](https://github.com/mstijak/tdo) or lists.\n        \n* Item 1\n* Item 2\n* Item 3\n",createdDate:t},{id:i()(),listId:n.id,name:"You can customize task highlighting in Settings. #idea",createdDate:t},{id:i()(),listId:n.id,name:"Add some custom CSS and override background or text color of the whole application. #idea\n        \nHint: `body { color: lightblue }`",createdDate:t},{id:i()(),listId:r.id,name:"Press ? to get Help. !important",createdDate:t},{id:i()(),listId:r.id,name:"Use arrow keys to navigate lists and tasks",createdDate:t},{id:i()(),listId:r.id,name:"Hit `Enter` to edit the selected task",createdDate:t},{id:i()(),listId:r.id,name:"Hit `Space` to mark the task deleted",createdDate:t},{id:i()(),listId:r.id,name:"Press the `Insert` key to insert a new task at cursor position",createdDate:t},{id:i()(),listId:r.id,name:"Press the `Delete` key to delete the selected task",createdDate:t},{id:i()(),listId:r.id,name:"Use `Ctrl` + `Up/Down/Left/Right` arrow keys to move the selected task around",createdDate:t},{id:i()(),listId:o.id,name:"Double click on the list header to edit the list",createdDate:t},{id:i()(),listId:o.id,name:"Double click on a task to edit it",createdDate:t},{id:i()(),listId:o.id,name:"Hit Add Board (on the top) and enjoy **`tdo`**!",createdDate:t}];return{boards:[e],lists:[r,n,o],tasks:s}}var o=n(3),i=n.n(o);e.a=r},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(0),a=(n.n(s),n(7)),l=(n.n(a),n(3)),u=n.n(l),c=n(2),p=function(t){function e(){return r(this,e),o(this,t.apply(this,arguments))}return i(e,t),e.prototype.init=function(){t.prototype.init.call(this),this.store.set("layout.mode",this.getLayoutMode()),this.store.dispatch(n.i(c.c)())},e.prototype.getLayoutMode=function(){return window.innerWidth>=1200?"desktop":window.innerWidth>=760?"tablet":"phone"},e.prototype.addBoard=function(t){t.preventDefault();var e=u()();this.store.dispatch(n.i(c.e)({id:e,name:"New Board",edit:!0})),this.store.dispatch(n.i(c.f)(e))},e}(s.Controller);e.a=p},function(t,e,n){"use strict";var r=n(1),o=(n.n(r),n(0));n.n(o);e.a={$type:r.HtmlElement,tag:"div",class:"cxb-listeditor",jsxAttributes:["class"],children:["\n        ",{$type:r.HtmlElement,tag:"div",layout:{type:o.LabelsTopLayout,mod:"stretch"},jsxAttributes:["layout"],children:["\n            ",{$type:r.TextField,value:{bind:"$board.name"},label:"Name",autoFocus:!0,style:"width:100%;",jsxAttributes:["value","label","autoFocus","style"]},"\n        "]},"\n\n        ",{$type:r.HtmlElement,tag:"br"},"\n\n        ",{$type:r.HtmlElement,tag:"div",children:["\n            ",{$type:r.Button,onClick:"boardMoveLeft",jsxAttributes:["onClick"],children:["Move Left"]},"\n            ",{$type:r.Button,onClick:"boardMoveRight",style:"float:right",jsxAttributes:["onClick","style"],children:["Move Right"]},"\n        "]},"\n\n        ",{$type:r.HtmlElement,tag:"div",layout:{type:o.LabelsTopLayout,mod:"stretch"},jsxAttributes:["layout"],children:["\n            ",{$type:r.TextField,value:{bind:"$board.headerClass"},label:"Header Class",placeholder:"CSS class",style:"width:100%;",jsxAttributes:["value","label","placeholder","style"]},"\n        "]},"\n\n        ",{$type:r.HtmlElement,tag:"div",layout:{type:o.LabelsTopLayout,mod:"stretch"},jsxAttributes:["layout"],children:["\n            ",{$type:r.TextArea,value:{bind:"$board.headerStyle"},label:"Header Style",placeholder:"color, font-size, ...",reactOn:"input",style:"width:100%;",jsxAttributes:["value","label","placeholder","reactOn","style"]},"\n        "]},"\n\n        ",{$type:r.HtmlElement,tag:"div",layout:{type:o.LabelsTopLayout,mod:"stretch"},jsxAttributes:["layout"],children:["\n            ",{$type:r.TextField,value:{bind:"$board.className"},label:"Board Class",placeholder:"CSS class",style:"width:100%;",jsxAttributes:["value","label","placeholder","style"]},"\n        "]},"\n\n        ",{$type:r.HtmlElement,tag:"div",layout:{type:o.LabelsTopLayout,mod:"stretch"},jsxAttributes:["layout"],children:["\n            ",{$type:r.TextArea,value:{bind:"$board.style"},label:"Board Style",placeholder:"background, color, ...",reactOn:"input",style:"width:100%;",jsxAttributes:["value","label","placeholder","reactOn","style"]},"\n        "]},"\n\n        ",{$type:r.HtmlElement,tag:"br"},"\n\n        ",{$type:r.HtmlElement,tag:"div",children:["\n            ",{$type:r.Button,onClick:function(t,e){var n=e.store;n.delete("$board.edit")},jsxAttributes:["onClick"],children:["Save"]},"\n            ",{$type:r.Button,mod:"danger",confirm:"All lists and tasks from this board will be deleted. Are you sure?",onClick:"deleteBoard",style:"float:right",jsxAttributes:["mod","confirm","onClick","style"],children:["Delete"]},"\n        "]},"\n        ",{$type:r.HtmlElement,tag:"br"},"\n    "]}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(0),a=(n.n(s),n(7)),l=(n.n(a),n(5)),u=(n.n(l),n(2)),c=n(3),p=n.n(c),h=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},d=function(t){function e(){return r(this,e),o(this,t.apply(this,arguments))}return i(e,t),e.prototype.addList=function(t,e){var n=e.store;t&&t.preventDefault();var r=n.get("$board.id")||n.get("tdo.boards")[0].id;this.store.update("tdo.lists",a.append,{id:p()(),name:"New List",edit:!0,createdDate:(new Date).toISOString(),boardId:r})},e.prototype.deleteList=function(t,e){var n=e.store;n.update("$list",function(t){return h({},t,{deleted:!0,deletedDate:(new Date).toISOString()})})},e.prototype.prepareTask=function(t){return{id:p()(),listId:t,createdDate:(new Date).toISOString(),isNew:!0}},e.prototype.addTask=function(t,e){var n=e.store,r=n.get("$list.id");this.store.update("tdo.tasks",a.append,this.prepareTask(r)),t.preventDefault()},e.prototype.moveTaskUp=function(t,e){var n=e.store;t.stopPropagation(),t.preventDefault();for(var r=n.getData(),o=r.tdo,i=r.$task,s=o.tasks,a=s.indexOf(i),l=-1,u=a-1;u>=0;u--)if(s[u].listId==i.listId){l=u;break}l!=-1&&this.store.set("tdo.tasks",[].concat(s.slice(0,l),[i],s.slice(l,a),s.slice(a+1)))},e.prototype.moveTaskDown=function(t,e){var n=e.store;t.stopPropagation(),t.preventDefault();for(var r=n.getData(),o=r.tdo,i=r.$task,s=o.tasks,a=s.indexOf(i),l=-1,u=a+1;u<s.length;u++)if(s[u].listId==i.listId){l=u;break}l!=-1&&this.store.set("tdo.tasks",[].concat(s.slice(0,a),s.slice(a+1,l+1),[i],s.slice(l+1)))},e.prototype.moveTaskNextBoard=function(t,e,n,r){var o=t.boards.findIndex(function(t){return t.id==e});if(o!=-1){var i=(o+1)%t.boards.length;e=t.boards[i].id,o=r.findIndex(function(t){return t.boardId==e}),n.set("$task.listId",r[o].id),window.location="#"+e}},e.prototype.moveTaskPrevBoard=function(t,e,n,r){var o=t.boards.findIndex(function(t){return t.id==e});if(o!=-1){var i=o-1;i<0&&(i=t.boards.length-1),e=t.boards[i].id,o=r.findIndex(function(t){return t.boardId==e}),n.set("$task.listId",r[o].id),window.location="#"+e}},e.prototype.moveTaskNextList=function(t,e,n,r,o){var i=o.findIndex(function(e){return e.id==t.listId}),s=o.slice(i+1,o.length),a=o.slice(0,i),l=s.findIndex(function(t){return t.boardId==n});l!=-1?r.set("$task.listId",s[l].id):(l=a.findIndex(function(t){return t.boardId==n}),l!=-1&&r.set("$task.listId",a[l].id))},e.prototype.moveTaskPrevList=function(t,e,n,r,o){var i=o.findIndex(function(e){return e.id==t.listId}),s=o.slice(i+1,o.length).reverse(),a=o.slice(0,i).reverse(),l=a.findIndex(function(t){return t.boardId==n});l!=-1?r.set("$task.listId",a[l].id):(l=s.findIndex(function(t){return t.boardId==n}),l!=-1&&r.set("$task.listId",s[l].id))},e.prototype.getBoardId=function(t,e){var n=e.findIndex(function(e){return e.id==t.listId});return n==-1?null:e[n].boardId},e.prototype.moveTaskRight=function(t,e){var n=e.store;t.stopPropagation(),t.preventDefault();var r=n.getData(),o=r.tdo,i=r.$task,s=o.lists,a=this.getBoardId(i,s);null!=a&&(t.shiftKey?this.moveTaskNextBoard(o,a,n,s):this.moveTaskNextList(i,o,a,n,s),n.set("activeTaskId",i.id))},e.prototype.moveTaskLeft=function(t,e){var n=e.store;t.stopPropagation(),t.preventDefault();var r=n.getData(),o=r.tdo,i=r.$task,s=o.lists,a=this.getBoardId(i,s);null!=a&&(t.shiftKey?this.moveTaskPrevBoard(o,a,n,s):this.moveTaskPrevList(i,o,a,n,s),n.set("activeTaskId",i.id))},e.prototype.onTaskKeyDown=function(t,e){var r=e.data.task,o=e.store,i=this.store.get("tdo.tasks"),a=o.getData(),u=(a.tdo,a.$task,a.$board,function(t){return t.charCodeAt(0)});switch(t.keyCode){case l.KeyCode.delete:case u("D"):if(t.keyCode===u("D")&&!t.shiftKey)return;o.update("$task",function(t){return h({},t,{deleted:!0,deletedDate:(new Date).toISOString()})});var c=n.i(l.closest)(t.target,function(t){return t.classList.contains("cxe-menu-item")}),p=c.nextSibling||c.previousSibling;p&&s.FocusManager.focusFirst(p);break;case l.KeyCode.insert:case u("O"):var d=this.prepareTask(r.listId);this.store.set("activeTaskId",d.id);var f=i.indexOf(r);f<i.length-1&&t.keyCode===u("O")&&!t.shiftKey&&f++,this.store.set("tdo.tasks",[].concat(i.slice(0,f),[d],i.slice(f)));break;case l.KeyCode.up:t.ctrlKey&&this.moveTaskUp(t,e);break;case l.KeyCode.down:t.ctrlKey&&this.moveTaskDown(t,e);break;case l.KeyCode.right:t.ctrlKey&&this.moveTaskRight(t,e);break;case l.KeyCode.left:t.ctrlKey&&this.moveTaskLeft(t,e)}},e.prototype.onTaskListKeyDown=function(t,e){var r=function(t){return t.charCodeAt(0)},o=void 0;switch(t.keyCode){case r("K"):t.currentTarget.previousSibling&&s.FocusManager.focusFirst(t.currentTarget.previousSibling);break;case r("J"):t.currentTarget.nextSibling&&s.FocusManager.focusFirst(t.currentTarget.nextSibling);break;case l.KeyCode.left:case r("H"):o=n.i(l.closest)(t.target,function(t){return t.classList.contains("cxb-tasklist")}),o.previousSibling&&s.FocusManager.focusFirst(o.previousSibling);break;case l.KeyCode.right:case r("L"):o=n.i(l.closest)(t.target,function(t){return t.classList.contains("cxb-tasklist")}),o.nextSibling&&s.FocusManager.focusFirst(o.nextSibling)}},e.prototype.listMoveLeft=function(t,e){var n=e.store,r=n.getData(),o=r.tdo,i=r.$list,s=o.lists,a=s.indexOf(i);a>0&&n.set("tdo.lists",[].concat(s.slice(0,a-1),[i,s[a-1]],s.slice(a+1)))},e.prototype.listMoveRight=function(t,e){var n=e.store,r=n.getData(),o=r.tdo,i=r.$list,s=o.lists,a=s.indexOf(i);a+1<s.length&&n.set("tdo.lists",[].concat(s.slice(0,a),[s[a+1],i],s.slice(a+2)))},e.prototype.boardMoveLeft=function(t,e){var n=e.store,r=n.getData(),o=r.tdo,i=r.$board,s=o.boards,a=s.indexOf(i);a>0&&n.set("tdo.boards",[].concat(s.slice(0,a-1),[i,s[a-1]],s.slice(a+1)))},e.prototype.boardMoveRight=function(t,e){var n=e.store,r=n.getData(),o=r.tdo,i=r.$board,s=o.boards,a=s.indexOf(i);a+1<s.length&&n.set("tdo.boards",[].concat(s.slice(0,a),[s[a+1],i],s.slice(a+2)))},e.prototype.deleteBoard=function(t,e){var r=e.store,o=r.get("$board.id");r.dispatch(n.i(u.a)(o)),r.dispatch(n.i(u.b)(!0))},e}(s.Controller);e.a=d},function(t,e,n){"use strict";var r=n(1),o=(n.n(r),n(0));n.n(o);e.a={$type:r.HtmlElement,tag:"div",class:"cxb-listeditor",jsxAttributes:["class"],children:["\n        ",{$type:r.HtmlElement,tag:"div",layout:{type:o.LabelsTopLayout,mod:"stretch"},jsxAttributes:["layout"],children:["\n            ",{$type:r.TextField,value:{bind:"$list.name"},label:"Name",autoFocus:!0,style:"width:100%;",jsxAttributes:["value","label","autoFocus","style"]},"\n        "]},"\n\n        ",{$type:r.HtmlElement,tag:"div",layout:{type:o.LabelsTopLayout,mod:"stretch"},jsxAttributes:["layout"],children:["\n            ",{$type:r.LookupField,value:{bind:"$list.boardId"},label:"Board",options:{bind:"tdo.boards"},optionTextField:"name",style:"width:100%;",required:!0,jsxAttributes:["value","label","options","optionTextField","style","required"]},"\n        "]},"\n\n        ",{$type:r.HtmlElement,tag:"br"},"\n\n        ",{$type:r.HtmlElement,tag:"div",children:["\n            ",{$type:r.Button,onClick:"listMoveLeft",jsxAttributes:["onClick"],children:["Move Left"]},"\n            ",{$type:r.Button,onClick:"listMoveRight",style:"float:right",jsxAttributes:["onClick","style"],children:["Move Right"]},"\n        "]},"\n\n        ",{$type:r.HtmlElement,tag:"div",layout:{type:o.LabelsTopLayout,mod:"stretch"},jsxAttributes:["layout"],children:["\n            ",{$type:r.TextField,value:{bind:"$list.headerClass"},label:"Header Class",placeholder:"CSS class",style:"width:100%;",jsxAttributes:["value","label","placeholder","style"]},"\n        "]},"\n\n        ",{$type:r.HtmlElement,tag:"div",layout:{type:o.LabelsTopLayout,mod:"stretch"},jsxAttributes:["layout"],children:["\n            ",{$type:r.TextArea,value:{bind:"$list.headerStyle"},label:"Header Style",placeholder:"color",reactOn:"input",style:"width:100%;",jsxAttributes:["value","label","placeholder","reactOn","style"]},"\n        "]},"\n\n        ",{$type:r.HtmlElement,tag:"div",layout:{type:o.LabelsTopLayout,mod:"stretch"},jsxAttributes:["layout"],children:["\n            ",{$type:r.TextField,value:{bind:"$list.className"},label:"List Class",placeholder:"CSS class",style:"width:100%;",jsxAttributes:["value","label","placeholder","style"]},"\n        "]},"\n\n        ",{$type:r.HtmlElement,tag:"div",layout:{type:o.LabelsTopLayout,mod:"stretch"},jsxAttributes:["layout"],children:["\n            ",{$type:r.TextArea,value:{bind:"$list.listStyle"},label:"List Style",placeholder:"width, background",reactOn:"input",style:"width:100%;",jsxAttributes:["value","label","placeholder","reactOn","style"]},"\n        "]},"\n\n        ",{$type:r.HtmlElement,tag:"br"},"\n\n        ",{$type:r.HtmlElement,tag:"div",children:["\n        ",{$type:r.Button,onClick:function(t,e){var n=e.store;n.delete("$list.edit")},jsxAttributes:["onClick"],children:["Save"]},"\n        ",{$type:r.Button,mod:"danger",confirm:"Are you sure?",onClick:"deleteList",style:"float:right",jsxAttributes:["mod","confirm","onClick","style"],children:["Delete"]},"\n        "]},"\n        ",{$type:r.HtmlElement,tag:"br"},"\n    "]}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(0),a=(n.n(s),n(22)),l=n.n(a),u=n(48);n.d(e,"a",function(){return p});var c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},p=function(t){function e(){return r(this,e),o(this,t.apply(this,arguments))}return i(e,t),e.prototype.init=function(){this.bind&&(this.task={bind:this.bind}),t.prototype.init.call(this)},e.prototype.declareData=function(){var e;(e=t.prototype.declareData).call.apply(e,[this].concat(Array.prototype.slice.call(arguments),[{task:void 0,styles:void 0}]))},e.prototype.render=function(t,e,n){return s.VDOM.createElement(h,{key:n,instance:e})},e}(s.Widget),h=function(t){function e(n){r(this,e);var i=o(this,t.call(this,n));return i.state={edit:!1,scrollHeight:null},i.dom={},i}return i(e,t),e.prototype.render=function(){var t=this,e=this.props.instance,n=e.widget,r=e.data,o=n.CSS,i=o.block("task",{},{edit:this.state.edit,completed:!!r.task.completed});return s.VDOM.createElement("div",{className:i,onKeyDown:this.onKeyDown.bind(this),ref:function(e){t.dom.el=e},tabIndex:0,onClick:this.onClick.bind(this),onDoubleClick:function(e){t.toggleEditMode()}},!this.state.edit&&this.renderContent(),this.state.edit&&this.renderEditor())},e.prototype.renderContent=function(){var t=this.props.instance,e=t.data,r=t.widget,o=e.task.name?l()(e.task.name):"<p>&nbsp;</p>",i=n.i(u.a)(e.task.name,e.styles);return[s.VDOM.createElement("input",{key:"check",type:"checkbox",checked:!!e.task.completed,onChange:this.onCheck.bind(this),tabIndex:-1,onClick:function(t){t.preventDefault(),t.stopPropagation()}}),s.VDOM.createElement("div",{key:"content",className:r.CSS.expand("cxe-task-content",i.className),style:i.style,dangerouslySetInnerHTML:{__html:o}})]},e.prototype.renderEditor=function(){var t=this,e=this.props.instance.data,n={};return this.state.scrollHeight&&(n.height=this.state.scrollHeight+"px"),s.VDOM.createElement("textarea",{defaultValue:e.task.name,onMouseDown:function(t){t.stopPropagation()},onKeyDown:this.onEditorKeyDown.bind(this),ref:function(e){t.dom.editor=e},style:n,rows:1,onBlur:this.onEditorBlur.bind(this),onChange:this.onChange.bind(this)})},e.prototype.onCheck=function(t){t.preventDefault(),t.stopPropagation(),this.setCompleted(t.target.checked)},e.prototype.setCompleted=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=this.props.instance,n=e.data;e.set("task",c({},n.task,{completed:t,completedDate:(new Date).toISOString()}))},e.prototype.onKeyDown=function(t){var e=this.props.instance,n=e.data,r=e.widget;switch(t.keyCode){case 13:case 73:case 65:t.stopPropagation(),t.preventDefault(),this.toggleEditMode();break;case 32:case 88:this.setCompleted(!n.task.completed);break;default:r.onKeyDown&&r.onKeyDown(t,e)}},e.prototype.save=function(t){var e=this.props.instance,n=e.data,r=c({},n.task,{name:t.target.value,lastChange:(new Date).toISOString()});delete r.isNew,e.set("task",r)},e.prototype.onEditorKeyDown=function(t){var e=this.props.instance;e.data;switch(t.keyCode){case 13:t.stopPropagation(),t.ctrlKey&&(this.save(t),this.toggleEditMode());break;case 27:this.save(t),this.toggleEditMode();break;default:t.stopPropagation()}},e.prototype.onEditorBlur=function(t){this.save(t),this.setState({edit:!1})},e.prototype.onChange=function(t){this.componentDidUpdate()},e.prototype.onClick=function(t){t.preventDefault(),t.stopPropagation()},e.prototype.toggleEditMode=function(){var t=this,e={edit:!this.state.edit};e.edit&&(e.scrollHeight=null),this.setState(e,function(){t.state.edit?t.dom.editor.focus():t.dom.el.focus()})},e.prototype.componentDidMount=function(){var t=this;this.props.instance.parent.toggleEditMode=this.toggleEditMode.bind(this);var e=this.props.instance,n=e.store,r=e.data;this.dom.el.parentNode.parentNode.parentNode.contains(document.activeElement)&&this.toggleEditMode(),r.task.id==n.get("activeTaskId")&&setTimeout(function(){t.dom.el.focus()},10)},e.prototype.componentDidUpdate=function(){this.state.edit&&(this.dom.editor.style.width=this.dom.editor.scrollWidth+"px",this.dom.editor.scrollHeight>this.dom.editor.offsetHeight&&this.setState({scrollHeight:Math.ceil(this.dom.editor.scrollHeight)}))},e}(s.VDOM.Component)},function(t,e,n){"use strict";function r(t,e){var n=e.search,r=e.list,o=e.settings;if(t.deleted||t.listId!=r.id)return!1;if(!t.isNew&&n&&n.query)return d!=n.query&&(h=n.query.split(" ").map(function(t){return new RegExp(t,"gi")}),d=n.query),t.name&&h.every(function(e){return t.name.match(e)});if(t.completed&&t.completedDate){var i=(new Date).getTime(),s=Date.parse(t.completedDate);if(s+24*o.completedTasksRetentionDays*60*60*1e3<i)return!1}return!0}function o(t,e){return t.id==e&&!t.deleted}function i(t,e){return t.boardId==e&&!t.deleted}var s=n(1),a=(n.n(s),n(0)),l=(n.n(a),n(8),n(46)),u=n(44),c=n(45),p=n(43),h=null,d=null,f=function(t,e){var n=e.store;t.preventDefault(),n.toggle("$list.edit")};e.a={$type:s.HtmlElement,tag:"div",class:"cxb-taskboard",controller:u.a,layout:a.FirstVisibleChildLayout,jsxAttributes:["class","controller","layout"],children:["\n        ",{$type:s.HtmlElement,tag:"div",class:"cxe-taskboard-loading",visible:{expr:"{$page.status}=='loading'"},jsxAttributes:["class","visible"],children:["\n            Loading...\n        "]},"\n        ",{$type:s.HtmlElement,tag:"div",class:"cxe-taskboard-error",visible:{expr:"{$page.status}=='error'"},jsxAttributes:["class","visible"],children:["\n            Error occurred while fetching data from GitHub. ",{$type:s.Button,onClick:"load",jsxAttributes:["onClick"],children:["Retry"]},"\n        "]},"\n        ",{$type:s.Repeater,records:{bind:"tdo.boards"},recordName:"$board",keyField:"id",filter:o,filterParams:{bind:"$route.boardId"},jsxAttributes:["records","recordName","keyField","filter","filterParams"],children:["\n            ",{$type:s.HtmlElement,tag:"div",class:{tpl:"cxe-taskboard-lists {$board.className}"},style:{bind:"$board.style"},jsxAttributes:["class","style"],children:["\n                ",{$type:s.Repeater,records:{bind:"tdo.lists"},recordName:"$list",keyField:"id",filter:i,filterParams:{bind:"$board.id"},jsxAttributes:["records","recordName","keyField","filter","filterParams"],children:["\n                    ",{$type:s.HtmlElement,tag:"div",class:{tpl:"cxb-tasklist {$list.className}"},style:{bind:"$list.listStyle"},jsxAttributes:["class","style"],children:["\n                        ",{$type:s.HtmlElement,tag:"header",class:"cxe-tasklist-header",jsxAttributes:["class"],children:["\n                            ",{$type:s.HtmlElement,tag:"h2",class:{tpl:"{$list.headerClass}"},text:{bind:"$list.name"},style:{bind:"$list.headerStyle"},onDoubleClick:f,jsxAttributes:["class","text","style","onDoubleClick"]},"\n                            ",{$type:s.HtmlElement,tag:"a",href:"#",tabIndex:-1,onClick:f,jsxAttributes:["href","tabIndex","onClick"],children:["\n                                ✎\n                            "]},"\n                        "]},"\n                        ",{$type:c.a,visible:{expr:"!!{$list.edit}"},jsxAttributes:["visible"]},"\n                        ",{$type:s.Menu,class:"cxe-tasklist-items",onKeyDown:"onTaskListKeyDown",jsxAttributes:["class","onKeyDown"],children:["\n                            ",{$type:s.Repeater,records:{bind:"tdo.tasks"},recordName:"$task",keyField:"id",filter:r,filterParams:{list:{bind:"$list"},search:{bind:"search"},settings:{bind:"tdo.settings"}},jsxAttributes:["records","recordName","keyField","filter","filterParams"],children:["\n                                ",{$type:s.MenuItem,pad:!1,jsxAttributes:["pad"],children:["\n                                    ",{$type:l.a,bind:"$task",styles:{bind:"tdo.settings.taskStyles"},onKeyDown:"onTaskKeyDown",jsxAttributes:["bind","styles","onKeyDown"]},"\n                                "]},"\n                            "]},"\n                            ",{$type:s.HtmlElement,tag:"a",class:"cxe-tasklist-add",onClick:"addTask",href:"#",jsxAttributes:["class","onClick","href"],children:["Add Task"]},"\n                        "]},"\n                    "]},"\n                "]},"\n                ",{$type:s.HtmlElement,tag:"div",class:"cxb-tasklist",jsxAttributes:["class"],children:["\n                    ",{$type:s.Menu,class:"cxe-tasklist-items",onKeyDown:"onTaskListKeyDown",jsxAttributes:["class","onKeyDown"],children:["\n                        ",{$type:s.HtmlElement,tag:"a",class:"cxe-tasklist-add",onClick:"addList",href:"#",jsxAttributes:["class","onClick","href"],children:["\n                            Add List\n                        "]},"\n\n                        ",{$type:s.HtmlElement,tag:"a",class:"cxe-tasklist-add",onClick:function(t,e){var n=e.store;t.preventDefault(),n.set("$board.edit",!0)},href:"#",jsxAttributes:["class","onClick","href"],children:["\n                            Edit Board\n                        "]},"\n                    "]},"\n                    ",{$type:p.a,visible:{expr:"!!{$board.edit}"},jsxAttributes:["visible"]},"\n                "]},"\n            "]},"\n        "]},"\n    "]}},function(t,e,n){"use strict";function r(t,e){s!==e&&(i=[],Array.isArray(e)&&e.forEach(function(t){try{if(t.regex&&(t.style||t.className)){var e={regex:new RegExp(t.regex),style:n.i(o.parseStyle)(t.style),className:t.className};i.push(e)}}catch(t){console.log("Task style error.",t)}}));var r={style:{},className:[]};if(t)for(var a=0;a<i.length;a++)t.match(i[a].regex)&&(Object.assign(r.style,i[a].style),i[a].className&&r.className.push(i[a].className));return r}var o=n(5);n.n(o);e.a=r;var i,s=-1},function(t,e,n){"use strict";var r=n(1),o=(n.n(r),n(0)),i=(n.n(o),n(8));e.a={$type:r.HtmlElement,tag:"div",class:"cxb-help",jsxAttributes:["class"],children:["\n        ",{$type:i.a,children:["\n            ## Help\n\n            Use double-click to edit lists and tasks.\n\n            ### Keyboard Shortcuts (Windows)\n\n            `Up` or `k` Move cursor to the previous task\n\n            `Down` or `j` Move cursor to the next task\n\n            `Left` or `h` Move cursor to the previous list\n\n            `Right` or `l` Move cursor to the next list\n\n            `Enter` or `i` Edit task at cursor position\n\n            `Space` or `x` Mark task as completed\n\n            `/` Search\n\n            `o` Insert task below cursor position\n\n            `Insert` or `Shift` + `O` Insert task at cursor position\n\n            `Delete` or `Shift` + `D` Delete task\n\n            `Escape` or `Ctrl` + `Enter` Exit task edit mode\n\n            `Escape` (when cursor is not in a task list) Move cursor to the first task list\n\n            -----------\n\n            `Ctrl` + `Left` Move task to the previous list\n\n            `Ctrl` + `Right` Move task to the next list\n\n            `Ctrl` + `Up` Move task up\n\n            `Ctrl` + `Down` Move task down\n\n\n        "]},"\n    "]}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(0),a=(n.n(s),n(1)),l=(n.n(a),n(7)),u=(n.n(l),n(9)),c=n(2),p=function(t){function e(){return r(this,e),o(this,t.apply(this,arguments))}return i(e,t),e.prototype.init=function(){t.prototype.init.call(this),this.store.set("$page.gh",JSON.parse(localStorage.gh||"{}"))},e.prototype.load=function(){var t=this,e=this.store.get("$page.gh"),r=new u.a(e);r.get().then(function(){t.persist(),t.store.dispatch(n.i(c.c)(e))}).catch(function(t){a.MsgBox.alert("Error occurred: "+t),console.log(t)})},e.prototype.create=function(){var t=this,e=this.store.get("$page.gh"),n=new u.a(e);n.create(this.store.get("tdo")).then(function(e){t.store.set("$page.gh.gistId",e.id),t.persist()})},e.prototype.persist=function(){this.store.set("$page.gh.verified",!0);var t=this.store.get("$page.gh");localStorage.gh=JSON.stringify(t)},e.prototype.unlink=function(t){t.preventDefault(),this.store.set("$page.gh",null),localStorage.gh=null,this.store.dispatch(n.i(c.d)())},e.prototype.changeGist=function(t){t.preventDefault(),this.store.set("$page.gh.verified",!1)},e.prototype.addTaskStyle=function(t){t.preventDefault(),this.store.update("tdo.settings.taskStyles",l.append,{})},e.prototype.removeTaskStyle=function(t,e){var n=e.store;t.preventDefault();var r=n.get("$record");this.store.update("tdo.settings.taskStyles",function(t){return t.filter(function(t){return t!=r})})},e}(s.Controller);e.a=p},function(t,e,n){"use strict";var r=n(1),o=(n.n(r),n(0)),i=(n.n(o),n(8)),s=n(50);e.a={$type:r.HtmlElement,tag:"div",class:"cxb-settings",controller:s.a,jsxAttributes:["class","controller"],children:["\n        ",{$type:r.HtmlElement,tag:"h2",children:["Settings"]},"\n\n        ",{$type:r.HtmlElement,tag:"h3",children:["GitHub"]},"\n        ",{$type:r.HtmlElement,tag:"div",visible:{expr:"{$page.gh.verified}"},jsxAttributes:["visible"],children:["\n            ",{$type:r.HtmlElement,tag:"p",preserveWhitespace:!0,jsxAttributes:["preserveWhitespace"],children:["\n                Your tasks are persisted to the Gist\n                ",{$type:r.HtmlElement,tag:"a",href:"https://gist.github.com",text:{bind:"$page.gh.gistId"},jsxAttributes:["href","text"]},".\n            "]},"\n            ",{$type:r.HtmlElement,tag:"p",preserveWhitespace:!0,jsxAttributes:["preserveWhitespace"],children:["\n                ",{$type:r.HtmlElement,tag:"a",href:"#",onClick:"unlink",jsxAttributes:["href","onClick"],children:["Unlink completely"]},"\n                ",{$type:r.HtmlElement,tag:"a",href:"#",onClick:"changeGist",jsxAttributes:["href","onClick"],children:["Switch gists"]},"\n            "]},"\n        "]},"\n        ",{$type:r.HtmlElement,tag:"div",layout:o.LabelsLeftLayout,visible:{expr:"!{$page.gh.verified}"},jsxAttributes:["layout","visible"],children:["\n            ",{$type:i.a,children:["\n                GitHub gists can be used to store task data. In order to connect with GitHub please [create a GitHub Personal\n                Access Token](https://github.com/settings/tokens) with **gist** scope and paste it below.\n                The token will enable read/write access to your GitHub gists. Tokens are stored in **localStorage**, so don't do\n                this on a public computer.\n            "]},"\n\n            ",{$type:r.TextField,value:{bind:"$page.gh.token"},placeholder:"GitHub Personal Access Token",label:"Token",style:"width: 30rem",jsxAttributes:["value","placeholder","label","style"]},"\n\n            ",{$type:r.LabeledContainer,label:"Gist",jsxAttributes:["label"],children:["\n                ",{$type:r.Radio,value:{bind:"$page.initMode"},option:"create",text:"Create a new gist",jsxAttributes:["value","option","text"]},"\n                ",{$type:r.Radio,value:{bind:"$page.initMode"},option:"load",text:"Load an existing gist",jsxAttributes:["value","option","text"]},"\n            "]},"\n\n            ",{$type:r.PureContainer,layout:o.UseParentLayout,visible:{expr:"{$page.initMode}=='load'"},jsxAttributes:["layout","visible"],children:["\n                ",{$type:r.TextField,value:{bind:"$page.gh.gistId"},placeholder:"Gist Identifier",label:"GistId",style:"width: 30rem",jsxAttributes:["value","placeholder","label","style"]},"\n                ",{$type:r.Button,onClick:"load",confirm:"Loading the gist will remove all your locally stored tasks. Do you want to proceed?",jsxAttributes:["onClick","confirm"],children:["\n                    Load\n                "]},"\n            "]},"\n\n            ",{$type:r.PureContainer,layout:o.UseParentLayout,visible:{expr:"{$page.initMode}=='create'"},jsxAttributes:["layout","visible"],children:["\n                ",{$type:r.Button,onClick:"create",jsxAttributes:["onClick"],children:["\n                    Create Gist\n                "]},"\n            "]},"\n        "]},"\n\n        ",{$type:r.HtmlElement,tag:"h3",children:["Maintenance"]},"\n\n        ",{$type:r.HtmlElement,tag:"div",layout:o.LabelsLeftLayout,jsxAttributes:["layout"],children:["\n            ",{$type:r.NumberField,value:{bind:"tdo.settings.completedTasksRetentionDays"},label:"Show completed tasks for",style:"width:5rem",inputStyle:"text-align:center",help:"day(s).",jsxAttributes:["value","label","style","inputStyle","help"]},"\n            ",{$type:r.NumberField,value:{bind:"tdo.settings.deleteCompletedTasksAfterDays"},enabled:{bind:"tdo.settings.deleteCompletedTasks"},style:"width:5rem",inputStyle:"text-align:center",label:{$type:r.Checkbox,value:{bind:"tdo.settings.deleteCompletedTasks"},jsxAttributes:["value"],children:["Delete completed tasks after"]},help:"day(s)",jsxAttributes:["value","enabled","style","inputStyle","label","help"]},"\n            ",{$type:r.NumberField,value:{bind:"tdo.settings.purgeDeletedObjectsAfterDays"},label:"Purge deleted objects after",style:"width:5rem",inputStyle:"text-align:center",help:"day(s)",jsxAttributes:["value","label","style","inputStyle","help"]},"\n        "]},"\n\n        ",{$type:r.HtmlElement,tag:"h3",children:["Task Styles"]},"\n\n        ",{$type:r.Repeater,records:{bind:"tdo.settings.taskStyles"},jsxAttributes:["records"],children:["\n            ",{$type:r.PureContainer,layout:o.LabelsTopLayout,jsxAttributes:["layout"],children:["\n                ",{$type:r.HtmlElement,tag:"span",text:{tpl:"{[{$index}+1]}."},jsxAttributes:["text"]},"\n                ",{$type:r.TextField,value:{bind:"$record.regex"},label:"Regex",jsxAttributes:["value","label"]},"\n                ",{$type:r.TextField,value:{bind:"$record.style"},label:"Style",jsxAttributes:["value","label"]},"\n                ",{$type:r.TextField,value:{bind:"$record.className"},label:"Class",jsxAttributes:["value","label"]},"\n                ",{$type:r.HtmlElement,tag:"a",href:"#",onClick:"removeTaskStyle",jsxAttributes:["href","onClick"],children:["Remove"]},"\n            "]},"\n        "]},"\n        ",{$type:r.HtmlElement,tag:"p",children:["\n            ",{$type:r.HtmlElement,tag:"a",href:"#",onClick:"addTaskStyle",jsxAttributes:["href","onClick"],children:["Add"]},"\n        "]},"\n\n        ",{$type:r.HtmlElement,tag:"h3",children:["Custom CSS"]},"\n\n        ",{$type:r.TextArea,value:{bind:"tdo.settings.css"},rows:20,style:"width:600px",jsxAttributes:["value","rows","style"]},"\n    "]}},function(t,n,r){"use strict";function o(t){return t&&"object"===("undefined"==typeof t?"undefined":k(t))&&"default"in t?t.default:t}function i(t,e,n,r,o){var i;t.target.setCapture?(i=t.currentTarget,i.setCapture()):(i=document.createElement("div"),i.className="cxb-mousecapture",o&&(i.style.cursor=o),document.body.appendChild(i));var s=function(t){e&&e(t,r),t.stopPropagation(),t.preventDefault()},a=function t(e){try{n&&n(e)}finally{i.removeEventListener("mousemove",s),i.removeEventListener("mouseup",t),i.releaseCapture?i.releaseCapture():document.body.removeChild(i)}};i.addEventListener("mousemove",s),i.addEventListener("mouseup",a),t.stopPropagation()}function s(t,e,n,r,o){if(0==t.type.indexOf("touch")){var s=t.currentTarget,a=function(t){e&&e(t,r),t.preventDefault()},l=function t(e){s.removeEventListener("touchmove",a),s.removeEventListener("touchend",t),n&&n(e),e.preventDefault()};s.addEventListener("touchmove",a),s.addEventListener("touchend",l),t.stopPropagation()}else i(t,e,n,r,o||t.target.style.cursor)}function a(t){return t.touches&&t.touches[0]||t}function l(t,e){var n=z.get(t);if(n){if(n.instance==e)return n;n.destroy()}return new q(t,e)}function u(t){var e=z.get(t);e&&e.destroy()}function c(t,e,n){var r="number"==typeof t.nodeType?t:t.currentTarget;E.Debug.log(E.tooltipsFlag,"mouse-enter",r,e);var o=l(r,e);o.check(n,t)}function p(t,e){var n=t.currentTarget||t.target;E.Debug.log(E.tooltipsFlag,"mouse-leave",n,e);var r=l(n,e);r.onElementMouseLeave()}function h(t){u(t)}function d(t,e,n){var r=l(t,e);r.onComponentWillReceiveProps(n)}function f(t,e,n){var r=l(t,e);r.onComponentDidMount(n)}function y(t,e,n){var r=t.content&&t.content[e],o=t.contentPlaceholder&&t.contentPlaceholder[e];r&&(t.content[e]=null),o&&(t.contentPlaceholder[e]=null),n(),t.content&&(r?t.content[e]=r:delete t.content[e]),t.contentPlaceholder&&(o?t.contentPlaceholder[e]=o:delete t.contentPlaceholder[e])}function m(t){return null!=t&&"undefined"!=typeof t.content?t:{content:t}}function g(t){var e=Tt[t];if(!e){var n=document.createElement("div");document.body.appendChild(n),e=Tt[t]={el:n}}return e}function v(t,e){return t.filter(function(t){return t.key}).map(function(t){return M.Binding.get(t.remote).value(e)})}function b(t,e){if(!t||!e||t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!=e[n])return!1;return!0}function w(t,e){var n={$value:{}};return t.forEach(function(t){var r=M.Binding.get(t.remote).value(e);n=M.Binding.get(t.local).set(n,r)}),n.$value}function x(t){return 5*Math.ceil(t/5)}function D(t){return 5*Math.floor(t/5)}function C(t){t.forEach(function(t){t.caption&&(t.caption=M.getSelector(t.caption))})}var k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(n,"__esModule",{value:!0});var S=r(14),E=r(4),M=r(10),O=o(r(65)),T=r(21),F="function"==typeof Symbol&&"symbol"===k(Symbol.iterator)?function(t){return"undefined"==typeof t?"undefined":k(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":"undefined"==typeof t?"undefined":k(t)},V=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},A=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),I=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},P=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":k(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},N=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":k(e))&&"function"!=typeof e?t:e},$=function(t){function e(){return V(this,e),N(this,t.apply(this,arguments))}return P(e,t),e.prototype.render=function(){return this.text},e}(S.Widget);S.Widget.alias("static-text",$);var j=function(t){function e(){return V(this,e),N(this,t.apply(this,arguments))}return P(e,t),e.prototype.init=function(){!this.value&&(this.tpl||this.expr||this.bind)&&(this.value={tpl:this.tpl,expr:this.expr,bind:this.bind}),t.prototype.init.call(this)},e.prototype.declareData=function(){var e;(e=t.prototype.declareData).call.apply(e,[this,{value:void 0}].concat(Array.prototype.slice.call(arguments)))},e.prototype.render=function(t,e,n){var r=e.data;return null!=r.value?r.value:""},e}(S.Widget);S.Widget.alias("text",j);var L=function(t){function e(){return V(this,e),N(this,t.apply(this,arguments))}return P(e,t),e.prototype.declareData=function(){var e;return(e=t.prototype.declareData).call.apply(e,[this].concat(Array.prototype.slice.call(arguments),[{style:{structured:!0},class:{structured:!0},className:{structured:!0},resizable:void 0,draggable:void 0}]))},e.prototype.prepareData=function(e,n){var r=this,o=n.data,i=n.store;o.stateMods=I({},o.stateMods,{inline:this.inline,modal:this.modal,pad:this.pad,resizable:o.resizable,draggable:o.draggable}),e.options.dismiss?n.dismiss=e.options.dismiss:this.visible&&this.visible.bind&&(n.dismiss=function(){i.set(r.visible.bind,!1)}),t.prototype.prepareData.call(this,e,n)},e.prototype.explore=function(e,n){var r=e.parentOptions;n.dismiss&&(e.parentOptions=I({},e.parentOptions,{dismiss:n.dismiss})),t.prototype.explore.call(this,e,n),e.parentOptions=r},e.prototype.render=function(t,e,n){return S.VDOM.createElement(_,{key:n,instance:e,subscribeToBeforeDismiss:t.options.subscribeToBeforeDismiss,parentEl:t.options.parentEl},this.renderContents(t,e))},e.prototype.renderContents=function(t,e){return this.renderChildren(t,e)},e.prototype.overlayDidMount=function(t,e){if(this.center){var n=e.el,r=n.getBoundingClientRect();n.style.left=(window.innerWidth-r.width)/2+"px",n.style.top=(window.innerHeight-r.height)/2+"px"}},e.prototype.overlayDidUpdate=function(t,e){},e.prototype.overlayWillUnmount=function(t,e){},e.prototype.handleFocusOut=function(t,e){this.onFocusOut&&this.onFocusOut(t,e),this.dismissOnFocusOut&&t.dismiss&&t.dismiss()},e.prototype.handleKeyDown=function(t,e,n){this.onKeyDown&&this.onKeyDown(t,e,n)},e.prototype.handleMouseLeave=function(t,e){this.onMouseLeave&&this.onMouseLeave(t,e)},e.prototype.handleMouseEnter=function(t,e){this.onMouseEnter&&this.onMouseEnter(t,e)},e.prototype.containerFactory=function(){var t=document.createElement("div");return document.body.appendChild(t),t},e.prototype.open=function(t,e){var n=this;this.initialized||this.init();var r=this.containerFactory();r.style.display="hidden",e=I({},e,{parentEl:r}),e.name=e.name||"overlay";var o,i,s;e.subscribeToBeforeDismiss=function(t){i=t};var a=e.dismiss=function(){s||i&&i()===!1||(s=!0,o(),r&&setTimeout(function(){S.VDOM.DOM.unmountComponentAtNode&&S.VDOM.DOM.unmountComponentAtNode(r),r.parentNode&&r.parentNode.removeChild(r),r=null},n.destroyDelay))};return o=S.startAppLoop(r,t,this,e),a},e}(S.PureContainer);L.prototype.baseClass="overlay",L.prototype.resizable=!1,L.prototype.resizeWidth=7,L.prototype.center=!1,L.prototype.modal=!1,L.prototype.backdrop=!1,L.prototype.inline=!1,L.prototype.autoFocus=!1,L.prototype.animate=!1,L.prototype.draggable=!1,L.prototype.destroyDelay=0,L.prototype.dismissOnFocusOut=!1,L.prototype.focusable=!1,S.Widget.alias("overlay",L);var _=function(t){function e(n){V(this,e);var r=N(this,t.call(this,n));return r.state={},r.customStyle={},r}return P(e,t),e.prototype.render=function(){var t=this.props,e=t.instance,n=t.parentEl,r=e.widget;return r.inline||n?this.renderOverlay():null},e.prototype.renderOverlay=function(){var t=this,e=this.props.instance,n=e.widget,r=e.data,o=n.CSS,i=n.baseClass,s=S.VDOM.createElement("div",{ref:function(e){t.el=e},className:r.classNames,style:r.style,tabIndex:n.focusable?0:null,onFocus:this.onFocus.bind(this),onBlur:this.onBlur.bind(this),onKeyDown:this.onKeyDown.bind(this),onMouseMove:this.onMouseMove.bind(this),onMouseUp:this.onMouseUp.bind(this),onMouseDown:this.onMouseDown.bind(this),onTouchStart:this.onMouseDown.bind(this),onMouseEnter:this.onMouseEnter.bind(this),onMouseLeave:this.onMouseLeave.bind(this)},n.modal||n.backdrop&&S.VDOM.createElement("div",{key:"backdrop",className:o.element(i,"modal-backdrop"),onClick:this.onBackdropClick.bind(this)}),this.renderOverlayBody()),a=s;return(n.modal||n.backdrop)&&(a=S.VDOM.createElement("div",{ref:function(e){t.shadowEl=e},className:o.element(i,"shadow"),key:"shadow"},s)),a},e.prototype.renderOverlayBody=function(){return this.props.children},e.prototype.onFocus=function(){S.FocusManager.nudge(),this.onFocusIn(),this.el&&S.oneFocusOut(this,this.el,this.onFocusOut.bind(this))},e.prototype.onBlur=function(){S.FocusManager.nudge()},e.prototype.onFocusIn=function(){},e.prototype.onFocusOut=function(){var t=this.props.instance.widget;t.handleFocusOut(this.props.instance,this)},e.prototype.onMouseEnter=function(t){var e=this.props.instance.widget;e.handleMouseEnter(this.props.instance,this)},e.prototype.onMouseLeave=function(t){var e=this.props.instance.widget;e.handleMouseLeave(this.props.instance,this)},e.prototype.onKeyDown=function(t){var e=this.props.instance.widget;e.handleKeyDown(t,this.props.instance,this)},e.prototype.getResizePrefix=function(t){var e=this.props.instance,n=e.widget,r=e.data;if(!r.resizable)return"";var o=this.getCursorPos(t),i=this.el.getBoundingClientRect(),s=o.clientX-i.left,a=i.right-o.clientX,l=o.clientY-i.top,u=i.bottom-o.clientY,c="";return l>=0&&l<n.resizeWidth?c+="n":u>=0&&u<n.resizeWidth&&(c+="s"),s>=0&&s<n.resizeWidth?c+="w":a>=0&&a<n.resizeWidth&&(c+="e"),c},e.prototype.onMouseDown=function(t){var e=this.props.instance.data,n=this.getResizePrefix(t);if(n){t.stopPropagation();var r=this.el.getBoundingClientRect(),o=this.getCursorPos(t),i={prefix:n,dl:o.clientX-r.left,dt:o.clientY-r.top,dr:o.clientX-r.right,db:o.clientY-r.bottom,rect:r};s(t,this.onMouseMove.bind(this),null,i,n+"-resize")}else e.draggable&&(this.startMoveOperation(t),t.stopPropagation());t.stopPropagation()},e.prototype.onBackdropClick=function(t){t.stopPropagation();var e=this.props.instance,n=e.widget;n.onBackdropClick&&n.onBackdropClick(t,e),n.backdrop&&e.dismiss&&e.dismiss()},e.prototype.onMouseUp=function(t){t.stopPropagation()},e.prototype.onMouseMove=function(t,e){if(e&&e.prefix){var n=e.prefix,r=e.rect,o=e.dl,i=e.dt,s=e.dr,a=e.db,l=this.getCursorPos(t);n.indexOf("w")!=-1&&this.setCustomStyle({left:l.clientX-o+"px",width:r.right-l.clientX+o+"px",right:"auto"}),n.indexOf("n")!=-1&&this.setCustomStyle({top:l.clientY-i+"px",height:r.bottom-l.clientY+i+"px",bottom:"auto"}),n.indexOf("e")!=-1&&this.setCustomStyle({width:l.clientX-s-r.left+"px",left:r.left+"px",right:"auto"}),n.indexOf("s")!=-1&&this.setCustomStyle({height:l.clientY-a-r.top+"px",top:r.top+"px",bottom:"auto"})}else{var n=this.getResizePrefix(t);this.setCustomStyle({cursor:n?n+"-resize":null})}},e.prototype.getCursorPos=function(t){return t.touches&&t.touches[0]||{clientX:t.clientX,clientY:t.clientY}},e.prototype.startMoveOperation=function(t){if(this.el&&!this.getResizePrefix(t)){t.stopPropagation();var e=this.el.getBoundingClientRect(),n=this.getCursorPos(t),r={dx:n.clientX-e.left,dy:n.clientY-e.top};s(t,this.onMove.bind(this),null,r,getComputedStyle(t.target).cursor)}},e.prototype.onMove=function(t,e){if(e){var n=this.getCursorPos(t);t.preventDefault(),this.setCustomStyle({left:n.clientX-e.dx+"px",top:n.clientY-e.dy+"px",right:"auto",bottom:"auto"})}},e.prototype.onBeforeDismiss=function(){var t=this.props.instance,e=t.widget;return(!e.overlayWillDismiss||e.overlayWillDismiss(t,this)!==!1)&&(e.animate&&this.setState({animated:!1}),this.el.className=this.getOverlayCssClass(),!0)},e.prototype.componentDidMount=function(){var t=this,e=this.props,n=e.instance,r=e.subscribeToBeforeDismiss,o=e.parentEl,i=n.widget;o||i.inline||(this.ownedEl=i.containerFactory(),this.ownedEl.style.display="hidden",this.containerEl=this.ownedEl),this.componentDidUpdate(),i.overlayDidMount(n,this),this.containerEl?this.containerEl.style.display=null:o&&(o.style.display=null),i.autoFocus?S.FocusManager.focusFirst(this.el):E.isSelfOrDescendant(this.el,document.activeElement)&&S.oneFocusOut(this,this.el,this.onFocusOut.bind(this)),r&&r(this.onBeforeDismiss.bind(this)),i.animate&&setTimeout(function(){t.setState({animated:!0})},0)},e.prototype.componentWillUnmount=function(){var t=this;S.offFocusOut(this),this.unmounting=!0,this.state.animated&&this.onBeforeDismiss();
var e=this.props.instance.widget;e.overlayWillUnmount(this.props.instance,this),this.ownedEl&&setTimeout(function(){t.ownedEl.parentNode&&t.ownedEl.parentNode.removeChild(t.ownedEl),t.ownedEl=null},e.destroyDelay),delete this.containerEl},e.prototype.setZIndex=function(t){this.shadowEl&&(this.shadowEl.style.zIndex=t),this.setCustomStyle({zIndex:t})},e.prototype.setCustomStyle=function(t){Object.assign(this.customStyle,t),this.el&&Object.assign(this.el.style,this.customStyle)},e.prototype.getOverlayStyle=function(){var t=this.props.instance.data;return I({},t.style,this.customStyle)},e.prototype.setCSSState=function(t){var e=I({},this.state.mods),n=!1;for(var r in t)e[r]!==t[r]&&(e[r]=t[r],n=!0);n&&this.setState({mods:t})},e.prototype.getOverlayCssClass=function(){var t=this.props.instance,e=t.data,n=t.widget,r=n.CSS;return r.expand(e.classNames,r.state(I({},this.state.mods,{animated:this.state.animated&&!this.unmounting})))},e.prototype.componentDidUpdate=function(){this.containerEl&&S.VDOM.DOM.render(this.renderOverlay(),this.containerEl);var t=this.props.instance.widget;t.overlayDidUpdate(this.props.instance,this),this.el.className=this.getOverlayCssClass(),Object.assign(this.el.style,this.getOverlayStyle())},e}(S.VDOM.Component),R={},K={},B={},W=function(){function t(){V(this,t)}return t.register=function(t){var e=this;return function(n){return e.registerPrototype(t,n),n}},t.registerPrototype=function(t,e){R[t]=e.prototype,B[t]&&Object.assign(e.prototype,B[t])},t.override=function(t,e){B[t]=e;var n=R[t];n&&Object.assign(n,e)},t.localize=function(t,e,n){var r=K[t];r||(r=K[t]={}),r[e]=I({},r[e],n)},t.setCulture=function(t){var e=K[t];if(e)for(var n in e){var r=R[n];r&&Object.assign(r,e[n])}},t}(),H=function(t){function e(){return V(this,e),N(this,t.apply(this,arguments))}return P(e,t),e.prototype.declareData=function(){var e;return(e=t.prototype.declareData).call.apply(e,[this].concat(Array.prototype.slice.call(arguments),[{placement:void 0}]))},e.prototype.overlayDidMount=function(e,n){var r=this;t.prototype.overlayDidMount.call(this,e,n);var o=n.scrollableParents=[window];n.updateDropdownPosition=function(t){return r.updateDropdownPosition(e,n)},this.updateDropdownPosition(e,n);for(var i=this.relatedElement.parentElement;i;)o.push(i),i=i.parentElement;o.forEach(function(t){t.addEventListener("scroll",n.updateDropdownPosition)}),n.offResize=S.ResizeManager.subscribe(n.updateDropdownPosition),this.onDropdownDidMount&&this.onDropdownDidMount(e,n)},e.prototype.overlayDidUpdate=function(t,e){this.updateDropdownPosition(t,e)},e.prototype.overlayWillUnmount=function(t,e){var n=e.scrollableParents;n&&(n.forEach(function(t){t.removeEventListener("scroll",e.updateDropdownPosition)}),delete e.scrollableParents,delete e.updateDropdownPosition),e.offResize&&e.offResize()},e.prototype.updateDropdownPosition=function(t,e){var n=e.el,r=t.data,o=this.relatedElement.getBoundingClientRect();this.trackMouse&&e.mousePosition&&(o={left:e.mousePosition.x,right:e.mousePosition.x,top:e.mousePosition.y,bottom:e.mousePosition.y});var i={};this.matchWidth&&(i.minWidth=o.right-o.left+"px");var s=this.measureNaturalDropdownSize(t,e),a=this.findOptimalPlacement(s,o,r.placement);switch(this.positioning){case"absolute":this.applyAbsolutePositioningPlacementStyles(i,a,s,o,n);break;case"auto":E.isTouchDevice()?this.applyAbsolutePositioningPlacementStyles(i,a,s,o,n):this.applyFixedPositioningPlacementStyles(i,a,s,o,n);break;default:this.applyFixedPositioningPlacementStyles(i,a,s,o,n)}e.setCustomStyle(i),this.setDirectionClass(e,a),this.onDropdownPositionDidUpdate&&this.onDropdownPositionDidUpdate(t,e)},e.prototype.applyFixedPositioningPlacementStyles=function(t,e,n,r,o){var i=E.getViewportSize();switch(t.position="fixed",e){case"down":case"down-center":t.top=r.bottom+this.offset+"px",t.right="auto",t.bottom=this.constrain&&r.bottom+this.offset+n.height>i.height?"0":"auto",t.left=(r.left+r.right-o.offsetWidth)/2+"px";break;case"down-right":t.top=r.bottom+this.offset+"px",t.right="auto",t.left=r.left+"px",t.bottom=this.constrain&&r.bottom+this.offset+n.height>i.height?"0":"auto";break;case"down-left":t.top=r.bottom+this.offset+"px",t.right=i.width-r.right+"px",t.bottom=this.constrain&&r.bottom+this.offset+n.height>i.height?"0":"auto",t.left="auto";break;case"up":case"up-center":t.top=this.constrain&&r.top-this.offset-n.height<0?"0":"auto",t.right="auto",t.bottom=i.height-r.top+this.offset+"px",t.left=(r.left+r.right-o.offsetWidth)/2+"px";break;case"up-right":t.top=this.constrain&&r.top-this.offset-n.height<0?"0":"auto",t.right="auto",t.bottom=i.height-r.top+this.offset+"px",t.left=r.left+"px";break;case"up-left":t.top=this.constrain&&r.top-this.offset-n.height<0?"0":"auto",t.right=i.width-r.right+"px",t.bottom=i.height-r.top+this.offset+"px",t.left="auto";break;case"right":case"right-center":t.top=(r.top+r.bottom-o.offsetHeight)/2+"px",t.right="auto",t.bottom="auto",t.left=r.right+this.offset+"px";break;case"right-down":t.top=r.top+"px",t.right="auto",t.bottom="auto",t.left=r.right+this.offset+"px";break;case"right-up":t.top="auto",t.right="auto",t.bottom=i.height-r.bottom+"px",t.left=r.right+this.offset+"px";break;case"left":case"left-center":t.top=(r.top+r.bottom-o.offsetHeight)/2+"px",t.right=i.width-r.left+this.offset+"px",t.bottom="auto",t.left="auto";break;case"left-down":t.top=r.top+"px",t.right=i.width-r.left+this.offset+"px",t.bottom="auto",t.left="auto";break;case"left-up":t.top="auto",t.right=i.width-r.left+this.offset+"px",t.bottom=i.height-r.bottom+"px",t.left="auto";break;case"screen-center":var s=Math.min(n.width,i.width),a=Math.min(n.height,i.height);t.top=(i.height-a)/2+"px",t.right=(i.width-s)/2+"px",t.bottom=(i.height-a)/2+"px",t.left=(i.width-s)/2+"px"}},e.prototype.applyAbsolutePositioningPlacementStyles=function(t,e,n,r,o){var i=E.getViewportSize();switch(t.position="absolute",e){case"down":case"down-center":t.top=r.bottom-r.top+this.offset+"px",t.right="auto",t.bottom=this.constrain&&r.bottom+this.offset+n.height>i.height?r.bottom+this.offset-i.height+"px":"auto",t.left=(r.right-r.left-o.offsetWidth)/2+"px";break;case"down-right":t.top=r.bottom-r.top+this.offset+"px",t.right="auto",t.left="0",t.bottom=this.constrain&&r.bottom+this.offset+n.height>i.height?r.bottom+this.offset-i.height+"px":"auto";break;case"down-left":t.top=r.bottom-r.top+this.offset+"px",t.right="0",t.bottom=this.constrain&&r.bottom+this.offset+n.height>i.height?r.bottom+this.offset-i.height+"px":"auto",t.left="auto";break;case"up":case"up-center":t.top=this.constrain&&r.top-this.offset-n.height<0?this.offset-r.top+"px":"auto",t.right="auto",t.bottom=r.bottom-r.top-this.offset+"px",t.left=(r.right-r.left-o.offsetWidth)/2+"px";break;case"up-right":t.top=this.constrain&&r.top-this.offset-n.height<0?this.offset-r.top+"px":"auto",t.right="auto",t.bottom=r.bottom-r.top-this.offset+"px",t.left="0";break;case"up-left":t.top=this.constrain&&r.top-this.offset-n.height<0?this.offset-r.top+"px":"auto",t.right="0",t.bottom=r.bottom-r.top-this.offset+"px",t.left="auto";break;case"right":case"right-center":t.top=(r.bottom-r.top-o.offsetHeight)/2+"px",t.right="auto",t.bottom="auto",t.left=r.right-r.left+this.offset+"px";break;case"right-down":t.top="0",t.right="auto",t.bottom="auto",t.left=r.right-r.left+this.offset+"px";break;case"right-up":t.top="auto",t.right="auto",t.bottom="0",t.left=r.right-r.left+this.offset+"px";break;case"left":case"left-center":t.top=(r.bottom-r.top-o.offsetHeight)/2+"px",t.right=r.right-r.left+this.offset+"px",t.bottom="auto",t.left="auto";break;case"left-down":t.top="0",t.right=r.right-r.left+this.offset+"px",t.bottom="auto",t.left="auto";break;case"left-up":t.top="auto",t.right=r.right-r.left+this.offset+"px",t.bottom="0",t.left="auto"}},e.prototype.setDirectionClass=function(t,e){var n,r={"place-left":!1,"place-right":!1,"place-up":!1,"place-down":!1};t.setCSSState(I({},r,(n={},n["place-"+e]=!0,n)))},e.prototype.measureNaturalDropdownSize=function(t,e){var n=e.el,r={width:n.offsetWidth,height:n.offsetHeight};if(this.onMeasureDropdownNaturalSize){var o=this.onMeasureDropdownNaturalSize(t,e);Object.assign(r,o)}return r},e.prototype.findOptimalPlacement=function(t,e,n){for(var r,o=this.placementOrder.split(" "),i=n,s={},a=E.getViewportSize(),l=0;l<o.length;l++){var u=o[l];r||(r=u);var c=u.split("-"),p=c[0],h=c[1]||"center";s[u]=0;var d=!0;switch(p){case"down":s[u]+=3*Math.min(1,(a.height-e.bottom-this.offset)/t.height);break;case"up":s[u]+=3*Math.min(1,(e.top-this.offset)/t.height);break;case"right":s[u]+=e.right+t.width+this.offset<a.width?3:0,d=!1;break;case"left":s[u]+=e.left-t.width-this.offset>=0?3:0,d=!1}switch(h){case"center":d?(s[u]+=(e.right+e.left-t.width)/2>=0?1:0,s[u]+=(e.right+e.left+t.width)/2<a.width?1:0):(s[u]+=(e.bottom+e.top-t.height)/2>=0?1:0,s[u]+=(e.bottom+e.top+t.height)/2<a.height?1:0);break;case"right":s[u]+=e.left+t.width<a.width?2:0;break;case"left":s[u]+=e.right-t.width>=0?2:0;break;case"up":s[u]+=e.bottom-t.height>0?2:0;break;case"down":s[u]+=e.top+t.height<a.height?2:0}}i in s||(i=r);for(var f in s)s[f]>s[i]&&(i=f);return this.touchFriendly&&s[i]<5?"screen-center":i},e.prototype.handleKeyDown=function(t,e){switch(t.keyCode){case 27:var n=E.findFirst(this.relatedElement,E.isFocusable);n&&n.focus(),t.stopPropagation(),t.preventDefault()}this.onKeyDown&&this.onKeyDown(t,e)},e.prototype.renderContents=function(e,n){var r=this.CSS,o=this.baseClass;if(!this.arrow)return t.prototype.renderContents.call(this,e,n);var i=[].concat(t.prototype.renderContents.call(this,e,n));return i.push(S.VDOM.createElement("div",{key:"arrow-border",className:r.element(o,"arrow-border")}),S.VDOM.createElement("div",{key:"arrow-back",className:r.element(o,"arrow-fill")})),i},e}(L);H.prototype.offset=0,H.prototype.baseClass="dropdown",H.prototype.placement=void 0,H.prototype.matchWidth=!0,H.prototype.placementOrder="up down right left",H.prototype.placement=null,H.prototype.constrain=!1,H.prototype.positioning="fixed",H.prototype.touchFriendly=!1,H.prototype.arrow=!1,H.prototype.pad=!1,S.Widget.alias("dropdown",H),W.registerPrototype("cx/widgets/Dropdown",H);var U=function(t){function e(){return V(this,e),N(this,t.apply(this,arguments))}return P(e,t),e.prototype.declareData=function(){var e;(e=t.prototype.declareData).call.apply(e,[this].concat(Array.prototype.slice.call(arguments),[{text:void 0,title:void 0,alwaysVisible:void 0}]))},e.show=function(t,n,r,o){"string"==typeof n&&(n={items:n});var i=S.Widget.create({type:e,relatedElement:r},n);return i.open(t,i,o)},e.prototype.renderContents=function(e,n){var r=n.data,o=this.CSS,i=this.baseClass;return[r.title&&S.VDOM.createElement("div",{key:"title",className:o.element(i,"title")},r.title),r.text].concat(t.prototype.renderContents.call(this,e,n))},e.prototype.overlayDidMount=function(e,n){var r=this;this.pipeMouseTrack&&this.pipeMouseTrack(function(t){n.mousePosition={x:t.clientX,y:t.clientY},r.updateDropdownPosition(e,n)}),t.prototype.overlayDidMount.call(this,e,n)},e.prototype.overlayWillUnmount=function(e,n){t.prototype.overlayWillUnmount.call(this,e,n),this.pipeMouseTrack&&this.pipeMouseTrack(null)},e}(H);S.Widget.alias("tooltip",U),U.prototype.baseClass="tooltip",U.prototype.offset=8,U.prototype.placementOrder="right up down left",U.prototype.animate=!0,U.prototype.destroyDelay=200,U.prototype.matchWidth=!1,U.prototype.trackMouse=!1,U.prototype.touchFriendly=!1,U.prototype.arrow=!0;var z=new WeakMap,q=function(){function t(e,n){V(this,t),this.instance=n,this.element=e}return t.prototype.check=function(t,e){var n=this.instance,r=n.widget,o=n.data;if(r.errorTooltipsEnabled&&o.error&&(!r.suppressErrorTooltipsUntilVisited||t&&t.visited)){var i=I({},o.errorTooltip,{items:o.error,mod:"error"});this.show("error",i,o.error,e)}else o.tooltip?this.show("info",o.tooltip,o.tooltip,e):this.destroy()},t.prototype.show=function(t,e,n,r){var o=this;return this.dismiss&&this.type==t&&this.test==n?void(r&&this.trackMouse&&this.trackMouse(r)):(this.destroy(),this.type=t,this.test=n,this.mouseTrap=e.mouseTrap,this.alwaysVisible=e.alwaysVisible,this.mouseTrap&&!this.alwaysVisible&&(e=I({},e,{onMouseEnter:function(){o.mouseTrapped=!0},onMouseLeave:function(){o.destroy()}})),e.trackMouse&&(e.pipeMouseTrack=function(t){o.trackMouse=t}),this.dismiss=U.show(this.instance.store,e,this.element),z.set(this.element,this),void E.Debug.log(E.tooltipsFlag,"show",this.element,this.instance))},t.prototype.onElementMouseLeave=function(){var t=this;this.mouseTrap?setTimeout(function(){t.mouseTrapped||t.destroy()},200):this.alwaysVisible||this.destroy()},t.prototype.onComponentWillReceiveProps=function(t){var e=this.instance.data;(this.dismiss||e.tooltip&&e.tooltip.alwaysVisible||e.error&&e.errorTooltip&&e.errorTooltip.alwaysVisible)&&this.check(t)},t.prototype.onComponentDidMount=function(t){var e=this.instance.data;(e.tooltip&&e.tooltip.alwaysVisible||e.error&&e.errorTooltip&&e.errorTooltip.alwaysVisible)&&this.check(t)},t.prototype.destroy=function(){this.dismiss&&(E.Debug.log(E.tooltipsFlag,"hide",this.element,this.instance),z.get(this.element)==this&&z.delete(this.element),this.dismiss(),delete this.dismiss)},t}(),Y=function(t){return 0==t.indexOf("data-")&&t.substring(5)},G={"a.href":!0,"img.src":!0},Q=function(t){function e(){return V(this,e),N(this,t.apply(this,arguments))}return P(e,t),e.prototype.init=function(){this.innerText&&(this.text=this.innerText),this.html&&(this.innerHtml=this.html)},e.prototype.declareData=function(){var e,n,r=this,o={text:void 0,innerHtml:void 0,tooltip:{structured:!0},attrs:{structured:!0},data:{structured:!0}};this.urlAttributes=[],this.jsxAttributes&&this.jsxAttributes.forEach(function(t){G[r.tag+"."+t]&&r.urlAttributes.push(t),(n=Y(t))?(r.data||(r.data={}),r.data[n]=r[t]):(n=r.isValidHtmlAttribute(t))&&!o.hasOwnProperty(n)&&(0==n.indexOf("on")?(r.events||(r.events={}),r.events[n]=r[t]):(r.attrs||(r.attrs={}),r.attrs[n]=r[t]))}),0==this.urlAttributes.length&&delete this.urlAttributes,(e=t.prototype.declareData).call.apply(e,[this].concat(Array.prototype.slice.call(arguments),[o]))},e.prototype.isValidHtmlAttribute=function(t){switch(t){case"layout":case"class":case"className":case"style":case"controller":case"outerLayout":case"items":case"children":case"visible":case"if":case"mod":case"putInto":case"contentFor":case"trimWhitespace":case"preserveWhitespace":case"ws":case"plainText":case"vertical":case"memoize":case"onInit":case"onExplore":case"html":case"innerText":return!1;default:if(Y(t))return!1}return t},e.prototype.init=function(){this.html&&(this.innerHtml=this.html),this.innerText&&(this.text=this.innerText),this.style=E.parseStyle(this.style),t.prototype.init.call(this)},e.prototype.prepareData=function(e,n){var r=n.data;this.urlAttributes&&r.attrs&&this.urlAttributes.forEach(function(t){"string"==typeof r.attrs[t]&&(r.attrs[t]=S.Url.resolve(r.attrs[t]))}),t.prototype.prepareData.call(this,e,n)},e.prototype.attachProps=function(t,e,n){Object.assign(n,this.extraProps)},e.prototype.render=function(t,e,n){var r=this;if(this.events&&!e.events){e.events={};var o=function(){var t=i;e.events[t]=function(n){return r.events[t].call(r,n,e)}};for(var i in this.events)o()}var s,a=e.data,l=e.events,u=Object.assign({key:n,className:a.classNames,style:a.style},a.attrs,l);return"undefined"!=typeof a.text?s=a.text:"string"==typeof a.innerHtml?u.dangerouslySetInnerHTML={__html:a.innerHtml}:(s=this.renderChildren(t,e),s&&Array.isArray(s)&&0==s.length&&(s=void 0)),u.children=s,this.attachProps(t,e,u),this.memoize||a.tooltip?S.VDOM.createElement(X,{key:n,tag:this.tag,props:u,instance:e}):S.VDOM.createElement(this.tag,u,u.children)},e}(S.PureContainer);Q.prototype.tag="div",Q.prototype.styled=!0;var X=function(t){function e(){return V(this,e),N(this,t.apply(this,arguments))}return P(e,t),e.prototype.shouldComponentUpdate=function(t){return t.instance.shouldUpdate},e.prototype.render=function(){var t=this,e=this.props,n=e.tag,r=e.props,o=e.instance,i=o.data;if(r.ref=function(e){t.el=e},i.tooltip){var s=r.onMouseLeave,a=r.onMouseMove;r.onMouseLeave=function(t){p(t,o),s&&s(t)},r.onMouseMove=function(t){c(t,o),a&&a(t)}}return S.VDOM.createElement(n,r,r.children)},e.prototype.componentWillUnmount=function(){h(this.el,this.props.instance)},e.prototype.componentWillReceiveProps=function(t){d(this.el,t.instance)},e.prototype.componentDidMount=function(){f(this.el,this.props.instance)},e}(S.VDOM.Component),J=S.Widget.factory;S.Widget.factory=function(t,e,n){var r="undefined"==typeof t?"undefined":F(t);if("undefined"==r)return E.Console.log("Creating a widget of unknown type.",e,n),new Q(Object.assign({},e,n));if("function"==r){var o=Object.assign({},e,n),i=o.children;return delete o.children,new Q(I({},o,{tag:t,items:i}))}return J.call(S.Widget,t,e,n)},S.Widget.alias("html-element",Q);var Z=function(t){function e(){return V(this,e),N(this,t.apply(this,arguments))}return P(e,t),e.prototype.declareData=function(){var e;(e=t.prototype.declareData).call.apply(e,[this].concat(Array.prototype.slice.call(arguments),[{name:void 0}]))},e.prototype.explore=function(e,n,r){var o=this;n.content=null;var i=e.content&&e.content[r.name];i?this.setContent(e,n,i):(e.contentPlaceholder||(e.contentPlaceholder={}),e.contentPlaceholder[r.name]=function(t){o.setContent(e,n,t)}),t.prototype.explore.call(this,e,n)},e.prototype.prepare=function(e,n){n.content?n.content.shouldUpdate&&(n.shouldUpdate=!0):t.prototype.prepare.call(this,e,n)},e.prototype.setContent=function(t,e,n){e.content=n,n.pure||(e.pure=!1),n.shouldUpdate&&(e.shouldUpdate=!0)},e.prototype.cleanup=function(e,n){n.content||t.prototype.cleanup.call(this,e,n)},e.prototype.render=function(e,n,r){var o=n.content;if(o){o.shouldRenderContent=!0;var i=o.render(e);return o.shouldRenderContent=!1,i}return t.prototype.render.call(this,e,n,r)},e}(S.PureContainer);Z.prototype.name="body",S.Widget.alias("content-placeholder",Z);var tt=1e4,et=function(){function t(){V(this,t)}return t.next=function(){return++tt},t}(),nt={},rt=null,ot=function(){function t(){V(this,t)}return t.register=function(t,e){var n=this;return nt[t]=e,function(e){return n.render(t,e)}},t.unregister=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];e.forEach(function(t){delete nt[t]})},t.render=function(t,e){return"function"==typeof t?t(e):nt[t]?nt[t](e):rt?rt(t,e):null},t.clear=function(){nt={}},t.registerFactory=function(t){rt=t},t}();ot.register("close",function(t){return S.VDOM.createElement("svg",I({},t,{viewBox:"0 0 32 32"}),S.VDOM.createElement("path",{fill:"currentColor",strokeWidth:"1",stroke:"currentColor",d:"M17.8 16l9.84-9.84c.48-.48.48-1.2 0-1.68s-1.2-.48-1.68 0l-9.84 9.84L6.04 4.36c-.48-.48-1.2-.48-1.68 0s-.48 1.2 0 1.68L14.32 16l-9.96 9.96c-.48.48-.48 1.2 0 1.68s1.2.48 1.68 0L16 17.68l9.96 9.96c.48.48 1.2.48 1.68 0s.48-1.2 0-1.68L17.8 16z"}),"/>")});var it=function(t){function e(){return V(this,e),N(this,t.apply(this,arguments))}return P(e,t),e.prototype.declareData=function(){var e;return(e=t.prototype.declareData).call.apply(e,[this].concat(Array.prototype.slice.call(arguments),[{title:void 0,closable:void 0}]))},e.prototype.initComponents=function(){var e;return(e=t.prototype.initComponents).call.apply(e,[this].concat(Array.prototype.slice.call(arguments),[{header:S.Widget.create(this.header||{type:Z,name:"header"}),footer:S.Widget.create(this.footer||{type:Z,name:"footer"}),close:this.closable&&S.Widget.create(ct,{mod:"hollow",dismiss:!0,icon:"close",style:"margin-left: auto"})}]))},e.prototype.explore=function(e,n){var r=this;y(e,"header",function(){y(e,"footer",function(){t.prototype.explore.call(r,e,n)})})},e.prototype.renderHeader=function(t,e,n){var r=e.data,o=[];if(r.title&&o.push(r.title),e.components){var i=S.getContent(e.components.header&&e.components.header.render(t,n));i&&o.push(i),r.closable&&e.components.close&&o.push(S.getContent(e.components.close.render(t)))}return o},e.prototype.renderFooter=function(t,e,n){return S.getContent(e.components&&e.components.footer&&e.components.footer.render(t,n))},e.prototype.render=function(t,e,n){var r=this.renderHeader(t,e,"header"),o=this.renderFooter(t,e,"footer");return S.VDOM.createElement(st,{key:n,instance:e,header:r,footer:o},this.renderContents(t,e))},e}(L);it.prototype.baseClass="window",it.prototype.closable=!0,it.prototype.resizable=!1,it.prototype.autoFocus=!0,it.prototype.focusable=!0,S.Widget.alias("window",it);var st=function(t){function e(){return V(this,e),N(this,t.apply(this,arguments))}return P(e,t),e.prototype.renderOverlayBody=function(){var t=this,e=this.props.instance.widget,n=e.CSS,r=e.baseClass,o=null;if(this.el){var i=0;this.headerEl&&(i+=this.headerEl.offsetHeight),this.footerEl&&(i+=this.footerEl.offsetHeight),o={height:"calc(100% - "+i+"px"}}var s=void 0,a=void 0;this.props.header.length>0&&(s=S.VDOM.createElement("header",{key:"header",ref:function(e){t.headerEl=e},className:n.element(r,"header"),onMouseDown:this.onHeaderMouseDown.bind(this),onTouchStart:this.onHeaderMouseDown.bind(this)},this.props.header)),this.props.footer&&(a=S.VDOM.createElement("footer",{key:"footer",ref:function(e){t.footerEl=e},className:n.element(r,"footer")},this.props.footer));var l=S.VDOM.createElement("div",{key:"body",ref:function(e){t.bodyEl=e},className:n.element(e.baseClass,"body"),style:o},this.props.children);return[s,l,a]},e.prototype.getOverlayCssClass=function(){var e=t.prototype.getOverlayCssClass.call(this);return this.state.active&&(e+=" cxs-active"),e},e.prototype.onFocusIn=function(){var e=this;t.prototype.onFocusIn.call(this),this.state.active||this.setState({active:!0},function(){e.setZIndex(et.next())})},e.prototype.onFocusOut=function(){t.prototype.onFocusOut.call(this),this.state.active&&this.setState({active:!1})},e.prototype.onHeaderMouseDown=function(t){this.startMoveOperation(t),t.stopPropagation()},e}(_);st.prototype.focusable=!0;var at=function(){function t(){V(this,t)}return t.alert=function(t){return"string"==typeof t&&(t={message:t}),new Promise(function(e){var n=function(n,r){t.callback&&t.callback()===!1||(r.parentOptions.dismiss(),e())},r=S.Widget.create({$type:it,title:t.title,header:t.header,mod:"alert",modal:!0,center:!0,resizable:!1,closable:!1,jsxAttributes:["title","header","mod","modal","center","resizable","closable"],children:["\n               ",t.message,"\n               ",{$type:Q,tag:"div",putInto:"footer",jsxAttributes:["putInto"],children:["\n                  ",{$type:ct,onClick:n,jsxAttributes:["onClick"],children:["OK"]},"\n               "]},"\n            "]});r.open(t.store)})},t.yesNo=function(t){return"string"==typeof t&&(t={message:t}),new Promise(function(e,n){var r=function(n){return function(r,o){t.callback&&t.callback(n)===!1||(o.parentOptions.dismiss(),e("yes"==n?n:n))}},o=S.Widget.create({$type:it,title:t.title,header:t.header,mod:"alert",modal:!0,center:!0,resizable:!1,closable:!1,jsxAttributes:["title","header","mod","modal","center","resizable","closable"],children:["\n               ",t.message,"\n               ",{$type:Q,tag:"div",putInto:"footer",jsxAttributes:["putInto"],children:["\n                  ",{$type:ct,onClick:r("yes"),jsxAttributes:["onClick"],children:["Yes"]},"\n                  "," ","\n                  ",{$type:ct,onClick:r("no"),jsxAttributes:["onClick"],children:["No"]},"\n               "]},"\n            "]});o.open(t.store)})},t}(),lt=function(t){return t.stopPropagation()},ut=function(t){return t.preventDefault()},ct=function(t){function e(){return V(this,e),N(this,t.apply(this,arguments))}return P(e,t),e.prototype.declareData=function(){var e;(e=t.prototype.declareData).call.apply(e,[this].concat(Array.prototype.slice.call(arguments),[{confirm:{structured:!0}}]))},e.prototype.attachProps=function(e,n,r){var o=this;t.prototype.attachProps.call(this,e,n,r),r.onMouseDown||(r.onMouseDown=lt),r.onTouchStart||(r.onTouchStart=lt),this.dismiss&&(r.onClick=function(){n.parentOptions&&"function"==typeof n.parentOptions.dismiss&&n.parentOptions.dismiss()}),r.type="button",delete r.confirm,delete r.dismiss;var i=void 0,s=n.data;s.confirm&&(i=r.onClick,r.onClick=function(t){t.stopPropagation(),at.yesNo(s.confirm).then(function(t){"yes"==t&&i.call(o,null)})});var a=void 0;if(this.icon){var l=ot.render(this.icon,{key:"icon",className:this.CSS.element(this.baseClass,"icon")});a=S.getContentArray(r.children),r.children=[l].concat(a),r.className=this.CSS.expand(r.className,this.CSS.state("icon"),0==a.length&&this.CSS.state("empty"))}},e}(Q);ct.prototype.tag="button",ct.prototype.baseClass="button",ct.prototype.icon=!1,S.Widget.alias("button",ct);var pt=function(t){function e(){return V(this,e),N(this,t.apply(this,arguments))}return P(e,t),e.prototype.declareData=function(){var e;(e=t.prototype.declareData).call.apply(e,[this].concat(Array.prototype.slice.call(arguments),[{value:void 0}]))},e.prototype.explore=function(e,n){e.documentTitle||(e.documentTitle={activeInstance:n,title:""}),n.data.value&&(this.append?e.documentTitle.title+=n.data.value:(e.documentTitle.title=n.data.value,e.documentTitle.activeInstance=n)),t.prototype.explore.call(this,e,n)},e.prototype.prepare=function(e,n){t.prototype.prepare.call(this,e,n),e.documentTitle.activeInstance==n&&(document.title=e.documentTitle.title)},e.prototype.render=function(){return null},e}(S.Widget);pt.prototype.pure=!1,pt.prototype.append=!0,S.Widget.alias("document-title",pt);var ht=function(t){function e(){return V(this,e),N(this,t.apply(this,arguments))}return P(e,t),e.prototype.getRecords=function(){throw new Error("Abstract method")},e.prototype.setFilter=function(){},e.prototype.sort=function(){},e}(S.Component);ht.prototype.recordName="$record",ht.prototype.indexName="$index",ht.prototype.immutable=!1;var dt=function(t){function e(){return V(this,e),N(this,t.apply(this,arguments))}return P(e,t),e.prototype.init=function(){this.map=new WeakMap},e.prototype.getRecords=function(t,e,n,r){return this.mapRecords(t,e,n,r,this.recordsBinding)},e.prototype.mapRecords=function(t,e,n,r,o){var i=this,s=[],a=r&&o;return Array.isArray(n)&&n.forEach(function(t,e){if(!i.filterFn||i.filterFn(t)){var n=i.map.get(t);if(a)n?(n.setStore(r),n.setIndex(e)):n=new M.ExposedRecordView({store:r,collectionBinding:o,itemIndex:e,recordName:i.recordName,indexName:i.indexName,immutable:i.immutable});else{var l;n||(n=new M.ReadOnlyDataView({store:r,data:(l={},l[i.recordName]=t,l[i.indexName]=e,l),immutable:i.immutable}))}"object"==("undefined"==typeof t?"undefined":F(t))&&i.map.set(t,n),s.push({store:n,index:e,data:t,type:"data",key:i.keyField?t[i.keyField]:e})}}),this.sorter&&(s=this.sorter(s)),s},e.prototype.setFilter=function(t){this.filterFn=t},e.prototype.buildSorter=function(t){var e=this;Array.isArray(t)&&t.length>0?t.every(function(t){return t.field&&null==t.value})?this.sorter=M.sorter(t.map(function(t){return t.field?{value:{bind:t.field},direction:t.direction}:t}),function(t){return t.data}):this.sorter=M.sorter(t.map(function(t){return t.field&&null==t.value?{value:{bind:e.recordName+"."+t.field},direction:t.direction}:t}),function(t){return t.store.getData()}):this.sorter=null},e.prototype.sort=function(t){this.buildSorter(t)},e}(ht),ft=function(t){function e(){return V(this,e),N(this,t.apply(this,arguments))}return P(e,t),e.prototype.init=function(){this.adapter=dt.create(this.adapter||dt,{recordName:this.recordName,indexName:this.indexName,recordsBinding:this.records&&this.records.bind&&M.Binding.get(this.records.bind)}),this.child=S.Widget.create({type:S.PureContainer,layout:this.layout,children:this.children,styled:!0,class:this.itemClass,className:this.itemClassName,style:this.itemStyle}),delete this.children,this.selection=S.Selection.create(this.selection,{records:this.records}),t.prototype.init.call(this)},e.prototype.declareData=function(){var e,n=this.selection.configureWidget(this);(e=t.prototype.declareData).call.apply(e,[this,n,{records:void 0,sorters:void 0,filterParams:{structured:!0},style:{structured:!0},itemStyle:{structured:!0},class:{structured:!0},className:{structured:!0},emptyText:void 0}].concat(Array.prototype.slice.call(arguments)))},e.prototype.prepareData=function(e,n){var r=this,o=n.data;this.adapter.sort(o.sorters),this.adapter.setFilter(this.filter&&function(t){return r.filter(t,o.filterParams)}),n.mappedRecords=this.adapter.getRecords(e,n,o.records,n.store),o.stateMods=Object.assign(o.stateMods||{},{selectable:!this.selection.isDummy||this.onItemClick,empty:0==n.mappedRecords.length}),t.prototype.prepareData.call(this,e,n)},e.prototype.explore=function(t,e,n){var r=this,o=[],i=this.selection.getIsSelectedDelegate(e.store);e.mappedRecords.forEach(function(n){var s=e.getChild(t,r.child,n.key+":",n.store);s.record=n,s.explore(t)&&o.push(s);var a=i(n.data,n.index);s.selected!=a&&(s.selected=a,s.shouldUpdate=!0)}),e.instances=o},e.prototype.prepare=function(t,e){e.instances.forEach(function(e){return e.prepare(t)})},e.prototype.render=function(t,e,n){var r=e.instances.map(function(e){return{instance:e,key:e.record.key,content:S.getContent(e.render(t))}});return S.VDOM.createElement(yt,{key:n,instance:e,items:r,selectable:!this.selection.isDummy||this.onItemClick})},e.prototype.cleanup=function(t,e){e.instances.forEach(function(e){return e.cleanup(t)})},e}(S.Widget);ft.prototype.recordName="$record",ft.prototype.indexName="$index",ft.prototype.baseClass="list",ft.prototype.focusable=!0,ft.prototype.focused=!1,ft.prototype.itemPad=!0,S.Widget.alias("list",ft);var yt=function(t){function e(n){V(this,e);var r=N(this,t.call(this,n)),o=n.instance.widget.focused;return r.state={cursor:o&&n.selectable?0:-1,focused:o},r}return P(e,t),e.prototype.shouldComponentUpdate=function(t,e){return t.instance.shouldUpdate||e!=this.state},e.prototype.componentDidMount=function(){var t=this.props.instance,e=t.widget;e.pipeKeyDown&&e.pipeKeyDown(this.handleKeyDown.bind(this),this.props.instance)},e.prototype.componentWillReceiveProps=function(t){this.setState({cursor:Math.max(Math.min(this.state.cursor,t.items.length-1),this.state.focused?0:-1)})},e.prototype.componentWillUnmount=function(){var t=this.props.instance,e=t.widget;S.offFocusOut(this),e.pipeKeyDown&&e.pipeKeyDown(null,t)},e.prototype.render=function(){var t=this,e=this.props,n=e.instance,r=e.items,o=e.selectable,i=n.data,s=n.widget,a=s.CSS,l=s.baseClass,u=a.parseStyle(i.itemStyle),c=r.length>0&&r.map(function(e,n){var r=e.instance,o=r.data,i=r.selected,c=a.element(l,"item",{selected:i,cursor:n==t.state.cursor,pad:s.itemPad});return S.VDOM.createElement("li",{key:e.key,className:a.expand(c,o.classNames),style:u,onClick:function(n){return t.handleItemClick(n,e.instance)},onMouseEnter:function(e){t.moveCursor(n)}},e.content)});return!c&&i.emptyText&&(c=S.VDOM.createElement("li",{className:a.element(l,"empty-text")},i.emptyText)),S.VDOM.createElement("ul",{ref:function(e){t.el=e},className:a.expand(i.classNames,a.state({focused:this.state.focused})),style:i.style,tabIndex:s.focusable&&o&&r.length>0?0:null,onKeyDown:this.handleKeyDown.bind(this),onMouseLeave:this.handleMouseLeave.bind(this),onFocus:this.onFocus.bind(this),onBlur:this.onBlur.bind(this)},c)},e.prototype.moveCursor=function(t,e,n){var r=this;this.props.selectable&&(null!=e&&this.state.focused!=e&&this.setState({focused:e||this.props.instance.widget.focused}),this.setState({cursor:t},function(){if(n){var e=r.el.children[t];E.scrollElementIntoView(e)}}))},e.prototype.showCursor=function(t){if(this.state.cursor==-1){var e=this.props.items.findIndex(function(t){return t.instance.selected});this.moveCursor(e!=-1?e:0,t)}},e.prototype.onFocus=function(){var t=this;S.FocusManager.nudge(),this.showCursor(!0);var e=this.props.instance.widget;e.focused||S.oneFocusOut(this,this.el,function(){t.moveCursor(-1,!1)}),this.setState({focused:!0})},e.prototype.onBlur=function(){S.FocusManager.nudge()},e.prototype.handleMouseLeave=function(){this.state.focused||this.moveCursor(-1)},e.prototype.handleItemClick=function(t,e){t.stopPropagation();var n=this.props.instance.widget;
if((!n.onItemClick||n.onItemClick(t,e)!==!1)&&this.props.selectable){var r=e.store,o=e.record,i=o.data,s=o.index;n.selection.select(r,i,s,{toggle:t.ctrlKey})}},e.prototype.handleKeyDown=function(t){var e=this.props,n=e.instance,r=e.items;if(!this.onKeyDown||this.onKeyDown(t,n)!==!1)switch(t.keyCode){case E.KeyCode.enter:var o=r[this.state.cursor];o&&this.handleItemClick(t,o.instance);break;case E.KeyCode.down:this.state.cursor+1<r.length&&(this.moveCursor(this.state.cursor+1,!0,!0),t.stopPropagation(),t.preventDefault());break;case E.KeyCode.up:this.state.cursor>0&&(this.moveCursor(this.state.cursor-1,!0,!0),t.stopPropagation(),t.preventDefault())}},e}(S.VDOM.Component),mt=function(t){function e(){return V(this,e),N(this,t.apply(this,arguments))}return P(e,t),e.prototype.init=function(){t.prototype.init.call(this),this.storageBinding=M.Binding.get(this.storage.bind)},e.prototype.initInstance=function(t,e){e.store=new M.ExposedValueView({store:e.store,containerBinding:this.storageBinding,key:null,recordName:this.recordName,immutable:this.immutable}),e.setStore=function(t){e.store.setStore(t)}},e.prototype.declareData=function(){var e;(e=t.prototype.declareData).call.apply(e,[this,{storage:void 0,key:void 0}].concat(Array.prototype.slice.call(arguments)))},e.prototype.prepareData=function(e,n){var r=n.store,o=n.data;r.getKey()!==o.key&&(n.store=new M.ExposedValueView({store:r,containerBinding:this.storageBinding,key:o.key,recordName:this.recordName,immutable:this.immutable}),n.clearChildrenCache()),t.prototype.prepareData.call(this,e,n)},e}(S.PureContainer);mt.prototype.recordName="$page",mt.prototype.immutable=!1,S.Widget.alias("sandbox",mt);var gt=function(t){function e(){return V(this,e),N(this,t.apply(this,arguments))}return P(e,t),e.prototype.init=function(){t.prototype.init.call(this),this.records&&this.records.bind&&(this.recordsBinding=M.Binding.get(this.records.bind)),this.adapter=dt.create(dt,{recordName:this.recordName,indexName:this.indexName,keyField:this.keyField,immutable:this.immutable})},e.prototype.declareData=function(){var e;(e=t.prototype.declareData).call.apply(e,[this,{records:void 0,sorters:void 0,filterParams:{structured:!0}}].concat(Array.prototype.slice.call(arguments)))},e.prototype.prepareData=function(e,n){var r=this;t.prototype.prepareData.call(this,e,n),n.repeatable||!function(){var t=n.data;r.adapter.sort(t.sorters),r.adapter.setFilter(r.filter&&function(e){return r.filter(e,t.filterParams)}),n.mappedRecords=r.adapter.mapRecords(e,n,t.records,n.store,r.recordsBinding)}()},e.prototype.explore=function(e,n,r){var o=this;if(n.repeatable)return t.prototype.explore.call(this,e,n);var i=[];n.mappedRecords.forEach(function(t){var r=n.getChild(e,o,t.key+":",t.store);r.repeatable=!0,r.record=t,o.cached&&r.cached&&r.cached.record&&r.cached.record.data==t.data?(i.push(r),r.shouldUpdate=!1):r.explore(e)&&i.push(r)}),n.instances=i},e.prototype.prepare=function(e,n){return n.repeatable?t.prototype.prepare.call(this,e,n):void n.instances.forEach(function(t){t.prepare(e),t.shouldUpdate&&(n.shouldUpdate=!0)})},e.prototype.render=function(e,n,r){return n.repeatable?t.prototype.render.call(this,e,n,r):n.instances.map(function(t){return t.render(e,r+":"+t.record.key)})},e.prototype.cleanup=function(e,n){return n.repeatable?(n.cached.record=n.record,void t.prototype.cleanup.call(this,e,n)):void n.instances.forEach(function(t){return t.cleanup(e)})},e.prototype.add=function(e){"string"!=typeof e&&t.prototype.add.call(this,e)},e}(S.PureContainer);gt.prototype.recordName="$record",gt.prototype.indexName="$index",gt.prototype.cached=!1,gt.prototype.immutable=!1,S.Widget.alias("repeater",gt);var vt=1e3,bt=function(){function t(e,n){V(this,t),this.widget=e,this.key=n,this.id=String(++vt)}return t.prototype.setStore=function(t){this.store=t},t.prototype.init=function(t){if(this.widget.initialized||(this.widget.init(),this.widget.initialized=!0),this.cached={},this.dataSelector||(this.widget.selector.init(this.store),this.dataSelector=this.widget.selector.create()),this.widget.controller&&(this.controller=S.Controller.create(this.widget.controller,{widget:this.widget,instance:this,store:this.store})),this.widget.helpers){this.helpers={};for(var e in this.widget.helpers){var n=this.widget.helpers[e];if(n){var r=this.getChild(t,n,"helper-"+e);this.helpers[e]=r}}}if(this.widget.components){this.components={};for(var e in this.widget.components){var o=this.widget.components[e];if(o){var r=this.getChild(t,o,"helper-"+e);this.components[e]=r}}}this.widget.initInstance(t,this),this.widget.initState(t,this),this.initialized=!0},t.prototype.explore=function(t){this.initialized||this.init(t);var e=this.dataSelector(this.store.getData());if(this.visible=this.widget.checkVisible(t,this,e),!this.visible)return delete this.instanceCache,!1;this.instanceCache&&this.instanceCache.mark();var n=t.controller;if(this.parentOptions=t.parentOptions,!this.controller&&t.controller&&(this.controller=t.controller),this.controller&&(this.widget.controller&&this.controller.prepare(t),t.controller=this.controller),this.pure=this.widget.pure,this.rawData=e,this.shouldUpdate=this.rawData!==this.cached.rawData||this.cached.state!==this.state||this.cached.widgetVersion!==this.widget.version||this.cached.globalCacheIdentifier!==E.GlobalCacheIdentifier.get(),this.widget.memoize||(this.shouldUpdate=!0),this.shouldUpdate&&(this.data=I({},this.rawData),this.widget.prepareData(t,this),E.Debug.log(E.processDataFlag,this.widget)),this.helpers)for(var r in this.helpers)this.helpers[r].explore(t);if(this.widget.explore(t,this,e),this.widget.onExplore&&this.widget.onExplore(t,this),this.widget.isContent){if(t.contentPlaceholder){var o=t.contentPlaceholder[this.widget.putInto];o&&o(this)}t.content||(t.content={}),t.content[this.widget.putInto]=this}if(this.widget.outerLayout){this.outerLayout=this.parent.getChild(t,this.widget.outerLayout,null,this.store),this.shouldRenderContent=!1,t.content||(t.content={});var i=t.content.body;t.content.body=this,this.outerLayout.explore(t),this.outerLayout.shouldUpdate&&(this.shouldUpdate=!0),t.content.body=i}return t.controller=n,this.shouldUpdate&&(this.parent.shouldUpdate=!0),this.pure||(this.parent.pure=!1),!0},t.prototype.prepare=function(t){if(this.visible){if(this.shouldUpdate||!this.pure){if(this.helpers)for(var e in this.helpers){var n=this.helpers[e];n.prepare(t),n.shouldUpdate&&(this.shouldUpdate=!0)}E.Debug.log(E.prepareFlag,this.widget),this.widget.prepare(t,this),this.shouldUpdate&&(this.parent.shouldUpdate=!0)}this.shouldUpdate&&E.Debug.log(E.shouldUpdateFlag,this.widget,this.shouldUpdate),this.outerLayout&&this.widget.outerLayout&&this.outerLayout.prepare(t)}},t.prototype.render=function(t,e){if(this.visible&&(!this.widget.isContent||this.shouldRenderContent)){if(this.outerLayout&&this.widget.outerLayout&&!this.shouldRenderContent)return this.outerLayout.render(t,e);this.cached.rawData=this.rawData,this.cached.state=this.state,this.cached.widgetVersion=this.widget.version,this.cached.visible=!0,this.cached.globalCacheIdentifier=E.GlobalCacheIdentifier.get();var n=this.widget.memoize&&this.shouldUpdate===!1&&this.cached.vdom?this.cached.vdom:m(this.widget.render(t,this,(null!=e?e+"-":"")+this.widget.widgetId));return this.shouldUpdate&&E.Debug.log(E.renderFlag,this.widget,(null!=e?e+"-":"")+this.widget.widgetId),this.widget.memoize&&(this.cached.vdom=n),n}},t.prototype.cleanup=function(t){if(this.visible&&(this.outerLayout&&(this.widget.outerLayout?this.outerLayout.cleanup(t):delete this.outerLayout),!this.pure||this.shouldUpdate)){if(E.Debug.log(E.cleanupFlag,this.widget),this.components)for(var e in this.components)this.components[e].cleanup(t);if(this.controller&&this.controller.cleanup(t),this.widget.cleanup(t,this),this.helpers)for(var e in this.helpers)this.helpers[e].cleanup(t);this.instanceCache&&this.instanceCache.sweep()}},t.prototype.setState=function(t){var e=this.state;if(this.state)for(var n in t)if(this.state[n]!==t[n]){e=!1;break}e||(this.cached.state=this.state,this.state=Object.assign({},this.state,t),this.store.notify())},t.prototype.set=function(t,e){var n=this.widget[t];if(n&&"object"==("undefined"==typeof n?"undefined":F(n)))if(n.set){if("function"==typeof n.set)return n.set(e,this),!0;if("string"==typeof n.set)return this.controller[n.set](e,this),!0}else{if(n.action){var r=n.action(e,this);return this.store.dispatch(r),!0}if(n.bind)return this.store.set(n.bind,e),!0}return!1},t.prototype.replaceState=function(t){this.cached.state=this.state,this.state=t,this.store.notify()},t.prototype.getInstanceCache=function(){return this.instanceCache||(this.instanceCache=new wt(this)),this.instanceCache},t.prototype.clearChildrenCache=function(){delete this.instanceCache},t.prototype.getChild=function(t,e,n,r){return this.getInstanceCache().getChild(e,r||this.store,n)},t.prototype.prepareRenderCleanupChild=function(t,e,n,r){return t.prepareRenderCleanup(e||this.store,r,n,this)},t}(),wt=function(){function t(e){V(this,t),this.children={},this.parent=e,this.marked={}}return t.prototype.getChild=function(t,e,n){var r=(null!=n?n+"-":"")+t.widgetId,o=this.children[r];return o||(o=new bt(t,r),o.parent=this.parent,this.children[r]=o),o.store!=e&&o.setStore(e),this.marked[r]=o,o},t.prototype.mark=function(){this.marked={}},t.prototype.sweep=function(){this.children=this.marked},t}(),xt=function(t){function e(n){V(this,e);var r=N(this,t.call(this,n));if(n.items&&(r.widget=S.Widget.create(n.widget||n.items[0])),!n.parentInstance&&!n.store)throw new Error("Neither store or parentInstance props are provided to the Cx component");return r}return P(e,t),e.prototype.getParentInstance=function(){return this.props.parentInstance?this.props.parentInstance:this.parentInstance?this.parentInstance:void(this.parentInstance=new bt(this.widget,0))},e.prototype.render=function(){if(!this.widget)return null;var t=this.getParentInstance();return t.prepareRenderCleanupChild(this.widget,this.props.store||t.store)},e}(S.VDOM.Component),Dt=function(t){function e(){return V(this,e),N(this,t.apply(this,arguments))}return P(e,t),e.prototype.init=function(){this.tooltip={mouseTrap:!0,title:"Credits",items:{$type:Q,tag:"div",preserveWhitespace:!0,jsxAttributes:["preserveWhitespace"],children:["\n               User interface of this project is implemented using the Cx framework.\n               For more information about Cx, please visit\n               ",{$type:Q,tag:"a",href:"https://cx.codaxy.com/",jsxAttributes:["href"],children:["the Cx product page"]},".\n            "]}},t.prototype.init.call(this)},e.prototype.attachProps=function(t,e,n){n.children=S.VDOM.createElement("svg",null,S.VDOM.createElement("text",{x:"50%",y:"50%",dy:"0.4em"},"Cx"))},e}(Q);Dt.prototype.baseClass="cxcredit",Dt.prototype.tag="div",S.Widget.alias("cx-credit",Dt);var Ct=function(t){function e(){return V(this,e),N(this,t.apply(this,arguments))}return P(e,t),e.prototype.prepareCSS=function(e,n){var r,o=n.data;o.stateMods=I({},o.stateMods,(r={pad:this.pad,spacing:this.spacing},r["align-"+this.align]=this.align,r["justify-"+this.justify]=this.justify,r.wrap=this.wrap,r["target-"+this.target]=!0,r[this.direction]=!0,r)),t.prototype.prepareCSS.call(this,e,n)},e.prototype.render=function(t,e,n){var r=e.data;return S.VDOM.createElement("div",{key:n,className:r.classNames,style:r.style},this.renderChildren(t,e))},e}(S.PureContainer);Ct.prototype.baseClass="flexbox",Ct.prototype.styled=!0,Ct.prototype.direction="row",Ct.prototype.spacing=!1,Ct.prototype.pad=!1,Ct.prototype.wrap=!1,Ct.prototype.align=!1,Ct.prototype.justify=!1,Ct.prototype.align=!1,Ct.prototype.target="any";var kt=function(t){function e(){return V(this,e),N(this,t.apply(this,arguments))}return P(e,t),e}(Ct),St=function(t){function e(){return V(this,e),N(this,t.apply(this,arguments))}return P(e,t),e}(Ct);St.prototype.direction="column";var Et=function(t){function e(){return V(this,e),N(this,t.apply(this,arguments))}return P(e,t),e.prototype.init=function(){this.tag="h"+this.level,t.prototype.init.call(this)},e.prototype.prepareData=function(e,n){var r,o=n.data;o.stateMods=I({},o.stateMods,(r={},r["level-"+this.level]=!0,r)),t.prototype.prepareData.call(this,e,n)},e.prototype.isValidHtmlAttribute=function(e){switch(e){case"level":return!1;default:return t.prototype.isValidHtmlAttribute.call(this,e)}},e}(Q);Et.prototype.level=3,Et.prototype.baseClass="heading";var Mt=function(t){function e(){return V(this,e),N(this,t.apply(this,arguments))}return P(e,t),e.prototype.init=function(){"string"==typeof this.headerStyle&&(this.headerStyle=E.parseStyle(this.headerStyle)),"string"==typeof this.footerStyle&&(this.footerStyle=E.parseStyle(this.footerStyle)),"string"==typeof this.bodyStyle&&(this.bodyStyle=E.parseStyle(this.bodyStyle)),t.prototype.init.call(this)},e.prototype.add=function(e){var n;e&&"header"==e.putInto?this.header=I({},e,{putInto:null}):e&&"footer"==e.putInto?this.footer=I({},e,{putInto:null}):(n=t.prototype.add).call.apply(n,[this].concat(Array.prototype.slice.call(arguments)))},e.prototype.declareData=function(){return t.prototype.declareData.call(this,{headerStyle:{structured:!0},headerClass:{structured:!0},bodyStyle:{structured:!0},bodyClass:{structured:!0},footerStyle:{structured:!0},footerClass:{structured:!0}})},e.prototype.initComponents=function(){t.prototype.initComponents.call(this,{header:this.getHeader(),footer:this.getFooter()})},e.prototype.getHeader=function(){return this.title?S.Widget.create(Et,{text:this.title}):this.header?S.Widget.create(this.header):null},e.prototype.getFooter=function(){return this.footer?S.Widget.create(this.footer):null},e.prototype.prepareData=function(e,n){var r=n.data;r.stateMods=I({},r.stateMods,{pad:this.pad}),t.prototype.prepareData.call(this,e,n)},e.prototype.render=function(t,e,n){var r=e.data,o=e.components,i=void 0,s=void 0,a=this.CSS,l=this.baseClass;return o.header&&(i=S.VDOM.createElement("header",{className:a.expand(a.element(l,"header"),r.headerClass),style:r.headerStyle},S.getContent(o.header.render(t)))),o.footer&&(s=S.VDOM.createElement("footer",{className:a.expand(a.element(l,"footer"),r.footerClass),style:r.footerStyle},S.getContent(o.footer.render(t)))),S.VDOM.createElement("section",{key:n,className:r.classNames,style:r.style},i,S.VDOM.createElement("div",{className:a.expand(a.element(this.baseClass,"body"),r.bodyClass),style:r.bodyStyle},this.renderChildren(t,e)),s)},e}(S.PureContainer);Mt.prototype.styled=!0,Mt.prototype.pad=!0,Mt.prototype.baseClass="section";var Ot=function(t){function e(){return V(this,e),N(this,t.apply(this,arguments))}return P(e,t),e.prototype.init=function(){this.message&&(this.items={type:j,value:this.message}),t.prototype.init.call(this)},e.prototype.declareData=function(){var e;return(e=t.prototype.declareData).call.apply(e,[this].concat(Array.prototype.slice.call(arguments),[{timeout:void 0}]))},e.prototype.prepareData=function(e,n){var r=n.data;r.stateMods=I({},r.stateMods,{pad:this.pad}),t.prototype.prepareData.call(this,e,n)},e.prototype.overlayDidUpdate=function(t,e){var n=e.containerEl||e.props.parentEl;e.state.animated&&(n.style.height=e.el.offsetHeight+"px",n.classList.add(this.CSS.state("live")))},e.prototype.overlayDidMount=function(t,e){var n=t.data;n.timeout>0&&(e.timeoutTimer=setTimeout(function(){t.dismiss()},n.timeout))},e.prototype.overlayWillDismiss=function(t,e){var n=e.containerEl||e.props.parentEl;n.style.height=0,n.classList.remove(this.CSS.state("live"))},e.prototype.overlayWillUnmount=function(t,e){var n=e.containerEl||e.props.parentEl;n.style.height=0,n.classList.remove(this.CSS.state("live")),e.timeoutTimer&&clearTimeout(e.timeoutTimer)},e.prototype.containerFactory=function(){var t,e=document.createElement("div");e.className=this.CSS.element("toaster","item");var n=g(this.placement);return n.el.className=this.CSS.block("toaster",null,(t={},t["placement-"+this.placement]=!0,t)),n.el.insertBefore(e,n.el.firstChild),e},e}(L),Tt={};Ot.prototype.styled=!0,Ot.prototype.pad=!0,Ot.prototype.animate=!0,Ot.prototype.baseClass="toast",Ot.prototype.placement="top",Ot.prototype.destroyDelay=300;var Ft=function(t){function e(){return V(this,e),N(this,t.apply(this,arguments))}return P(e,t),e.prototype.init=function(){t.prototype.init.call(this),this.matcher=new O(this.route)},e.prototype.initInstance=function(e,n){t.prototype.initInstance.call(this,e,n),n.store=new M.ReadOnlyDataView({store:n.store}),n.setStore=function(t){n.store.setStore(t)}},e.prototype.declareData=function(){var e;(e=t.prototype.declareData).call.apply(e,[this].concat(Array.prototype.slice.call(arguments),[{url:void 0}]))},e.prototype.checkVisible=function(e,n,r){return!!r.visible&&(r.url!==n.cached.url&&(n.cached.url=r.url,n.cached.result=this.matcher.match(r.url)),!!n.cached.result&&t.prototype.checkVisible.call(this,e,n,r))},e.prototype.prepareData=function(e,n){var r,o,i=(n.data,n.store),s=n.cached;if((r=t.prototype.prepareData).call.apply(r,[this].concat(Array.prototype.slice.call(arguments))),i.setData((o={},o[this.recordName]=s.result,o)),this.params&&this.params.bind){var a=i.get(this.params.bind);JSON.stringify(a)!=JSON.stringify(s.result)&&i.set(this.params.bind,s.result)}if(this.map)for(var l in result){var u=this.map[l];u&&i.set(u,result[l])}},e}(S.PureContainer);Ft.prototype.recordName="$route",S.Widget.alias("route",Ft);var Vt=function(t){function e(){return V(this,e),N(this,t.apply(this,arguments))}return P(e,t),e.prototype.declareData=function(){var e;(e=t.prototype.declareData).call.apply(e,[this].concat(Array.prototype.slice.call(arguments),[{redirect:void 0}]))},e.prototype.prepareData=function(e,n){var r;(r=t.prototype.prepareData).call.apply(r,[this].concat(Array.prototype.slice.call(arguments)));var o=n.data;o.redirect&&S.History.store?S.History.replaceState({},null,S.Url.resolve(o.redirect)):n.set("url",o.redirect)},e}(Ft);S.Widget.alias("redirect-route",Vt);var At=function(t){function e(){return V(this,e),N(this,t.apply(this,arguments))}return P(e,t),e.prototype.declareData=function(){var e;(e=t.prototype.declareData).call.apply(e,[this,{tab:void 0,value:void 0,disabled:void 0,text:void 0}].concat(Array.prototype.slice.call(arguments)))},e.prototype.prepareData=function(e,n){var r=n.data;r.stateMods={active:r.tab==r.value,disabled:r.disabled,shape:this.shape},t.prototype.prepareData.call(this,e,n)},e.prototype.isValidHtmlAttribute=function(e){switch(e){case"value":case"tab":case"text":case"disabled":return!1;default:return t.prototype.isValidHtmlAttribute.call(this,e)}},e.prototype.attachProps=function(t,e,n){var r=this,o=e.data;o.disabled||(n.href="#",delete n.value,n.onClick=function(t){r.handleClick(t,e)})},e.prototype.handleClick=function(t,e){t.preventDefault(),t.stopPropagation();var n=e.data;n.disabled||e.set("value",n.tab)},e}(Q);At.prototype.baseClass="tab",At.prototype.tag="a",S.Widget.alias("tab",At);var It=function(t){function e(){return V(this,e),N(this,t.apply(this,arguments))}return P(e,t),e.prototype.declareData=function(){var e;(e=t.prototype.declareData).call.apply(e,[this,{disabled:void 0,href:void 0,text:void 0,url:void 0}].concat(Array.prototype.slice.call(arguments)))},e.prototype.prepareData=function(e,n){var r=n.data;r.stateMods={disabled:r.disabled,active:this.isActive(r)},"string"==typeof r.href&&(r.href=S.Url.resolve(r.href)),t.prototype.prepareData.call(this,e,n)},e.prototype.isActive=function(t){switch(this.match){default:case"equal":return t.url==t.href;case"prefix":return t.url&&t.href&&0==t.url.indexOf(t.href)}},e.prototype.render=function(t,e,n){var r=this,o=e.data;return S.VDOM.createElement("a",{key:n,href:o.href,className:o.classNames,style:o.style,tabIndex:this.tabIndex,onClick:function(t){r.handleClick(t,e)}},o.text||this.renderChildren(t,e))},e.prototype.handleClick=function(t,e){var n=e.data;t.preventDefault(),n.disabled||(this.onClick&&this.onClick(t,e),S.History.pushState({},null,n.href)&&(t.stopPropagation(),t.preventDefault()))},e}(Q);It.prototype.baseClass="link",It.prototype.tag="a",It.prototype.match="equal",S.Widget.alias("link",It);var Pt=ot.register("drop-down",function(t){return S.VDOM.createElement("svg",I({},t,{viewBox:"0 0 20 20"}),S.VDOM.createElement("path",{fill:"currentColor",strokeWidth:"0",stroke:"currentColor",d:"M4.516 8.147L10.01 12.5l5.474-4.33-.473-.65-5 3.98-5-4z"}))}),Nt=function(t){function e(){return V(this,e),N(this,t.apply(this,arguments))}return P(e,t),e.prototype.explore=function(e,n){n.horizontal=this.horizontal;var r=e.lastMenu,o=e.lastMenuItem;r&&(n.horizontal=r.horizontal),e.lastMenuItem=this,t.prototype.explore.call(this,e,n),e.lastMenuItem=o},e.prototype.render=function(t,e,n){return S.VDOM.createElement($t,{key:n,instance:e},this.renderChildren(t,e))},e.prototype.add=function(e){var n;e&&"object"==("undefined"==typeof e?"undefined":F(e))&&"dropdown"==e.putInto?(this.dropdown=I({},e),delete this.dropdown.putInto):(n=t.prototype.add).call.apply(n,[this].concat(Array.prototype.slice.call(arguments)))},e.prototype.addText=function(t){this.add({type:Q,tag:"span",text:t})},e}(Q);Nt.prototype.baseClass="menuitem",Nt.prototype.hoverFocusTimeout=200,Nt.prototype.clickToOpen=!1,Nt.prototype.horizontal=!0,Nt.prototype.memoize=!1,Nt.prototype.arrow=!1,Nt.prototype.dropdownOptions=null,Nt.prototype.showCursor=!0,Nt.prototype.pad=!0,S.Widget.alias("submenu",Nt),W.registerPrototype("cx/widgets/MenuItem",Nt);var $t=function(t){function e(n){V(this,e);var r=N(this,t.call(this,n));return r.state={dropdownOpen:!1},r}return P(e,t),e.prototype.shouldComponentUpdate=function(t,e){return t.instance.shouldUpdate||e!=this.state||e.dropdownOpen},e.prototype.getDropdown=function(){var t=this.props.instance,e=t.horizontal,n=t.controller,r=t.widget;return!this.dropdown&&r.dropdown&&(this.dropdown=S.Widget.create(H,I({matchWidth:!1},r.dropdownOptions,{relatedElement:this.el.parentElement,placementOrder:e?"down-right down down-left up-right up up-left":"right-down right right-up left-down left left-up",controller:n,trackScroll:!0,inline:!0,onKeyDown:this.onDropdownKeyDown.bind(this),items:r.dropdown}))),this.dropdown},e.prototype.render=function(){var t=this,e=this.props.instance,n=e.data,r=e.store,o=e.widget,i=o.CSS,s=o.baseClass,a=this.state.dropdownOpen&&e.prepareRenderCleanupChild(this.getDropdown(),r,{name:"submenu"}),l=o.arrow&&S.VDOM.createElement(Pt,{className:i.element(s,"arrow")}),u=i.expand(n.classNames,i.state({open:this.state.dropdownOpen,horizontal:e.horizontal,vertical:!e.horizontal,arrow:o.arrow,pad:o.pad,cursor:o.showCursor}));return S.VDOM.createElement("div",{className:u,style:n.style,tabIndex:o.dropdown?0:null,ref:function(e){t.el=e},onKeyDown:this.onKeyDown.bind(this),onMouseDown:this.onMouseDown.bind(this),onMouseEnter:this.onMouseEnter.bind(this),onMouseLeave:this.onMouseLeave.bind(this),onFocus:this.onFocus.bind(this),onClick:this.onClick.bind(this),onBlur:this.onBlur.bind(this)},this.props.children,l,a)},e.prototype.onDropdownKeyDown=function(t){E.Debug.log(E.menuFlag,"MenuItem","dropdownKeyDown");var e=this.props.instance.horizontal;27!=t.keyCode&&(e?38!=t.keyCode:37!=t.keyCode)||(S.FocusManager.focus(this.el),t.preventDefault(),t.stopPropagation())},e.prototype.clearAutoFocusTimer=function(){this.autoFocusTimerId&&(E.Debug.log(E.menuFlag,"MenuItem","autoFocusCancel"),clearTimeout(this.autoFocusTimerId),delete this.autoFocusTimerId)},e.prototype.onMouseEnter=function(t){var e=this;E.Debug.log(E.menuFlag,"MenuItem","mouseEnter",this.el);var n=this.props.instance.widget;if(n.dropdown&&!this.state.dropdownOpen){if(this.clearAutoFocusTimer(),!n.clickToOpen){var r=E.closest(this.el,function(t){return"UL"==t.tagName&&t.contains(document.activeElement)});r&&(this.autoFocusTimerId=setTimeout(function(){delete e.autoFocusTimerId,e.state.dropdownOpen||(E.Debug.log(E.menuFlag,"MenuItem","hoverFocusTimeout:before",e.el),S.FocusManager.focus(e.el),E.Debug.log(E.menuFlag,"MenuItem","hoverFocusTimeout:after",e.el,document.activeElement))},n.hoverFocusTimeout))}t.stopPropagation(),t.preventDefault()}},e.prototype.onMouseLeave=function(t){var e=this.props.instance.widget;e.dropdown&&(E.Debug.log(E.menuFlag,"MenuItem","mouseLeave",this.el),this.clearAutoFocusTimer())},e.prototype.onKeyDown=function(t){E.Debug.log(E.menuFlag,"MenuItem","keyDown",this.el);var e=this.props.instance,n=e.horizontal,r=e.widget;if(r.dropdown){if(t.target==this.el&&(13==t.keyCode||(n?40==t.keyCode:39==t.keyCode))){var o=E.findFirstChild(this.el,E.isFocusable);o&&S.FocusManager.focus(o),t.preventDefault(),t.stopPropagation()}27==t.keyCode&&(S.FocusManager.focus(this.el),t.preventDefault(),t.stopPropagation(),this.setState({dropdownOpen:!1}))}},e.prototype.onMouseDown=function(t){var e=this.props.instance.widget;e.dropdown&&(E.isFocusedDeep(this.el)||S.FocusManager.focus(this.el),t.stopPropagation())},e.prototype.openDropdown=function(){var t=this.props.instance.widget;t.dropdown&&this.setState({dropdownOpen:!0})},e.prototype.onClick=function(t){t.stopPropagation(),this.openDropdown()},e.prototype.onFocus=function(){var t=this.props.instance.widget;t.dropdown&&(S.oneFocusOut(this,this.el,this.onFocusOut.bind(this)),E.Debug.log(E.menuFlag,"MenuItem","focus",this.el,document.activeElement),this.clearAutoFocusTimer(),this.state.dropdownOpen||this.openDropdown())},e.prototype.onBlur=function(){S.FocusManager.nudge()},e.prototype.onFocusOut=function(t){E.Debug.log(E.menuFlag,"MenuItem","focusout",this.el,t),this.clearAutoFocusTimer(),E.isSelfOrDescendant(this.el,t)||(E.Debug.log(E.menuFlag,"MenuItem","closing dropdown",this.el,t),this.setState({dropdownOpen:!1}))},e.prototype.componentWillUnmount=function(){this.clearAutoFocusTimer(),S.offFocusOut(this)},e}(S.VDOM.Component),jt=function(t){function e(){return V(this,e),N(this,t.apply(this,arguments))}return P(e,t),e.prototype.prepareData=function(e,n){var r=n.data;r.stateMods=I({},r.stateMods,{horizontal:this.horizontal,vertical:!this.horizontal}),t.prototype.prepareData.call(this,e,n)},e.prototype.explore=function(e,n){var r=e.lastMenu;e.lastMenu=this,t.prototype.explore.call(this,e,n),e.lastMenu=r},e.prototype.render=function(t,e,n){return S.VDOM.createElement(Lt,{key:n,instance:e},this.renderChildren(t,e))},e.prototype.add=function(e){var n;e&&"a"==e.tag?this.add({type:Nt,items:e}):(n=t.prototype.add).call.apply(n,[this].concat(Array.prototype.slice.call(arguments)))},e}(Q);jt.prototype.horizontal=!1,jt.Item=Nt;var Lt=function(t){function e(n){V(this,e);var r=N(this,t.call(this,n));return r.state={cursor:null},r}return P(e,t),e.prototype.render=function(){var t=this,e=this.props,n=e.instance,r=e.children,o=n.data;this.itemInfo=Array.from({length:r.length});var i=function(e){t.el=e};return S.VDOM.createElement("ul",{ref:i,className:o.classNames,style:o.style,onFocus:this.onFocus.bind(this),onBlur:S.FocusManager.nudge(),onKeyDown:this.onKeyDown.bind(this)},r.map(function(e,r){var o=r;return e&&"object"==("undefined"==typeof e?"undefined":F(e))&&e.key&&(o=e.key),S.VDOM.createElement(_t,{key:o,cursor:o===t.state.cursor,instance:n,itemInfo:t.itemInfo,itemKey:o,itemIndex:r,moveCursor:t.moveCursor.bind(t)},e)}))},e.prototype.moveCursor=function(t){t!=this.state.cursor&&(E.Debug.log(E.menuFlag,"Menu","moveCursor",t),this.setState({cursor:t}))},e.prototype.onKeyDown=function(t){var e=this,n=this.props.instance,r=n.widget,o=t.keyCode;E.Debug.log(E.menuFlag,"Menu","keyDown",this.el,o);var i=r.horizontal;if(o==E.KeyCode.tab&&(o=i?t.shiftKey?E.KeyCode.left:E.KeyCode.up:t.shiftKey?E.KeyCode.right:E.KeyCode.down),null!=this.state.cursor){var s=this.itemInfo.findIndex(function(t){return t.key==e.state.cursor});if(i?o==E.KeyCode.left:o==E.KeyCode.up)for(var a=s-1;a>=0;a--)if(this.itemInfo[a].focusable)return S.FocusManager.focusFirst(this.itemInfo[a].el),t.stopPropagation(),void t.preventDefault();if(i?o==E.KeyCode.right:o==E.KeyCode.down)for(var a=s+1;a<this.itemInfo.length;a++)if(this.itemInfo[a].focusable)return S.FocusManager.focusFirst(this.itemInfo[a].el),t.stopPropagation(),void t.preventDefault()}switch(o){case E.KeyCode.home:this.itemInfo[0].focusable&&(S.FocusManager.focusFirst(this.itemInfo[0].el),t.stopPropagation(),t.preventDefault());break;case E.KeyCode.end:this.itemInfo[this.itemInfo.length-1].focusable&&(S.FocusManager.focusFirst(this.itemInfo[this.itemInfo.length-1].el),t.stopPropagation(),t.preventDefault())}},e.prototype.onFocusOut=function(t){E.Debug.log(E.menuFlag,"Menu","focusout",this.el,t),E.isSelfOrDescendant(this.el,t)||this.moveCursor(null)},e.prototype.componentDidMount=function(){var t=this.props.instance.widget;t.autoFocus&&this.itemInfo.length>0&&S.FocusManager.focusFirst(this.itemInfo[0].el)},e.prototype.onFocus=function(){S.oneFocusOut(this,this.el,this.onFocusOut.bind(this))},e.prototype.componentWillUnmount=function(){S.offFocusOut(this)},e}(S.VDOM.Component);jt.prototype.baseClass="menu",jt.prototype.tag="ul",S.Widget.alias("menu",jt);var _t=function(t){function e(n){V(this,e);var r=N(this,t.call(this,n));return r.state={focusable:!0},r}return P(e,t),e.prototype.render=function(){var t=this,e=this.props,n=e.itemInfo,r=e.itemIndex,o=e.itemKey,i=e.instance,s=e.cursor,a=i.widget,l=a.CSS,u=a.baseClass,c={cursor:s,focusable:this.state.focusable};return S.VDOM.createElement("li",{ref:function(e){t.el=e,n[r]={el:e,focusable:t.state.focusable,key:o}},className:l.element(u,"item",c),onFocus:this.onFocus.bind(this),onMouseDown:this.onMouseDown.bind(this),onKeyDown:this.onKeyDown.bind(this)},this.props.children)},e.prototype.onFocus=function(t){S.FocusManager.nudge(),E.Debug.log(E.menuFlag,"MenuItem","focus",this.el,t.target),this.props.moveCursor(this.props.itemKey)},e.prototype.onKeyDown=function(t){var e=this.props.instance,n=e.widget;n.onKeyDown&&n.onKeyDown(t,e)},e.prototype.onMouseDown=function(t){if(t.stopPropagation(),t.preventDefault(),E.Debug.log(E.menuFlag,"MenuItem","mouseDown",this.el),this.state.focusable){var e=this.props,n=e.itemInfo,r=e.itemIndex,o=n[r].el,i=E.getFocusedElement(),s=S.FocusManager.focusFirst(o);s!=i&&E.Debug.log(E.menuFlag,"MenuItem","focusChild",s,i)}},e.prototype.componentDidMount=function(){this.componentDidUpdate()},e.prototype.componentDidUpdate=function(){var t=this.props,e=t.itemInfo,n=t.itemIndex,r=(t.cursor,null!=E.findFirst(e[n].el,E.isFocusable));r!=this.state.focusable&&(e[n].focusable=r,this.setState({focusable:r}))},e}(S.VDOM.Component),Rt=function(t){function e(){return V(this,e),N(this,t.apply(this,arguments))}return P(e,t),e}(Nt),Kt=function(t){function e(){return V(this,e),N(this,t.apply(this,arguments))}return P(e,t),e.prototype.declareData=function(){var e;(e=t.prototype.declareData).call.apply(e,[this].concat(Array.prototype.slice.call(arguments),[{required:void 0,htmlFor:void 0}]))},e.prototype.explore=function(e,n){n.data.htmlFor||(n.data.htmlFor=e.lastFieldId),t.prototype.explore.call(this,e,n)},e.prototype.attachProps=function(e,n,r){t.prototype.attachProps.call(this,e,n,r),r.htmlFor=n.data.htmlFor,!r.onClick&&n.data.htmlFor&&(r.onClick=function(){var t=document.getElementById(n.data.htmlFor);t&&S.FocusManager.focusFirst(t)});var o=n.data;this.asterisk&&o.required&&(Array.isArray(r.children)||(r.children=[r.children]),r.children.push(" "),r.children.push(S.VDOM.createElement("span",{className:this.CSS.element(this.baseClass,"asterisk")},"*")))},e}(Q);Kt.prototype.baseClass="label",Kt.prototype.tag="label",Kt.prototype.asterisk=!1;var Bt=function(t){function e(){return V(this,e),N(this,t.apply(this,arguments))}return P(e,t),e.prototype.declareData=function(){var e;(e=t.prototype.declareData).call.apply(e,[this,{label:void 0,labelWidth:void 0,mode:void 0,id:void 0,error:void 0,class:{structured:!0},className:{structured:!0},inputStyle:{structured:!0},style:{structured:!0},tooltip:{structured:!0},emptyText:void 0,errorTooltip:{structured:!0},visited:void 0,autoFocus:void 0}].concat(Array.prototype.slice.call(arguments)))},e.prototype.init=function(){if(null!=this.help&&(this.help=S.Widget.create(S.PureContainer,{items:this.help
})),null!=this.label){var e={type:Kt,required:this.required,asterisk:this.asterisk};this.label.isComponentType?e=this.label:M.isSelector(this.label)?e.text=this.label:Object.assign(e,this.label),this.label=S.Widget.create(e)}t.prototype.init.call(this)},e.prototype.initComponents=function(e,n){var r;return(r=t.prototype.initComponents).call.apply(r,[this].concat(Array.prototype.slice.call(arguments),[{label:this.label,help:this.help}]))},e.prototype.initState=function(t,e){e.state={inputError:!1}},e.prototype.prepareData=function(e,n){var r,o=n.data;o.id||(o.id="fld-"+n.id),"undefined"!=typeof o.enabled&&(o.disabled=!o.enabled),o.error||o.disabled||this.validate(e,n),o.stateMods=I({},o.stateMods,{error:o.error,disabled:o.disabled}),o.stateMods[(o.mode||"edit")+"-mode"]=!0,o.inputStyle=this.CSS.parseStyle(o.inputStyle),(r=t.prototype.prepareData).call.apply(r,[this].concat(Array.prototype.slice.call(arguments)))},e.prototype.explore=function(e,n){var r=n.data;r.error&&e.validation&&e.validation.errors.push({fieldId:r.id,message:r.error,type:"error"}),e.lastFieldId=r.id,t.prototype.explore.call(this,e,n),delete e.lastFieldId},e.prototype.validateRequired=function(t,e){var n=e.data;if(null==n.value)return this.requiredText},e.prototype.validate=function(t,e){var n=this,r=e.data,o=e.state;if(o=o||{},r.error||(o.validating?r.error=this.validatingText:r.required&&(r.error=this.validateRequired(t,e))),!r.error&&null!=r.value&&this.onValidate&&!o.validating&&r.value!=o.lastValidatedValue){var i=this.onValidate(r.value,e);E.isPromise(i)?(r.error=this.validatingText,e.setState({validating:!0,lastValidatedValue:r.value}),i.then(function(t){e.setState({validating:!1,inputError:t})}).catch(function(t){e.setState({validating:!1,inputError:"Validation thrown an exception."}),n.onValidationException&&n.onValidationException(t,e)})):r.error=i}!r.error&&o.inputError&&(r.error=o.inputError)},e.prototype.renderLabel=function(t,e,n){if(e.components.label)return e.components.label.render(t,n)},e.prototype.renderInput=function(t,e,n){throw new Error("Not implemented.")},e.prototype.renderHelp=function(t,e,n){if(e.components.help)return e.components.help.render(t,n)},e.prototype.formatValue=function(t,e){var n=e.data;return n.text||n.value},e.prototype.renderValue=function(t,e,n){var r=this.formatValue(t,e);if(r)return S.VDOM.createElement("span",null,r)},e.prototype.renderContent=function(t,e,n){var r=this.renderValue.apply(this,arguments)||this.renderEmptyText.apply(this,arguments);return this.renderWrap(t,e,n,r)},e.prototype.renderWrap=function(t,e,n,r){var o=e.data;return S.VDOM.createElement("div",{key:n,className:o.classNames,style:o.style,onMouseDown:lt,onTouchStart:lt},r)},e.prototype.renderEmptyText=function(t,e,n){var r=e.data;return S.VDOM.createElement("span",{key:n,className:this.CSS.element(this.baseClass,"empty-text")},r.emptyText||S.VDOM.createElement("span",null," "))},e.prototype.render=function(t,e,n){var r=e.data,o="view"!=r.mode?this.renderInput(t,e,n+"input"):this.renderContent(t,e,n+"content");return{label:this.renderLabel(t,e,n),content:o,helpSpacer:this.helpSpacer&&e.components.help?" ":null,help:this.renderHelp(t,e,n)}},e}(S.PureContainer);Bt.prototype.errorTooltipsEnabled=!0,Bt.prototype.visited=!1,Bt.prototype.suppressErrorTooltipsUntilVisited=!1,Bt.prototype.requiredText="This field is required.",Bt.prototype.autoFocus=!1,Bt.prototype.asterisk=!1,Bt.prototype.validatingText="Validation is in progress...",Bt.prototype.helpSpacer=!0,W.registerPrototype("Cx.ui.form.Field",Bt);var Wt=function(t){function e(){return V(this,e),N(this,t.apply(this,arguments))}return P(e,t),e.prototype.declareData=function(){var e;(e=t.prototype.declareData).call.apply(e,[this,{value:null,disabled:void 0,readOnly:void 0,enabled:void 0,placeholder:void 0,required:void 0,minLength:void 0,maxLength:void 0}].concat(Array.prototype.slice.call(arguments)))},e.prototype.renderInput=function(t,e,n){return S.VDOM.createElement(Ht,{key:n,instance:e})},e.prototype.validate=function(e,n){t.prototype.validate.call(this,e,n);var r=n.data;!r.error&&this.validationRegExp&&(this.validationRegExp.test(r.value)||(r.error=this.validationErrorText)),!r.error&&r.value&&("string"==typeof r.value&&null!=r.minLength&&r.value.length<r.minLength?r.error=M.StringTemplate.format(this.minLengthValidationErrorText,r.minLength,r.value.length):"string"==typeof r.value&&null!=r.maxLength&&r.value.length>r.maxLength&&(r.error=M.StringTemplate.format(this.maxLengthValidationErrorText,r.maxLength,r.value.length)))},e}(Bt);Wt.prototype.baseClass="textfield",Wt.prototype.reactOn="input",Wt.prototype.inputType="text",Wt.prototype.validationErrorText="The entered value is not valid.",Wt.prototype.minLengthValidationErrorText="Please enter {[{0}-{1}]} more character(s).",Wt.prototype.maxLengthValidationErrorText="The entered text is longer than the maximum allowed {0} characters.",Wt.prototype.suppressErrorTooltipsUntilVisited=!0,Wt.prototype.icon=null;var Ht=function(t){function e(n){V(this,e);var r=N(this,t.call(this,n));return r.state={visited:n.instance.data.visited},r}return P(e,t),e.prototype.shouldComponentUpdate=function(t,e){return t.instance.shouldUpdate||e!=this.state},e.prototype.render=function(){var t=this,e=this.props.instance,n=e.data,r=e.widget,o=r.CSS,i=r.baseClass,s=r.icon&&S.VDOM.createElement("div",{className:o.element(i,"tool"),onMouseDown:ut,onClick:function(e){return t.onChange(e,"enter")}},ot.render(r.icon,{className:o.element(i,"icon")}));return S.VDOM.createElement("div",{className:o.expand(n.classNames,o.state({visited:this.state.visited})),style:n.style,onMouseDown:lt,onTouchStart:lt},S.VDOM.createElement("input",{ref:function(e){t.input=e},className:o.element(i,"input"),defaultValue:n.value,id:n.id,style:n.inputStyle,type:r.inputType,disabled:n.disabled,readOnly:n.readOnly,placeholder:n.placeholder,onMouseMove:this.onMouseMove.bind(this),onMouseLeave:this.onMouseLeave.bind(this),onInput:function(e){return t.onChange(e,"input")},onChange:function(e){return t.onChange(e,"change")},onKeyDown:this.onKeyDown.bind(this),onBlur:function(e){t.onChange(e,"blur")},onClick:lt}),s)},e.prototype.shouldComponentUpdate=function(t,e){return t.instance.shouldUpdate!==!1||this.state!=e},e.prototype.onMouseMove=function(t){c(t,this.props.instance,this.state)},e.prototype.onMouseLeave=function(t){p(t,this.props.instance)},e.prototype.componentWillUnmount=function(){h(this.input)},e.prototype.componentDidMount=function(){f(this.input,this.props.instance,this.state),this.props.instance.data.autoFocus&&this.input.focus()},e.prototype.onKeyDown=function(t){switch(t.keyCode){case 13:this.onChange(t,"enter");break;case 37:case 39:t.stopPropagation()}},e.prototype.componentWillReceiveProps=function(t){var e=t.instance.data;e.value!=this.input.value&&(this.input.value=e.value||""),e.visited&&this.setState({visited:!0}),d(this.input,t.instance,this.state)},e.prototype.onChange=function(t,e){"blur"==e&&this.setState({visited:!0});var n=this.props.instance,r=n.widget,o=n.data;if(r.reactOn.indexOf(e)!=-1){var i=t.target.value;null!=o.maxLength&&i.length>o.maxLength&&(i=i.substring(0,o.maxLength),this.input.value=i),n.set("value",i||null)}},e}(S.VDOM.Component);S.Widget.alias("textfield",Wt);var Ut=ot.register("check",function(t){return S.VDOM.createElement("svg",I({},t,{viewBox:"0 0 64 64"}),S.VDOM.createElement("path",{d:"M7.136 42.94l20.16 14.784 29.568-40.32-9.72-7.128-22.598 30.816-10.44-7.656z",fill:"currentColor"}))}),zt=function(t){function e(){return V(this,e),N(this,t.apply(this,arguments))}return P(e,t),e.prototype.init=function(){this.checked&&(this.value=this.checked),t.prototype.init.call(this)},e.prototype.declareData=function(){var e;(e=t.prototype.declareData).call.apply(e,[this,{value:!1,text:void 0,readOnly:void 0,disabled:void 0,required:void 0}].concat(Array.prototype.slice.call(arguments)))},e.prototype.renderWrap=function(t,e,n,r){var o=this,i=e.data;return S.VDOM.createElement("label",{key:n,className:i.classNames,onMouseDown:lt,onMouseMove:function(t){return c(t,e)},onMouseLeave:function(t){return p(t,e)},onClick:function(t){o.handleClick(t,e)},style:i.style},r)},e.prototype.renderNativeCheck=function(t,e){var n=this,r=this.CSS,o=this.baseClass,i=e.data;return S.VDOM.createElement("input",{key:"input",className:r.element(o,"checkbox"),id:i.id,type:"checkbox",checked:i.value||!1,disabled:i.disabled,onClick:lt,onChange:function(t){n.handleChange(t,e)}})},e.prototype.renderCheck=function(t,e){return S.VDOM.createElement(qt,{key:"check",instance:e})},e.prototype.renderInput=function(t,e,n){var r=e.data,o=r.text||S.getContent(this.renderChildren(t,e)),i=this.CSS;this.baseClass;return this.renderWrap(t,e,n,[this.native?this.renderNativeCheck(t,e):this.renderCheck(t,e),o&&S.VDOM.createElement("div",{key:"text",className:i.element(this.baseClass,"text")},o)])},e.prototype.formatValue=function(t,e){var n=e.data;return n.value&&n.text},e.prototype.handleClick=function(t,e){if(this.native)t.stopPropagation();else{var n=document.getElementById(e.data.id);n&&n.focus(),this.handleChange(t,e,!e.data.value)}},e.prototype.handleChange=function(t,e,n){t.preventDefault(),t.stopPropagation();var r=e.data;r.readOnly||r.disabled||e.set("value",null!=n?n:t.target.checked)},e}(Bt);zt.prototype.baseClass="checkbox",zt.prototype.native=!1,S.Widget.alias("checkbox",zt);var qt=function(t){function e(n){V(this,e);var r=N(this,t.call(this,n));return r.state={value:n.instance.data.value},r}return P(e,t),e.prototype.componentWillReceiveProps=function(t){this.setState({value:t.instance.data.value})},e.prototype.shouldComponentUpdate=function(t,e){return t.instance.shouldUpdate||e!=this.state},e.prototype.render=function(){var t=this.props.instance,e=t.data,n=t.widget,r=n.baseClass,o=n.CSS;return S.VDOM.createElement("div",{key:"check",tabIndex:e.disabled||e.readOnly?null:0,className:o.element(r,"input",{checked:this.state.value}),style:o.parseStyle(e.inputStyle),id:e.id,onClick:this.onClick.bind(this),onKeyDown:this.onKeyDown.bind(this)},S.VDOM.createElement(Ut,{className:o.element(r,"input-check")}))},e.prototype.onClick=function(t){var e=this.props.instance,n=e.data,r=e.widget;n.disabled||n.readOnly||(t.stopPropagation(),t.preventDefault(),this.setState({value:!this.state.value}),r.handleChange(t,e,!this.state.value))},e.prototype.onKeyDown=function(t){switch(t.keyCode){case E.KeyCode.space:this.onClick(t)}},e}(S.VDOM.Component),Yt=function(t){function e(){return V(this,e),N(this,t.apply(this,arguments))}return P(e,t),e.prototype.declareData=function(){var e;(e=t.prototype.declareData).call.apply(e,[this,{value:void 0,selection:void 0,option:void 0,disabled:void 0,readOnly:void 0,required:void 0,text:void 0}].concat(Array.prototype.slice.call(arguments)))},e.prototype.init=function(){this.selection&&(this.value=this.selection),t.prototype.init.call(this)},e.prototype.formatValue=function(t,e){var n=e.data;return n.text},e.prototype.prepareData=function(e,n){var r,o=n.data;(r=t.prototype.prepareData).call.apply(r,[this].concat(Array.prototype.slice.call(arguments))),o.checked=o.value===o.option},e.prototype.renderValue=function(e,n){var r,o=n.data;return o.value===o.option?(r=t.prototype.renderValue).call.apply(r,[this].concat(Array.prototype.slice.call(arguments))):null},e.prototype.renderWrap=function(t,e,n,r){var o=this,i=e.data;return S.VDOM.createElement("label",{key:n,className:i.classNames,style:i.style,onMouseDown:lt,onTouchStart:lt,onMouseMove:function(t){return c(t,e)},onMouseLeave:function(t){return p(t,e)},onClick:function(t){o.handleClick(t,e)},htmlFor:i.id},r)},e.prototype.renderNativeCheck=function(t,e){var n=this,r=this.CSS,o=this.baseClass,i=e.data;return S.VDOM.createElement("input",{key:"input",className:r.element(o,"radio"),id:i.id,type:"radio",checked:i.checked,disabled:i.disabled,onClick:lt,onChange:function(t){n.handleChange(t,e)}})},e.prototype.renderCheck=function(t,e){return S.VDOM.createElement(Gt,{key:"check",instance:e})},e.prototype.renderInput=function(t,e,n){var r=e.data,o=r.text||S.getContent(this.renderChildren(t,e)),i=this.CSS;return this.renderWrap(t,e,n,[this.native?this.renderNativeCheck(t,e):this.renderCheck(t,e),o&&S.VDOM.createElement("div",{key:"text",className:i.element(this.baseClass,"text")},o)])},e.prototype.handleClick=function(t,e){if(this.native)t.stopPropagation();else{var n=document.getElementById(e.data.id);n&&n.focus(),this.handleChange(t,e,!e.data.value)}},e.prototype.handleChange=function(t,e){t.preventDefault();var n=e.data;n.disabled||n.readOnly||e.set("value",n.option)},e}(Bt);Yt.prototype.baseClass="radio",Yt.prototype.native=!1,S.Widget.alias("radio",Yt);var Gt=function(t){function e(n){V(this,e);var r=N(this,t.call(this,n));return r.state={value:n.instance.data.checked},r}return P(e,t),e.prototype.componentWillReceiveProps=function(t){this.setState({value:t.instance.data.checked})},e.prototype.shouldComponentUpdate=function(t,e){return t.instance.shouldUpdate||e!=this.state},e.prototype.render=function(){var t=this.props.instance,e=t.data,n=t.widget,r=n.baseClass,o=n.CSS;return S.VDOM.createElement("div",{key:"check",tabIndex:e.disabled||e.readOnly?null:0,className:o.element(r,"input",{checked:this.state.value}),style:o.parseStyle(e.inputStyle),id:e.id,onClick:this.onClick.bind(this),onKeyDown:this.onKeyDown.bind(this)})},e.prototype.onClick=function(t){var e=this.props.instance,n=e.data,r=e.widget;n.disabled||n.readOnly||(t.stopPropagation(),t.preventDefault(),r.handleChange(t,e))},e.prototype.onKeyDown=function(t){switch(t.keyCode){case E.KeyCode.space:this.onClick(t)}},e}(S.VDOM.Component),Qt=function(t){function e(){return V(this,e),N(this,t.apply(this,arguments))}return P(e,t),e.prototype.declareData=function(){var e;(e=t.prototype.declareData).call.apply(e,[this,{value:void 0,disabled:void 0,enabled:void 0,required:void 0}].concat(Array.prototype.slice.call(arguments)))},e.prototype.renderInput=function(t,e,n){var r=this;return S.VDOM.createElement(Xt,{key:n,instance:e,multiple:this.multiple,select:function(t){return r.select(t,e)}},this.renderChildren(t,e))},e.prototype.convert=function(t){return t==this.nullString?null:"true"==t||"false"!=t&&(t.match(/^\d+(\.\d+)?$/)?Number(t):t)},e.prototype.select=function(t,e){this.convertValues&&null!=t&&(t=this.convert(t)),e.set("value",t)},e.prototype.add=function(e){"string"!=typeof e&&t.prototype.add.call(this,e)},e}(Bt);Qt.prototype.baseClass="select",Qt.prototype.multiple=!1,Qt.prototype.convertValues=!0,Qt.prototype.nullString="",Qt.prototype.suppressErrorTooltipsUntilVisited=!0,S.Widget.alias("select",Qt);var Xt=function(t){function e(){return V(this,e),N(this,t.apply(this,arguments))}return P(e,t),e.prototype.render=function(){var t=this,e=this.props,n=e.multiple,r=e.select,o=e.instance,i=o.data,s=o.widget,a=s.CSS,l=s.baseClass;return S.VDOM.createElement("div",{className:a.expand(i.classNames,a.state({visited:i.visited||this.state&&this.state.visited})),style:i.style,onMouseDown:lt,onTouchStart:lt},S.VDOM.createElement("select",{id:i.id,ref:function(e){t.select=e},className:a.element(l,"select"),style:i.inputStyle,value:i.value||s.nullString,multiple:n,disabled:i.disabled,onBlur:this.onBlur.bind(this),onChange:function(t){t.preventDefault(),r(t.target.value)},onMouseMove:function(e){return c(e,o,t.state)},onMouseLeave:function(t){return p(t,o)}},this.props.children))},e.prototype.onBlur=function(){this.setState({visited:!0})},e.prototype.componentDidMount=function(){var t=this.props.select;t(this.select.value),f(this.select,this.props.instance,this.state),this.props.instance.data.autoFocus&&this.select.focus()},e.prototype.componentWillReceiveProps=function(t){d(this.select,t.instance,this.state)},e}(S.VDOM.Component),Jt=function(t){function e(){return V(this,e),N(this,t.apply(this,arguments))}return P(e,t),e.prototype.declareData=function(){var e;(e=t.prototype.declareData).call.apply(e,[this,{value:void 0,disabled:void 0,enabled:void 0,selected:void 0,text:void 0}].concat(Array.prototype.slice.call(arguments)))},e.prototype.prepareData=function(e,n){var r,o=n.data;(r=t.prototype.prepareData).call.apply(r,[this].concat(Array.prototype.slice.call(arguments))),null!=o.value&&(o.value=o.value.toString())},e.prototype.render=function(t,e,n){var r=e.data;return S.VDOM.createElement("option",{key:n,value:r.value},r.text||this.renderChildren(t,e))},e}(Q);S.Widget.alias("option",Jt);var Zt="en",te={},ee="USD",ne=function(){function t(){V(this,t)}return t.setCulture=function(t){Zt=t,te={},W.setCulture(t),E.GlobalCacheIdentifier.change()},t.setDefaultCurrency=function(t){ee=t,E.GlobalCacheIdentifier.change()},t.getNumberCulture=function(){return te.numberCulture||(te.numberCulture=new T.NumberCulture(Zt)),te.numberCulture},t.getDateTimeCulture=function(){return te.dateCulture||(te.dateCulture=new T.DateTimeCulture(Zt)),te.dateCulture},A(t,null,[{key:"defaultCurrency",get:function(){return ee}},{key:"culture",get:function(){return Zt}}]),t}(),re=function(t){function e(){return V(this,e),N(this,t.apply(this,arguments))}return P(e,t),e.prototype.declareData=function(){var e;(e=t.prototype.declareData).call.apply(e,[this,{value:void 0,refDate:void 0,disabled:void 0,minValue:void 0,minExclusive:void 0,maxValue:void 0,maxExclusive:void 0}].concat(Array.prototype.slice.call(arguments)))},e.prototype.init=function(){t.prototype.init.call(this)},e.prototype.prepareData=function(e,n){var r,o=n.data;o.stateMods={disabled:o.disabled},o.value&&(o.date=E.zeroTime(new Date(o.value))),o.refDate&&(o.refDate=E.zeroTime(new Date(o.refDate))),o.maxValue&&(o.maxValue=E.zeroTime(new Date(o.maxValue))),o.minValue&&(o.minValue=E.zeroTime(new Date(o.minValue))),(r=t.prototype.prepareData).call.apply(r,[this].concat(Array.prototype.slice.call(arguments)))},e.prototype.validate=function(e,n){t.prototype.validate.call(this,e,n);var r=n.data;if(!r.error&&r.date){var o;r.maxValue&&(o=E.dateDiff(r.date,r.maxValue),o>0?r.error=M.StringTemplate.format(this.maxValueErrorText,r.maxValue):0==o&&r.maxExclusive&&(r.error=M.StringTemplate.format(this.maxExclusiveErrorText,r.maxValue))),r.minValue&&(o=E.dateDiff(r.date,r.minValue),o<0?r.error=M.StringTemplate.format(this.minValueErrorText,r.minValue):0==o&&r.minExclusive&&(r.error=M.StringTemplate.format(this.minExclusiveErrorText,r.minValue)))}},e.prototype.renderInput=function(t,e,n){var r=this;return S.VDOM.createElement(ie,{key:n,instance:e,handleSelect:function(t,n){return r.handleSelect(t,e,n)}})},e.prototype.handleSelect=function(t,e,n){var r=(e.store,e.data);t.stopPropagation(),r.disabled||oe(n,r)&&(this.onBeforeSelect&&this.onBeforeSelect(t,e,n)===!1||(e.set("value",n.toISOString()),this.onSelect&&this.onSelect(t,e,n)))},e}(Bt);re.prototype.baseClass="calendar",re.prototype.highlightToday=!0,re.prototype.maxValueErrorText="Selected date is after the latest allowed date of {0:d}.",re.prototype.maxExclusiveErrorText="Selected date should be before {0:d}.",re.prototype.minValueErrorText="Selected date is after the latest allowed date of {0:d}.",re.prototype.minExclusiveErrorText="Selected date should be before {0:d}.";var oe=function(t,e){return!(e.maxValue&&!E.upperBoundCheck(t,e.maxValue,e.maxExclusive))&&!(e.minValue&&!E.lowerBoundCheck(t,e.minValue,e.minExclusive))},ie=function(t){function e(n){V(this,e);var r=N(this,t.call(this,n)),o=n.instance.data,i=o.refDate?o.refDate:o.date||E.zeroTime(new Date);return r.state=Object.assign({hover:!1,focus:!1,cursor:E.zeroTime(o.date||i)},r.getPage(i)),r}return P(e,t),e.prototype.getPage=function(t){t=E.zeroTime(t);var e=new Date(t.getFullYear(),t.getMonth(),1),n=new Date(e);n.setDate(1-n.getDay());var r=new Date(e);return r.setMonth(e.getMonth()+1),r.setDate(r.getDate()-1),r.setDate(r.getDate()+6-r.getDay()),{refDate:t,startDate:n,endDate:r}},e.prototype.moveCursor=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t.preventDefault(),t.stopPropagation(),e=E.zeroTime(e);var r=this.state.refDate;(n.movePage||e<this.state.startDate||e>this.state.endDate)&&(r=e),this.setState(I({},this.getPage(r),{cursor:e}))},e.prototype.move=function(t,e,n){t.preventDefault(),t.stopPropagation();var r=this.state.refDate;switch(e){case"y":r.setFullYear(r.getFullYear()+n);break;case"m":r.setMonth(r.getMonth()+n)}var o=this.getPage(r);this.state.cursor<o.startDate?o.cursor=o.startDate:this.state.cursor>o.endDate&&(o.cursor=o.endDate),this.setState(o)},e.prototype.handleKeyPress=function(t){var e=new Date(this.state.cursor);switch(t.keyCode){case 13:this.props.handleSelect(t,this.state.cursor);break;case 37:e.setDate(e.getDate()-1),this.moveCursor(t,e);break;case 39:e.setDate(e.getDate()+1),this.moveCursor(t,e);break;case 38:e.setDate(e.getDate()-7),this.moveCursor(t,e);break;case 40:e.setDate(e.getDate()+7),this.moveCursor(t,e);break;case 33:e.setMonth(e.getMonth()-1),this.moveCursor(t,e,{movePage:!0});break;case 34:e.setMonth(e.getMonth()+1),this.moveCursor(t,e,{movePage:!0});break;case 36:e.setDate(1),this.moveCursor(t,e,{movePage:!0});break;case 35:e.setMonth(e.getMonth()+1),e.setDate(0),this.moveCursor(t,e,{movePage:!0});break;default:var n=this.props.instance.widget;n.onKeyDown&&n.onKeyDown(t,this.props.instance)}},e.prototype.handleWheel=function(t){t.preventDefault(),t.stopPropagation();var e=new Date(this.state.cursor);t.deltaY<0?(e.setMonth(e.getMonth()-1),this.moveCursor(t,e,{movePage:!0})):t.deltaY>0&&(e.setMonth(e.getMonth()+1),this.moveCursor(t,e,{movePage:!0}))},e.prototype.handleBlur=function(t){S.FocusManager.nudge();var e=this.props.instance.widget;e.onBlur&&e.onBlur(),this.setState({focus:!1})},e.prototype.handleFocus=function(t){S.oneFocusOut(this,this.el,this.handleFocusOut.bind(this)),this.setState({focus:!0})},e.prototype.handleFocusOut=function(){var t=this.props.instance.widget;t.onFocusOut&&t.onFocusOut()},e.prototype.handleMouseLeave=function(t){p(t,this.props.instance),this.setState({hover:!1})},e.prototype.handleMouseEnter=function(t){this.setState({hover:!0})},e.prototype.componentDidMount=function(){this.props.instance.widget.autoFocus&&this.el.focus(),f(this.el,this.props.instance)},e.prototype.componentWillReceiveProps=function(t){var e=t.instance.data;e.date&&this.setState(I({},this.getPage(e.date),{value:e.date})),d(this.el,t.instance)},e.prototype.componentWillUnmount=function(){S.offFocusOut(this),h(this.el)},e.prototype.render=function(){var t=this,e=this.props.instance,n=e.data,r=e.widget,o=r.CSS,i=r.baseClass,s=this.state.refDate,a=s.getMonth(),l=s.getFullYear(),u=new Date(l,a,1);u.setDate(1-u.getDay());for(var p=[],h=u,d=E.zeroTime(new Date);h<s||h.getMonth()==a;){for(var f=[],y=function(){var e=!oe(h,n),i=o.state({outside:a!=h.getMonth(),unselectable:e,selected:n.date&&E.sameDate(n.date,h),cursor:(t.state.hover||t.state.focus)&&t.state.cursor&&E.sameDate(t.state.cursor,h),today:r.highlightToday&&E.sameDate(h,d)}),s=new Date(h);f.push(S.VDOM.createElement("td",{key:m,className:i,onMouseMove:function(n){e||t.moveCursor(n,s)},onMouseDown:function(n){e||t.props.handleSelect(n,s)}},h.getDate())),h.setDate(h.getDate()+1)},m=0;m<7;m++)y();p.push(S.VDOM.createElement("tr",{key:p.length,className:o.element(i,"week")},f))}var g=ne.getDateTimeCulture(),v=g.getMonthNames("long"),b=g.getWeekdayNames("short").map(function(t){return t.substr(0,2)});return S.VDOM.createElement("div",{className:n.classNames,tabIndex:n.disabled?null:0,onKeyDown:function(e){return t.handleKeyPress(e)},onMouseDown:function(t){return t.stopPropagation()},ref:function(e){t.el=e},onMouseMove:function(e){return c(e,t.props.instance)},onMouseLeave:function(e){return t.handleMouseLeave(e)},onMouseEnter:function(e){return t.handleMouseEnter(e)},onWheel:function(e){return t.handleWheel(e)},onFocus:function(e){return t.handleFocus(e)},onBlur:function(e){return t.handleBlur(e)}},S.VDOM.createElement("table",null,S.VDOM.createElement("tbody",null,S.VDOM.createElement("tr",{key:"h",className:o.element(i,"header")},S.VDOM.createElement("td",{onClick:function(e){return t.move(e,"y",-1)}},"«"),S.VDOM.createElement("td",{onClick:function(e){return t.move(e,"m",-1)}},"‹"),S.VDOM.createElement("th",{colSpan:"3"},v[a],S.VDOM.createElement("br",null),l),S.VDOM.createElement("td",{onClick:function(e){return t.move(e,"m",1)}},"›"),S.VDOM.createElement("td",{onClick:function(e){return t.move(e,"y",1)}},"»")),S.VDOM.createElement("tr",{key:"d",className:o.element(i,"day-names")},b.map(function(t,e){return S.VDOM.createElement("th",{key:e},t)})),p)))},e}(S.VDOM.Component);S.Widget.alias("calendar",re),ot.register("calendar",function(t){return S.VDOM.createElement("svg",I({},t,{viewBox:"0 0 32 32"}),S.VDOM.createElement("path",{d:"M4 3h6m10 0h6",fill:"none",stroke:"currentColor",strokeWidth:"2"}),S.VDOM.createElement("path",{d:"M19 21h4v4h-4z",fill:"currentColor"}),S.VDOM.createElement("path",{d:"M3 25h24M3 21h24M3 17h24M7 28V13m-4 0h24M11 28V13.2M15 28V13.27M19 28V13.03M23 28V13.5",fill:"none",stroke:"currentColor"}),S.VDOM.createElement("path",{fill:"currentColor",d:"M10 8h10v2H10z"}),S.VDOM.createElement("path",{fill:"none",stroke:"currentColor",strokeWidth:"2",d:"M3 5h24v24H3z"}))});var se=ot.register("clear",function(t){return S.VDOM.createElement("svg",I({},t,{viewBox:"0 0 32 32"}),S.VDOM.createElement("path",{fill:"currentColor",strokeWidth:"1",stroke:"currentColor",d:"M16.9 16l4.92-4.92c.24-.24.24-.6 0-.84s-.6-.24-.84 0l-4.92 4.92-5.04-4.98c-.24-.24-.6-.24-.84 0s-.24.6 0 .84L15.16 16l-4.98 4.98c-.24.24-.24.6 0 .84s.6.24.84 0L16 16.84l4.98 4.98c.24.24.6.24.84 0s.24-.6 0-.84L16.9 16z"}))}),ae=function(t){function e(){return V(this,e),N(this,t.apply(this,arguments))}return P(e,t),e.prototype.declareData=function(){var e;(e=t.prototype.declareData).call.apply(e,[this,{value:void 0,disabled:void 0,readOnly:void 0,enabled:void 0,placeholder:void 0,required:void 0,minValue:void 0,minExclusive:void 0,maxValue:void 0,maxExclusive:void 0,format:void 0}].concat(Array.prototype.slice.call(arguments)))},e.prototype.init=function(){t.prototype.init.call(this)},e.prototype.prepareData=function(e,n){var r,o,i=n.data;if((r=t.prototype.prepareData).call.apply(r,[this].concat(Array.prototype.slice.call(arguments))),i.value){var s=new Date(i.value);i.formatted=ne.getDateTimeCulture().format(s,i.format)}i.refDate&&(i.refDate=E.zeroTime(new Date(i.refDate))),i.maxValue&&(i.maxValue=E.zeroTime(new Date(i.maxValue))),i.minValue&&(i.minValue=E.zeroTime(new Date(i.minValue))),(o=t.prototype.prepareData).call.apply(o,[this].concat(Array.prototype.slice.call(arguments)))},e.prototype.validate=function(e,n){t.prototype.validate.call(this,e,n);var r=n.data;if(!r.error&&r.date){var o;r.maxValue&&(o=E.dateDiff(r.date,r.maxValue),o>0?r.error=M.StringTemplate.format(this.maxValueErrorText,r.maxValue):0==o&&r.maxExclusive&&(r.error=M.StringTemplate.format(this.maxExclusiveErrorText,r.maxValue))),r.minValue&&(o=E.dateDiff(r.date,r.minValue),o<0?r.error=M.StringTemplate.format(this.minValueErrorText,r.minValue):0==o&&r.minExclusive&&(r.error=M.StringTemplate.format(this.minExclusiveErrorText,r.minValue)))}},e.prototype.renderInput=function(t,e,n){var r=this;return S.VDOM.createElement(le,{key:n,instance:e,onSelect:function(t){return r.onSelect(e,t)},parseDate:function(t){return r.parseDate(t)},calendar:{value:this.value,minValue:this.minValue,maxValue:this.maxValue,minExclusive:this.minExclusive,maxExclusive:this.maxExclusive,maxValueErrorText:this.maxValueErrorText,maxExclusiveErrorText:this.maxExclusiveErrorText,minValueErrorText:this.minValueErrorText,minExclusiveErrorText:this.minExclusiveErrorText}})},e.prototype.formatValue=function(t,e){var n=e.data;return n.value?n.formatted:null},e.prototype.parseDate=function(t){return t?t instanceof Date?t:t=ne.getDateTimeCulture().parse(t,{useCurrentDateForDefaults:!0}):null},e.prototype.onSelect=function(t,e){t.setState({inputError:!1}),t.set("value",e?e.toISOString():null)},e}(Bt);ae.prototype.baseClass="datefield",ae.prototype.memoize=!1,ae.prototype.maxValueErrorText="Selected date is after the latest allowed date of {0:d}.",ae.prototype.maxExclusiveErrorText="Selected date should be before {0:d}.",ae.prototype.minValueErrorText="Selected date is after the latest allowed date of {0:d}.",ae.prototype.minExclusiveErrorText="Selected date should be before {0:d}.",ae.prototype.suppressErrorTooltipsUntilVisited=!0,ae.prototype.icon="calendar",S.Widget.alias("datefield",ae),W.registerPrototype("Cx.ui.form.DateField",ae);var le=function(t){function e(n){V(this,e);var r=N(this,t.call(this,n));r.props.instance.component=r;var o=r.props.instance.data;return r.data=o,r.state={dropdownOpen:!1,visited:o.visited},r}return P(e,t),e.prototype.getDropdown=function(){var t=this;if(this.dropdown)return this.dropdown;var e={type:H,relatedElement:this.input,scrollTracking:!0,inline:!0,matchWidth:!1,placementOrder:"down-right down down-left up-right up up-left",touchFriendly:!0,items:I({type:re},this.props.calendar,{autoFocus:!0,onFocusOut:function(e){t.closeDropdown(e)},onKeyDown:function(e){return t.onKeyDown(e)},onSelect:function(e){e.stopPropagation(),e.preventDefault(),t.closeDropdown(e,function(){t.input.focus()})}})};return this.dropdown=S.Widget.create(e)},e.prototype.render=function(){var t,e=this,n=this.props.instance,r=n.data,o=n.store,i=n.widget,s=i.CSS,a=i.baseClass;r.readOnly||(t=r.required||null==r.value||r.disabled?S.VDOM.createElement("div",{className:s.element(a,"tool")},ot.render(i.icon,{className:s.element(a,"icon")})):S.VDOM.createElement("div",{className:s.element(a,"clear"),onMouseDown:function(t){e.onClearClick(t)}},S.VDOM.createElement(se,{className:s.element(a,"icon")})));var l=!1;return this.state.dropdownOpen&&(l=n.prepareRenderCleanupChild(this.getDropdown(),o,"dropdown",{name:"datefield-dropdown"})),S.VDOM.createElement("div",{className:s.expand(r.classNames,s.state({visited:r.visited||this.state.visited})),style:r.style,onMouseDown:this.onMouseDown.bind(this),onTouchStart:this.onMouseDown.bind(this)},S.VDOM.createElement("input",{id:r.id,ref:function(t){e.input=t},type:"text",className:s.element(a,"input"),style:r.inputStyle,defaultValue:r.formatted,disabled:r.disabled,readOnly:r.readOnly,placeholder:r.placeholder,onInput:function(t){return e.onChange(t,"input")},onChange:function(t){return e.onChange(t,"change")},onKeyDown:function(t){return e.onKeyDown(t)},onBlur:function(t){e.onBlur(t)},onFocus:function(t){e.onFocus(t)},onMouseMove:function(t){return c(t,e.props.instance,e.state)},onMouseLeave:function(t){return p(t,e.props.instance)}}),t,l)},e.prototype.onMouseDown=function(t){t.stopPropagation(),this.state.dropdownOpen?this.closeDropdown(t):this.openDropdownOnFocus=!0,t.target!=this.input&&(t.preventDefault(),this.state.dropdownOpen?this.input.focus():this.openDropdown(t))},e.prototype.onFocus=function(t){this.openDropdownOnFocus&&this.openDropdown(t)},e.prototype.onKeyDown=function(t){var e=this;switch(t.keyCode){case 13:t.stopPropagation(),this.onChange(t,"enter");break;case 27:this.state.dropdownOpen&&(t.stopPropagation(),this.closeDropdown(t,function(){e.input.focus()}));break;case 37:case 39:t.stopPropagation();break;case 40:this.openDropdown(t),t.stopPropagation(),t.preventDefault()}},e.prototype.onBlur=function(t){this.state.dropdownOpen||this.setState({visited:!0}),this.onChange(t,"blur")},e.prototype.closeDropdown=function(t,e){var n=this;this.state.dropdownOpen?(this.scrollableParents&&this.scrollableParents.forEach(function(t){t.removeEventListener("scroll",n.updateDropdownPosition)}),this.setState({dropdownOpen:!1,visited:!0},e)):e&&e()},e.prototype.openDropdown=function(t){var e=this.props.instance.data;this.openDropdownOnFocus=!1,this.state.dropdownOpen||e.disabled||e.readOnly||this.setState({dropdownOpen:!0})},e.prototype.onClearClick=function(t){this.props.onSelect(null),t.stopPropagation(),t.preventDefault()},e.prototype.componentWillReceiveProps=function(t){var e=t.instance,n=e.data,r=e.state;n.formatted==this.input.value||n.formatted==this.data.formatted&&r.inputError||(this.input.value=n.formatted||"",
t.instance.setState({inputError:!1})),this.data=n,n.visited&&this.setState({visited:!0}),d(this.input,this.props.instance,this.state)},e.prototype.componentDidMount=function(){f(this.input,this.props.instance,this.state),this.props.instance.data.autoFocus&&this.input.focus()},e.prototype.componentWillUnmount=function(){h(this.input)},e.prototype.onChange=function(t,e){var n=this.props.parseDate(t.target.value);"blur"!=e&&"enter"!=e||(null==n?this.props.onSelect(null):isNaN(n)?this.props.instance.setState({inputError:"Invalid date entered."}):this.props.onSelect(n))},e}(S.VDOM.Component),ue=function(t){function e(){return V(this,e),N(this,t.apply(this,arguments))}return P(e,t),e.prototype.declareData=function(){var e,n=this.multiple?{values:void 0,records:void 0}:{value:void 0,text:void 0};(e=t.prototype.declareData).call.apply(e,[this,{disabled:void 0,enabled:void 0,placeholder:void 0,required:void 0,options:void 0},n].concat(Array.prototype.slice.call(arguments)))},e.prototype.init=function(){if(!this.bindings){var e=[];this.value&&this.value.bind&&e.push({key:!0,local:this.value.bind,remote:"$option."+this.optionIdField}),this.text&&this.text.bind&&e.push({local:this.text.bind,remote:"$option."+this.optionTextField}),this.bindings=e}0==this.bindings.length&&this.multiple&&(this.bindings=[{key:!0,local:"$value."+this.valueIdField,remote:"$option."+this.optionIdField},{local:"$value."+this.valueTextField,remote:"$option."+this.optionTextField}]),this.keyBindings=this.bindings.filter(function(t){return t.key}),this.items||this.children||(this.items={$type:j,bind:"$option."+this.optionTextField}),this.itemConfig=this.children||this.items,delete this.items,delete this.children,t.prototype.init.call(this)},e.prototype.prepareData=function(e,n){var r=this,o=n.data,i=n.store;if(o.stateMods={multiple:this.multiple,disabled:o.disabled},t.prototype.prepareData.call(this,e,n),o.selectedKeys=[],this.multiple){var s;if(Array.isArray(o.values)&&Array.isArray(o.options)){o.selectedKeys=o.values.map(function(t){return 1==r.keyBindings.length?[t]:t});var a={};o.options.filter(function(t){for(var e=v(r.keyBindings,{$option:t}),n=0;n<o.selectedKeys.length;n++)if(b(e,o.selectedKeys[n])){a[n]=w(r.bindings,{$option:t});break}}),o.records=[];for(var l=0;l<o.selectedKeys.length;l++)a[l]&&o.records.push(a[l])}else Array.isArray(o.records)&&(s=o.selectedKeys).push.apply(s,o.records.map(function(t){return r.keyBindings.map(function(e){return M.Binding.get(e.local).value({$value:t})})}))}else{var u=i.getData();if(o.selectedKeys.push(this.keyBindings.map(function(t){return M.Binding.get(t.local).value(u)})),!this.text&&Array.isArray(o.options)){var c=o.options.find(function(t){return b(v(r.keyBindings,{$option:t}),o.selectedKeys[0])});o.text=c&&c[this.optionTextField]||""}}},e.prototype.renderInput=function(t,e,n){return S.VDOM.createElement(ce,{key:n,multiple:this.multiple,instance:e,itemConfig:this.itemConfig,bindings:this.bindings,baseClass:this.baseClass,onQuery:this.onQuery})},e.prototype.filterOptions=function(t,e,n){var r=this;if(!n)return e;var o=n.split(" ").map(function(t){return new RegExp(t,"gi")});return e.filter(function(t){return"string"==typeof t[r.optionTextField]&&o.every(function(e){return t[r.optionTextField].match(e)})})},e}(Bt);ue.prototype.baseClass="lookupfield",ue.prototype.memoize=!1,ue.prototype.multiple=!1,ue.prototype.queryDelay=150,ue.prototype.minQueryLength=0,ue.prototype.hideSearchField=!1,ue.prototype.minOptionsForSearchField=7,ue.prototype.loadingText="Loading...",ue.prototype.queryErrorText="Error occurred while querying for lookup data.",ue.prototype.noResultsText="No results found matching the given criteria.",ue.prototype.optionIdField="id",ue.prototype.optionTextField="text",ue.prototype.valueIdField="id",ue.prototype.valueTextField="text",ue.prototype.suppressErrorTooltipsUntilVisited=!0,S.Widget.alias("lookupfield",ue);var ce=function(t){function e(n){V(this,e);var r=N(this,t.call(this,n)),o=r.props.instance,i=o.data,s=o.store;return r.dom={},r.state={options:[],formatted:i.formatted,value:i.formatted,dropdownOpen:!1,cursorKey:null,visited:i.visited},r.itemStore=new M.ReadOnlyDataView({store:s}),r}return P(e,t),e.prototype.getOptionKey=function(t){return this.props.bindings.filter(function(t){return t.key}).map(function(e){return M.Binding.get(e.remote).value(t)})},e.prototype.getLocalKey=function(t){return this.props.bindings.filter(function(t){return t.key}).map(function(e){return M.Binding.get(e.local).value(t)})},e.prototype.areKeysEqual=function(t,e){if(!t||!e||t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!=e[n])return!1;return!0},e.prototype.findOption=function(t,e){if(!e)return-1;for(var n=0;n<t.length;n++){var r=this.getOptionKey({$option:t[n]});if(this.areKeysEqual(e,r))return n}return-1},e.prototype.setCursorKey=function(t){var e=this.getOptionKey(t);this.setState({cursorKey:e})},e.prototype.suggestCursorKey=function(t){var e=this.findOption(t,this.state.cursorKey);if(e!=-1)return this.state.cursorKey;var n=this.props.instance,r=n.data,o=n.store,i=o.getData();if(r.value){var s=this.props.bindings.filter(function(t){return t.key}).map(function(t){return M.Binding.get(t.local).value(i)});if(e=this.findOption(t,s),e!=-1)return s}return t.length>0?this.getOptionKey({option:t[0]}):null},e.prototype.getDropdown=function(){var t=this;if(this.dropdown)return this.dropdown;var e=this.props.instance.widget,n=e.CSS,r=e.baseClass;this.list=S.Widget.create({$type:Q,tag:"ul",class:n.element(r,"lookup-options"),jsxAttributes:["class"],children:["\n            ",{$type:gt,records:{bind:"$options"},recordName:"$option",jsxAttributes:["records","recordName"],children:["\n               ",{$type:Q,tag:"li","data-option":{bind:"$option"},memoize:!1,class:{selected:function(e){return null!=t.props.instance.data.selectedKeys.find(function(n){return t.areKeysEqual(n,t.getOptionKey(e))})},cursor:function(e){return t.areKeysEqual(t.getOptionKey(e),t.state.cursorKey)}},children:this.props.itemConfig,onMouseDown:function(t){t.preventDefault()},onMouseEnter:function(e,n){var r=n.store;t.setCursorKey(r.getData())},onClick:function(e,n){return t.onItemClick(e,n)},jsxAttributes:["data-option","memoize","class","children","onMouseDown","onMouseEnter","onClick"]},"\n            "]},"\n         "]});var o=I({type:H,relatedElement:this.dom.input,scrollTracking:!0,inline:!0,renderChildren:this.renderDropdownContents.bind(this),onFocusOut:this.closeDropdown.bind(this),memoize:!1,constrain:!0,placementOrder:"down-right down-left up-right up-left",touchFriendly:E.isTouchDevice(),onMeasureDropdownNaturalSize:function(){if(t.dom.dropdown&&t.dom.list)return{height:t.dom.dropdown.offsetHeight+t.dom.list.scrollHeight-t.dom.list.offsetHeight}}},e.dropdownOptions);return this.dropdown=S.Widget.create(o)},e.prototype.renderDropdownContents=function(){var t,e=this,n=this.props.instance,r=n.data,o=n.widget,i=o.CSS,s=o.baseClass,a=!o.hideSearchField&&(!Array.isArray(r.options)||o.minOptionsForSearchField&&r.options.length>=o.minOptionsForSearchField);return t="loading"==this.state.status?S.VDOM.createElement("div",{key:"msg",className:i.element(s,"message","loading")},o.loadingText):"error"==this.state.status?S.VDOM.createElement("div",{key:"msg",className:i.element(s,"message","error")},o.queryErrorText):"info"==this.state.status?S.VDOM.createElement("div",{key:"msg",className:i.element(s,"message","info")},this.state.message):0==this.state.options.length?S.VDOM.createElement("div",{key:"msg",className:i.element(s,"message","no-results")},o.noResultsText):S.VDOM.createElement("div",{key:"msg",ref:function(t){e.dom.list=t},className:i.element(s,"scroll-container"),onWheel:this.onListWheel.bind(this)},n.prepareRenderCleanupChild(this.list,this.itemStore,"list",{name:"lookupfield-list"})),S.VDOM.createElement("div",{ref:function(t){e.dom.dropdown=t},className:i.element(s,"dropdown"),tabIndex:0,onFocus:this.onDropdownFocus.bind(this),onKeyDown:function(t){return e.onDropdownKeyPress(t)}},a&&S.VDOM.createElement("input",{key:"query",ref:function(t){e.dom.query=t},type:"text",className:i.element(s,"query"),onClick:function(t){t.preventDefault(),t.stopPropagation()},onChange:function(t){return e.query(t.target.value)},onBlur:function(t){return e.onQueryBlur(t)}}),t)},e.prototype.onListWheel=function(t){var e=this.dom.list;(e.scrollTop+e.offsetHeight==e.scrollHeight&&t.deltaY>0||0==e.scrollTop&&t.deltaY<0)&&(t.preventDefault(),t.stopPropagation())},e.prototype.onDropdownFocus=function(t){!this.dom.query||E.isFocused(this.dom.query)||E.isTouchDevice()||S.FocusManager.focus(this.dom.query)},e.prototype.getPlaceholder=function(t){var e=this.props.instance.widget,n=e.CSS,r=e.baseClass;return t?S.VDOM.createElement("span",{className:n.element(r,"placeholder")},t):S.VDOM.createElement("span",{className:n.element(r,"placeholder")}," ")},e.prototype.render=function(){var t,e=this,n=this.props.instance,r=n.data,o=n.widget,i=o.CSS,s=o.baseClass;this.state.dropdownOpen&&(this.itemStore.setData({$options:this.state.options}),t=n.prepareRenderCleanupChild(this.getDropdown(),this.itemStore,"dropdown",{name:"lookupfield-dropdown"}));var a,l=r.disabled||r.readOnly,u=!l&&!this.props.multiple&&!r.required&&null!=r.value&&S.VDOM.createElement("div",{onMouseDown:function(t){t.preventDefault()},onClick:function(t){return e.onClearClick(t)},className:i.element(s,"clear")},S.VDOM.createElement(se,{className:i.element(s,"icon")}));a=this.props.multiple?Array.isArray(r.records)&&r.records.length>0?r.records.map(function(t,n){return S.VDOM.createElement("div",{key:n,className:i.element(s,"tag")},S.VDOM.createElement("span",{className:i.element(s,"tag-value")},t[o.valueTextField]),!l&&S.VDOM.createElement("div",{className:i.element(s,"tag-clear"),onMouseDown:function(t){t.preventDefault(),t.stopPropagation()},onClick:function(n){return e.onClearClick(n,t)}},S.VDOM.createElement(se,{className:i.element(s,"icon")})))}):this.getPlaceholder(r.placeholder):null!=r.value?r.text||this.getPlaceholder():this.getPlaceholder(r.placeholder);var h={visited:r.visited||this.state&&this.state.visited,icon:!u};return S.VDOM.createElement("div",{className:i.expand(r.classNames,i.state(h)),style:r.style,onMouseDown:lt,onTouchStart:lt},S.VDOM.createElement("div",{id:r.id,className:i.element(o.baseClass,"input"),tabIndex:r.disabled?null:0,ref:function(t){e.dom.input=t},onMouseMove:function(t){return c(t,e.props.instance,e.state)},onMouseLeave:function(t){return p(t,e.props.instance)},onClick:function(t){return e.onClick(t)},onInput:function(t){return e.onChange(t,"input")},onChange:function(t){return e.onChange(t,"change")},onKeyDown:function(t){return e.onKeyDown(t)},onMouseDown:function(t){return e.onMouseDown(t)},onBlur:function(t){return e.onBlur(t)},onFocus:function(t){return e.onFocus(t)}},a),u,t)},e.prototype.onClick=function(t){t.stopPropagation(),t.preventDefault(),this.openDropdown(t)},e.prototype.onItemClick=function(t,e){var n=e.store;this.select(t,n.getData()),t.stopPropagation(),t.preventDefault()},e.prototype.onClearClick=function(t,e){var n=this,r=this.props.instance,o=r.data,i=r.store,s=r.widget,a=s.keyBindings;if(t.stopPropagation(),t.preventDefault(),s.multiple){if(Array.isArray(o.records)){var l=this.getLocalKey({$value:e}),u=o.records.filter(function(t){return!n.areKeysEqual(n.getLocalKey({$value:t}),l)});r.set("records",u);var c=u.map(function(t){return n.getLocalKey({$value:t})}).map(function(t){return 1==a.length?t[0]:t});r.set("values",c)}}else this.props.bindings.forEach(function(t){i.set(t.local,null)});this.dom.input.focus()},e.prototype.select=function(t,e){var n=this,r=this.props.instance,o=r.store,i=r.data,s=r.widget,a=s.bindings,l=s.keyBindings;if(s.multiple){var u=i.selectedKeys,c=i.records,p=this.getOptionKey(e),h=c;if(u.find(function(t){return n.areKeysEqual(p,t)}))h=c.filter(function(t){return!n.areKeysEqual(p,n.getLocalKey({$value:t}))});else{var d={$value:{}};a.forEach(function(t){d=M.Binding.get(t.local).set(d,M.Binding.get(t.remote).value(e))}),h=[].concat(c||[],[d.$value])}r.set("records",h);var f=h.map(function(t){return n.getLocalKey({$value:t})}).map(function(t){return 1==l.length?t[0]:t});r.set("values",f)}else a.forEach(function(t){o.set(t.local,M.Binding.get(t.remote).value(e))});this.closeDropdown(t),this.dom.input.focus()},e.prototype.onDropdownKeyPress=function(t){if(13==t.keyCode){var e=this.findOption(this.state.options,this.state.cursorKey),n={$option:this.state.options[e]};this.select(t,n)}if(27==t.keyCode&&(this.closeDropdown(t),this.dom.input.focus()),38==t.keyCode){var e=this.findOption(this.state.options,this.state.cursorKey);e>0&&this.setCursorKey({$option:this.state.options[e-1]}),t.preventDefault(),t.stopPropagation()}if(40==t.keyCode){var e=this.findOption(this.state.options,this.state.cursorKey);e+1<this.state.options.length&&this.setCursorKey({$option:this.state.options[e+1]}),t.preventDefault(),t.stopPropagation()}},e.prototype.onKeyDown=function(t){switch(t.keyCode){case 46:return void this.onClearClick(t);case 16:case 17:case 9:break;default:this.openDropdown(t)}},e.prototype.onMouseDown=function(t){t.preventDefault(),t.stopPropagation(),this.openDropdown(t)},e.prototype.onQueryBlur=function(t){S.FocusManager.nudge()},e.prototype.onFocus=function(t){},e.prototype.onBlur=function(t){this.state.dropdownOpen||this.setState({visited:!0})},e.prototype.closeDropdown=function(t){this.state.dropdownOpen&&this.setState({dropdownOpen:!1,cursorKey:null,visited:!0})},e.prototype.openDropdown=function(t){var e=this,n=this.props.instance.data;this.state.dropdownOpen||n.disabled||n.readOnly||(this.query(""),this.setState({dropdownOpen:!0},function(){e.dom.dropdown.focus()}))},e.prototype.query=function(t){var e=this,n=this.props.instance,r=n.widget,o=n.data;if(this.queryTimeoutId&&clearTimeout(this.queryTimeoutId),t.length<r.minQueryLength)return void this.setState({status:"info",message:"Please type in at least "+r.minQueryLength+" character(s) to start the search."});if(Array.isArray(o.options)){var i=r.filterOptions(this.props.instance,o.options,t);this.setState({options:i,cursorKey:this.suggestCursorKey(i),status:"loaded"})}this.props.onQuery&&(this.setState({status:"loading"}),this.queryTimeoutId=setTimeout(function(){delete e.queryTimeoutId;var n=e.props.onQuery(t,e.props.instance);Promise.resolve(n).then(function(t){e.setState({options:t,cursorKey:e.suggestCursorKey(t),status:"loaded"})}).catch(function(t){e.setState({status:"error"}),E.Console.log("Lookup query error:",t)})},r.queryDelay))},e.prototype.componentWillReceiveProps=function(t){t.instance.data.visited&&this.setState({visited:!0}),d(this.dom.input,t.instance,this.state)},e.prototype.componentDidMount=function(){f(this.dom.input,this.props.instance,this.state),this.props.instance.data.autoFocus&&this.dom.input.focus()},e.prototype.componentWillUnmount=function(){this.queryTimeoutId&&clearTimeout(this.queryTimeoutId),h(this.dom.input)},e}(S.VDOM.Component),pe=function(t){function e(){return V(this,e),N(this,t.apply(this,arguments))}return P(e,t),e.prototype.declareData=function(){var e;(e=t.prototype.declareData).call.apply(e,[this,{value:void 0,disabled:void 0,readOnly:void 0,enabled:void 0,placeholder:void 0,required:void 0,format:void 0,minValue:void 0,maxValue:void 0,minExclusive:void 0,maxExclusive:void 0,incrementPercentage:void 0,increment:void 0}].concat(Array.prototype.slice.call(arguments)))},e.prototype.init=function(){t.prototype.init.call(this)},e.prototype.prepareData=function(e,n){t.prototype.prepareData.call(this,e,n);var r=n.data;r.formatted=E.Format.value(r.value,r.format)},e.prototype.formatValue=function(t,e){var n=e.data;return n.formatted},e.prototype.validate=function(e,n){t.prototype.validate.call(this,e,n);var r=n.data;"number"!=typeof r.value||r.error||("number"==typeof r.minValue&&(r.value<r.minValue?r.error=M.StringTemplate.format(this.minValueErrorText,r.minValue):r.value==r.minValue&&r.minExclusive&&(r.error=M.StringTemplate.format(this.minExclusiveErrorText,r.minValue))),"number"==typeof r.maxValue&&(r.value>r.maxValue?r.error=M.StringTemplate.format(this.maxValueErrorText,r.maxValue):r.value==r.maxValue&&r.maxExclusive&&(r.error=M.StringTemplate.format(this.maxExclusiveErrorText,r.maxValue))))},e.prototype.renderInput=function(t,e,n){var r=this;return S.VDOM.createElement(he,{key:n+"-content",data:e.data,instance:e,inputType:"text",handleChange:function(t,n,o){return r.handleChange(t,n,e,o)}})},e.prototype.handleChange=function(t,e,n,r){this.reactOn.indexOf(e)!=-1&&(n.setState({inputError:!1}),n.set("value",r))},e}(Bt);pe.prototype.baseClass="numberfield",pe.prototype.reactOn="input wheel blur",pe.prototype.format="n",pe.prototype.maxValueErrorText="The number should be at most {0:n}.",pe.prototype.maxExclusiveErrorText="The number should be less than {0:n}.",pe.prototype.minValueErrorText="The number should be at least {0:n}.",pe.prototype.minExclusiveErrorText="The number should be greater than {0:n}.",pe.prototype.suppressErrorTooltipsUntilVisited=!0,pe.prototype.incrementPercentage=.1,pe.prototype.snapToIncrement=!0,pe.prototype.icon=null,S.Widget.alias("numberfield",pe);var he=function(t){function e(n){V(this,e);var r=N(this,t.call(this,n));return r.data=n.instance.data,r.state={visited:n.instance.data.visited},r}return P(e,t),e.prototype.shouldComponentUpdate=function(t,e){return t.instance.shouldUpdate||e!=this.state},e.prototype.render=function(){var t=this,e=this.props.instance,n=e.data,r=e.widget,o=r.CSS,i=r.baseClass,s=r.icon&&S.VDOM.createElement("div",{className:o.element(i,"tool"),onMouseDown:ut,onClick:function(e){return t.onChange(e,"enter")}},ot.render(r.icon,{className:o.element(i,"icon")}));return S.VDOM.createElement("div",{className:o.expand(n.classNames,o.state({visited:n.visited||this.state&&this.state.visited})),style:n.style,onMouseDown:lt,onTouchStart:lt},S.VDOM.createElement("input",{id:n.id,type:this.props.inputType,className:o.element(i,"input"),defaultValue:n.formatted,ref:function(e){t.input=e},style:n.inputStyle,disabled:n.disabled,readOnly:n.readOnly,placeholder:n.placeholder,onMouseMove:function(e){return c(e,t.props.instance,t.state)},onMouseLeave:function(e){return p(e,t.props.instance)},onInput:function(e){return t.onChange(e,"input")},onChange:function(e){return t.onChange(e,"change")},onKeyDown:function(e){13==e.keyCode&&t.onChange(e,"enter")},onBlur:function(e){t.onChange(e,"blur")},onWheel:function(e){t.onChange(e,"wheel")},onClick:lt}),s)},e.prototype.componentWillReceiveProps=function(t){var e=t.instance,n=e.data,r=e.state;this.input.value==t.data.formatted||this.data.formatted==n.formatted&&r.inputError||(this.input.value=t.data.formatted||"",t.instance.setState({inputError:!1})),this.data=n,n.visited&&this.setState({visited:!0}),d(this.input,t.instance,this.state)},e.prototype.componentDidMount=function(){f(this.input,this.props.instance,this.state),this.props.instance.data.autoFocus&&this.input.focus()},e.prototype.componentWillUnmount=function(){h(this.input)},e.prototype.getPreCursorDigits=function(t,e){for(var n="",r=ne.getNumberCulture(),o=r.decimalSeparator||".",i=0;i<e;i++)"0"<=t[i]&&t[i]<="9"?n+=t[i]:t[i]==o?n+=".":"-"==t[i]&&(n+="-");return n},e.prototype.updateCursorPosition=function(t){if("string"==typeof t){for(var e=0,n=0,r=this.input.value||"";n<t.length&&e<r.length;)r[e]==t[n]?(e++,n++):e++;this.input.setSelectionRange(e,e)}},e.prototype.calculateIncrement=function(t,e){if(0==t)return.1;var n=Math.abs(t*e),r=Math.floor(Math.log10(n)+.001),o=Math.pow(10,r);return n/o>4.999?5*o:n/o>1.999?2*o:o},e.prototype.onChange=function(t,e){var n=this.props.instance,r=n.data,o=n.widget;if("blur"==e&&this.setState({visited:!0}),t.target.value){var i=ne.getNumberCulture().parse(t.target.value);if(isNaN(i))return void this.props.instance.setState({inputError:"Invalid number entered."});if("wheel"==e){t.preventDefault();var s=null!=r.increment?r.increment:this.calculateIncrement(i,r.incrementPercentage);if(i+=t.deltaY<0?s:-s,o.snapToIncrement&&(i=Math.round(i/s)*s),null!=r.minValue)if(r.minExclusive){if(i<=r.minValue)return}else i=Math.max(i,r.minValue);if(null!=r.maxValue)if(r.maxExclusive){if(i>=r.maxValue)return}else i=Math.min(i,r.maxValue)}var a=r.format,l=E.Format.value(i,a),u=ne.getNumberCulture();if(i=u.parse(l),"blur"!=e&&"."!=t.target.value[t.target.value.length-1]&&","!=t.target.value[t.target.value.length-1]&&("0"!=t.target.value[t.target.value.length-1]||"-1"==t.target.value.indexOf(u.decimalSeparator))){var c=this.getPreCursorDigits(this.input.value,this.input.selectionStart);this.input.value=l,this.updateCursorPosition(c)}this.props.handleChange(t,e,i)}else this.props.handleChange(t,e,null)},e}(S.VDOM.Component),de=function(t){function e(){return V(this,e),N(this,t.apply(this,arguments))}return P(e,t),e.prototype.declareData=function(){var e;(e=t.prototype.declareData).call.apply(e,[this,{rows:void 0}].concat(Array.prototype.slice.call(arguments)))},e.prototype.renderInput=function(t,e,n){var r=this;return S.VDOM.createElement(fe,{key:n,data:e.data,instance:e,handleChange:function(t,n){return r.handleChange(t,n,e)}})},e.prototype.handleChange=function(t,e,n){this.reactOn.indexOf(e)!=-1&&n.set("value",t.target.value||null)},e}(Wt);de.prototype.baseClass="textarea",de.prototype.reactOn="blur",de.prototype.suppressErrorTooltipsUntilVisited=!0;var fe=function(t){function e(n){V(this,e);var r=N(this,t.call(this,n));return r.state={visited:n.instance.data.visited},r}return P(e,t),e.prototype.render=function(){var t=this,e=this.props.instance,n=e.widget,r=e.data,o=n.CSS,i=n.baseClass;return S.VDOM.createElement("div",{className:o.expand(r.classNames,o.state({visited:this.state.visited})),style:r.style,onMouseDown:lt,onTouchStart:lt},S.VDOM.createElement("textarea",{className:o.element(i,"input"),ref:function(e){t.input=e},id:r.id,rows:r.rows,style:r.inputStyle,defaultValue:r.value,disabled:r.disabled,readOnly:r.readOnly,placeholder:r.placeholder,onInput:function(e){return t.onChange(e,"input")},onChange:function(e){return t.onChange(e,"change")},onBlur:function(e){t.onChange(e,"blur")},onClick:lt,onMouseMove:function(n){return c(n,e,t.state)},onMouseLeave:function(t){return p(t,e)}}))},e.prototype.shouldComponentUpdate=function(t,e){return t.instance.shouldUpdate!==!1||this.state!=e},e.prototype.componentWillUnmount=function(){h(this.input)},e.prototype.componentDidMount=function(){f(this.input,this.props.instance,this.state),this.props.instance.data.autoFocus&&this.input.focus()},e.prototype.onKeyDown=function(t){switch(t.keyCode){case 13:this.onChange(t,"enter");break;case 37:case 39:t.stopPropagation()}},e.prototype.componentWillReceiveProps=function(t){var e=t.instance.data;e.value!=this.input.value&&(this.input.value=e.value||""),e.visited&&this.setState({visited:!0}),d(this.input,t.instance,this.state)},e.prototype.onChange=function(t,e){"blur"==e&&this.setState({visited:!0}),this.props.handleChange(t,e)},e}(S.VDOM.Component);S.Widget.alias("textarea",de);var ye=function(t){function e(){return V(this,e),N(this,t.apply(this,arguments))}return P(e,t),e.prototype.declareData=function(){var e;(e=t.prototype.declareData).call.apply(e,[this,{label:void 0}].concat(Array.prototype.slice.call(arguments)))},e.prototype.init=function(){if(null!=this.label){var e={type:Kt,asterisk:this.asterisk,required:!0};this.label.isComponentType?e=this.label:M.isSelector(this.label)?e.text=this.label:Object.assign(e,this.label),this.label=S.Widget.create(e)}t.prototype.init.call(this)},e.prototype.initComponents=function(e,n){var r;return(r=t.prototype.initComponents).call.apply(r,[this].concat(Array.prototype.slice.call(arguments),[{label:this.label}]))},e.prototype.renderLabel=function(t,e,n){if(e.components.label)return e.components.label.render(t,n)},e.prototype.render=function(t,e,n){return{label:this.renderLabel(t,e,n),content:this.renderChildren(t,e,n)}},e}(S.PureContainer);S.Widget.alias("labeled-container",ye);var me=function(t){function e(){return V(this,e),N(this,t.apply(this,arguments))}return P(e,t),e.prototype.checkVisible=function(t,e,n){if(t.lastFieldId&&t.validation&&t.validation.errors&&t.validation.errors.length>0){var r=e.lastError=t.validation.errors[t.validation.errors.length-1];return r.fieldId==t.lastFieldId}return!1},e.prototype.explore=function(e,n){var r=n.data,o=n.lastError;r.errorMessage=o.message,r.fieldId=o.fieldId,t.prototype.explore.call(this,e,n)},e.prototype.render=function(t,e,n){var r=e.data;return S.VDOM.createElement("label",{key:n,className:r.classNames,htmlFor:r.fieldId},r.errorMessage)},e}(S.Widget);me.prototype.baseClass="validationerror",me.prototype.pure=!1,me.prototype.memoize=!1,S.Widget.alias("validation-error",me);var ge=function(t){function e(){return V(this,e),N(this,t.apply(this,arguments))}return P(e,t),e.prototype.declareData=function(){var e;return(e=t.prototype.declareData).call.apply(e,[this].concat(Array.prototype.slice.call(arguments),[{errors:void 0,valid:void 0,invalid:void 0}]))},e.prototype.explore=function(e,n){e.validation||(e.validation={errors:[]});var r=e.validation.errors.length;t.prototype.explore.call(this,e,n),n.valid=e.validation.errors.length==r},e.prototype.prepare=function(e,n){var r=e.validation.errors.length;t.prototype.prepare.call(this,e,n),n.valid=n.valid&&e.validation.errors.length==r,n.set("valid",n.valid),n.set("invalid",!n.valid)},e}(S.PureContainer);ge.prototype.pure=!1,S.Widget.alias("validation-group",ge);var ve=function(t){function n(){return V(this,n),N(this,t.apply(this,arguments))}return P(n,t),n.prototype.declareData=function(){var e,n={};"range"==this.mode&&(this.range=!0,this.mode="edit",E.Console.warn('Please use the range flag on MonthPickers. Syntax mode="range" is deprecated.',this)),n=this.range?{from:void 0,to:void 0}:{value:void 0},(e=t.prototype.declareData).call.apply(e,[this,n,{refDate:void 0,disabled:void 0,minValue:void 0,minExclusive:void 0,maxValue:void 0,maxExclusive:void 0}].concat(Array.prototype.slice.call(arguments)))},n.prototype.init=function(){t.prototype.init.call(this)},n.prototype.prepareData=function(e,n){var r,o=n.data;o.stateMods={disabled:o.disabled},!this.range&&o.value&&(o.date=E.monthStart(new Date(o.value))),this.range&&(o.from&&(o.from=E.monthStart(new Date(o.from))),o.to&&(o.to=E.monthStart(new Date(o.to)))),o.refDate&&(o.refDate=E.monthStart(new Date(o.refDate))),o.maxValue&&(o.maxValue=E.monthStart(new Date(o.maxValue))),o.minValue&&(o.minValue=E.monthStart(new Date(o.minValue))),(r=t.prototype.prepareData).call.apply(r,[this].concat(Array.prototype.slice.call(arguments)))},n.prototype.validate=function(e,n){t.prototype.validate.call(this,e,n);var r=n.data;if(!r.error&&r.date){var o;r.maxValue&&(o=E.dateDiff(r.date,r.maxValue),o>0?r.error=M.StringTemplate.format(this.maxValueErrorText,r.maxValue):0==o&&r.maxExclusive&&(r.error=M.StringTemplate.format(this.maxExclusiveErrorText,r.maxValue))),r.minValue&&(o=E.dateDiff(r.date,r.minValue),o<0?r.error=M.StringTemplate.format(this.minValueErrorText,r.minValue):0==o&&r.minExclusive&&(r.error=M.StringTemplate.format(this.minExclusiveErrorText,r.minValue)))}},n.prototype.renderInput=function(t,e,n){var r=this;return S.VDOM.createElement(xe,{key:n,instance:e,handleSelect:function(t,n){return r.handleSelect(t,e,n)},onBlur:this.onBlur,onFocusOut:this.onFocusOut,onKeyDown:this.onKeyDown,autoFocus:this.autoFocus})},n.prototype.handleSelect=function(t,n,r){var o=t.data;o.disabled||be(n,o)&&(this.onBeforeSelect&&this.onBeforeSelect(e,t,n,r)===!1||(this.range?(t.set("from",n.toISOString()),t.set("to",r.toISOString())):t.set("value",n.toISOString()),this.onSelect&&this.onSelect(t,n,r)))},n}(Bt);ve.prototype.baseClass="monthpicker",ve.prototype.maxValueErrorText="Selected date is after the latest allowed date of {0:d}.",ve.prototype.maxExclusiveErrorText="Selected date should be before {0:d}.",ve.prototype.minValueErrorText="Selected date is after the latest allowed date of {0:d}.",ve.prototype.minExclusiveErrorText="Selected date should be before {0:d}.",ve.prototype.range=!1,ve.prototype.startYear=1980,ve.prototype.endYear=2030,S.Widget.alias("month-picker",ve);var be=function(t,e){return!(e.maxValue&&!E.upperBoundCheck(t,e.maxValue,e.maxExclusive))&&!(e.minValue&&!E.lowerBoundCheck(t,e.minValue,e.minExclusive))},we=function(t){return 100*t.getFullYear()+t.getMonth()+1},xe=function(t){function e(n){V(this,e);var r=N(this,t.call(this,n)),o=n.instance.data,i=E.monthStart(o.refDate?o.refDate:o.date||o.from||new Date);return r.dom={},r.state={cursorYear:i.getFullYear(),cursorMonth:i.getMonth()+1,cursorQuarter:i.getMonth()/3,column:"M"},r}return P(e,t),e.prototype.moveCursor=function(t,e){t.preventDefault(),t.stopPropagation(),this.setState(e)},e.prototype.handleKeyPress=function(t){var e=this.props.instance.widget,n=this.state,r=n.cursorMonth,o=n.cursorYear,i=n.cursorQuarter,s=n.column;switch(t.keyCode){case E.KeyCode.enter:e.range&&t.shiftKey&&this.dragStartDates?this.handleMouseUp(t):this.handleMouseDown(t,{},!1),t.preventDefault(),t.stopPropagation();break;case E.KeyCode.left:"Y"==s?this.moveCursor(t,{cursorQuarter:3,cursorYear:o-1,column:"Q"}):"Q"==s?this.moveCursor(t,{cursorMonth:4*i,column:"M"}):"M"==s&&(r-1)%3==0?this.moveCursor(t,{column:"Y"}):this.moveCursor(t,{cursorMonth:r-1});break;case E.KeyCode.right:"Y"==s?this.moveCursor(t,{cursorMonth:1,column:"M"}):"Q"==s?this.moveCursor(t,{column:"Y",cursorYear:3==i?o+1:o}):"M"==s&&(r-1)%3==2?this.moveCursor(t,{column:"Q",cursorQuarter:Math.floor((r-1)/3)}):this.moveCursor(t,{cursorMonth:r+1});break;case E.KeyCode.up:"Y"==s?this.moveCursor(t,{cursorYear:o-1}):"Q"==s?this.moveCursor(t,{cursorQuarter:(i+3)%4,cursorYear:0==i?o-1:o}):"M"==s&&(r>3?this.moveCursor(t,{cursorMonth:r-3}):this.moveCursor(t,{cursorMonth:r+9,cursorYear:o-1}));break;case E.KeyCode.down:"Y"==s?this.moveCursor(t,{cursorYear:o+1}):"Q"==s?this.moveCursor(t,{cursorQuarter:(i+1)%4,cursorYear:3==i?o+1:o}):"M"==s&&(r<10?this.moveCursor(t,{cursorMonth:r+3}):this.moveCursor(t,{cursorMonth:r-9,cursorYear:o+1}));break;case E.KeyCode.pageUp:this.moveCursor(t,{cursorYear:this.state.cursorYear-1});break;case E.KeyCode.pageDown:this.moveCursor(t,{cursorYear:this.state.cursorYear+1});break;default:this.props.onKeyDown&&this.props.onKeyDown(t,this.props.instance)}},e.prototype.handleBlur=function(t){S.FocusManager.nudge(),this.props.onBlur&&this.props.onBlur(),this.moveCursor(t,{cursorYear:-1})},e.prototype.handleFocus=function(t){this.props.onFocusOut&&S.oneFocusOut(this,this.dom.el,this.handleFocusOut.bind(this))},e.prototype.handleFocusOut=function(){this.props.onFocusOut&&this.props.onFocusOut()},e.prototype.getCursorDates=function(){var t=this.state,e=t.cursorMonth,n=t.cursorYear,r=t.cursorQuarter,o=t.column;switch(o){case"M":return[new Date(n,e-1,1),new Date(n,e,1)];case"Q":return[new Date(n,3*r,1),new Date(n,3*r+3,1)];case"Y":return[new Date(n,0,1),new Date(n+1,0,1)]}},e.prototype.handleMouseDown=function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=this.props.instance,o=r.widget;t.stopPropagation(),o.range&&(this.dragStartDates=this.getCursorDates(),n?this.setState(I({state:"drag"},e)):o.handleSelect.apply(o,[r].concat(this.dragStartDates)))},e.prototype.handleMouseUp=function(t){var e=this.props.instance,n=e.widget;if(t.stopPropagation(),n.range){if(this.dragStartDates){var r=this.dragStartDates,o=r[0],i=r[1],s=this.getCursorDates(),a=s[0],l=s[1];n.handleSelect(e,E.minDate(o,a),E.maxDate(i,l)),this.dragStartDates=this.getCursorDates()}}else{var u=this.getCursorDates()[0];n.handleSelect(e,u)}},e.prototype.render=function(){var t=this,e=this.props.instance,n=e.data,r=e.widget,o=r.CSS,i=r.baseClass,s=r.startYear,a=r.endYear,l=[],u=this.state.cursorYear,p=this.state.cursorYear+20;if(this.state.yearHeight){var h=x(Math.ceil(this.dom.el.offsetHeight/this.state.yearHeight));u=Math.max(s,s+D(Math.floor(this.dom.el.scrollTop/this.state.yearHeight))-h),p=Math.min(a,u+3*h),
this.start=u}else this.years=p-u+1;var d,f,y=1e4,m=0;if(n.date&&!r.range)y=we(n.date),m=y+.1;else if(r.range)if("drag"==this.state.state){var g=this.dragStartDates,v=g[0],b=g[1],w=this.getCursorDates(),C=w[0],k=w[1];d=Math.min(we(v),we(C)),f=Math.max(we(b),we(k)),y=Math.min(d,f),m=Math.max(d,f)}else n.from&&n.to&&(d=we(n.from),f=we(n.to),y=Math.min(d,f),m=Math.max(d,f));for(var E=ne.getDateTimeCulture().getMonthNames("short"),M=function(e){for(var n=[],r=function(r){var s=[];0==r&&s.push(S.VDOM.createElement("th",{key:"year",rowSpan:4,className:o.element(i,"year",{cursor:"Y"==t.state.column&&e==t.state.cursorYear}),onMouseEnter:function(n){t.moveCursor(n,{cursorYear:e,column:"Y"})},onMouseDown:function(n){t.handleMouseDown(n,{cursorYear:e,column:"Y"})},onMouseUp:function(e){t.handleMouseUp(e)}},e));for(var a=function(n){var i=3*r+n+1;s.push(S.VDOM.createElement("td",{key:"M"+i,className:o.state({cursor:"M"==t.state.column&&e==t.state.cursorYear&&i==t.state.cursorMonth,selected:100*e+i>=y&&100*e+i<m}),onMouseEnter:function(n){t.moveCursor(n,{cursorYear:e,cursorMonth:i,column:"M"})},onMouseDown:function(n){t.handleMouseDown(n,{cursorYear:e,cursorMonth:i,column:"M"})},onMouseUp:function(e){t.handleMouseUp(e)}},E[i-1].substr(0,3)))},l=0;l<3;l++)a(l);s.push(S.VDOM.createElement("th",{key:"q"+r,className:o.state({cursor:"Q"==t.state.column&&e==t.state.cursorYear&&r==t.state.cursorQuarter}),onMouseEnter:function(n){t.moveCursor(n,{cursorYear:e,cursorQuarter:r,column:"Q"})},onMouseDown:function(n){t.handleMouseDown(n,{cursorYear:e,cursorQuarter:r,column:"Q"})},onMouseUp:function(e){t.handleMouseUp(e)}},"Q"+(r+1))),n.push(s)},s=0;s<4;s++)r(s);l.push(n)},O=u;O<=p;O++)M(O);return S.VDOM.createElement("div",{ref:function(e){t.dom.el=e},className:n.classNames,tabIndex:n.disabled?null:0,onKeyDown:function(e){return t.handleKeyPress(e)},onMouseDown:function(t){return t.stopPropagation()},onMouseMove:function(e){return c(e,t.props.instance)},onMouseLeave:this.onMouseLeave.bind(this),onFocus:function(e){return t.handleFocus(e)},onBlur:this.handleBlur.bind(this),onScroll:this.onScroll.bind(this)},this.state.yearHeight&&S.VDOM.createElement("div",{style:{height:(u-s)*this.state.yearHeight+"px"}}),S.VDOM.createElement("table",{ref:function(e){t.dom.table=e}},l.map(function(t,e){return S.VDOM.createElement("tbody",{key:e},t.map(function(t,e){return S.VDOM.createElement("tr",{key:e},t)}))})),this.state.yearHeight&&S.VDOM.createElement("div",{style:{height:Math.max(0,a-p)*this.state.yearHeight+"px"}}))},e.prototype.onScroll=function(){var t=this.props.instance.widget.startYear,e=x(Math.ceil(this.dom.el.offsetHeight/this.state.yearHeight)),n=Math.max(t,t+D(Math.floor(this.dom.el.scrollTop/this.state.yearHeight))-e);Math.abs(this.start-n)>e/2&&this.forceUpdate()},e.prototype.onMouseLeave=function(t){p(t,this.props.instance),E.isFocused(this.dom.el)||this.moveCursor(t,{cursorYear:-1})},e.prototype.componentDidMount=function(){var t=this;this.props.autoFocus&&this.dom.el.focus(),f(this.dom.el,this.props.instance);var e=this.dom.table.scrollHeight/this.years;this.setState({yearHeight:e},function(){var e=t.props.instance,n=e.widget,r=e.data,o=n.startYear,i=1;n.range&&r.from&&r.to&&(i=r.to.getFullYear()-r.from.getFullYear()+1,0==r.to.getMonth()&&1==r.to.getDate()&&i--),t.dom.el.scrollTop=(t.state.cursorYear-o+i/2)*t.state.yearHeight-t.dom.el.offsetHeight/2})},e.prototype.componentWillReceiveProps=function(t){t.instance.data;this.setState({state:"normal"}),d(this.dom.el,t.instance)},e.prototype.componentWillUnmount=function(){S.offFocusOut(this),h(this.dom.el)},e}(S.VDOM.Component),De=function(t){function e(){return V(this,e),N(this,t.apply(this,arguments))}return P(e,t),e.prototype.declareData=function(){var e;(e=t.prototype.declareData).call.apply(e,[this,{value:void 0}].concat(Array.prototype.slice.call(arguments)))},e.prototype.renderInput=function(t,e,n){return S.VDOM.createElement(Ce,{key:n,instance:e})},e.prototype.handleEvent=function(t,e,n){e.store;if(this.reportOn.indexOf(t)!=-1){var r;switch(this.format){case"rgba":r="rgba("+n.r.toFixed(0)+","+n.g.toFixed(0)+","+n.b.toFixed(0)+","+Math.round(100*n.a)/100+")";break;case"hsla":r="hsla("+n.h.toFixed(0)+","+n.s.toFixed(0)+","+n.l.toFixed(0)+","+Math.round(100*n.a)/100+")";break;case"hex":r=E.rgbToHex(n.r,n.g,n.b)}e.set("value",r)}},e}(Bt);De.prototype.baseClass="colorpicker",De.prototype.reportOn="blur change",De.prototype.format="rgba",S.Widget.alias("color-picker",De);var Ce=function(t){function e(n){V(this,e);var r=N(this,t.call(this,n));return r.data=n.instance.data,r.state=r.parse(n.instance.data.value),r}return P(e,t),e.prototype.componentWillReceiveProps=function(t){var e=t.instance.data,n=this.parse(e.value);n.r==this.state.r&&n.g==this.state.g&&n.b==this.state.b&&n.a==this.state.a||this.setState(n)},e.prototype.parse=function(t){var e=E.parseColor(t);if(null==e&&(e={type:"rgba",r:128,g:128,b:128,a:0}),e.a=Math.round(100*e.a)/100,"rgba"==e.type){var n=E.rgbToHsl(e.r,e.g,e.b),r=n[0],o=n[1],i=n[2];return{r:e.r,g:e.g,b:e.b,h:r,s:o,l:i,a:e.a}}if("hsla"==e.type){var s=E.rgbToHsl(e.h,e.s,e.l),a=s[0],l=s[1],u=s[2];return{r:a,g:l,b:u,h:e.h,s:e.s,l:e.l,a:e.a}}throw new Error("Color "+t+" parsing failed.")},e.prototype.render=function(){var t=this,e=this.state,n=e.h,r=e.s,o=e.l,i=e.a,s=e.r,a=e.g,l=e.b,u=this.props.instance,c=u.widget,p=u.data,h=c.CSS,d=c.baseClass,f="hsl("+n+",100%,50%)",y="hsla("+n.toFixed(0)+","+r.toFixed(0)+"%,"+o.toFixed(0)+"%,"+i+")",m="rgba("+s.toFixed(0)+","+a.toFixed(0)+","+l.toFixed(0)+","+i+")",g=E.rgbToHex(s,a,l),v=E.getVendorPrefix("css")+"linear-gradient(left, hsla("+n+","+r+"%,"+o+"%,0) 0%, hsla("+n+","+r+"%,"+o+"%,1) 100%)";return S.VDOM.createElement("div",{className:p.classNames,style:p.style,onBlur:this.onBlur.bind(this),onMouseDown:lt,onTouchStart:lt},S.VDOM.createElement("div",{className:h.element(d,"picker"),style:{backgroundColor:f},onMouseDown:this.onSLSelect.bind(this),onTouchStart:this.onSLSelect.bind(this)},S.VDOM.createElement("div",{className:h.element(d,"indicator"),style:{left:"calc("+r+"% - 4px)",top:"calc("+(100-o)+"% - 4px)",borderColor:"rgba("+(s<128?255:0)+", "+(a<128?255:0)+", "+(l<128?255:0)+", 0.5)"}})),S.VDOM.createElement("div",{className:h.element(d,"details")},S.VDOM.createElement("div",{className:h.element(d,"hue"),onMouseDown:this.onHueSelect.bind(this),onTouchStart:this.onHueSelect.bind(this),onWheel:function(e){t.onWheel(e,"h",10)}},S.VDOM.createElement("div",{className:h.element(d,"indicator"),style:{left:"calc("+n/3.6+"% - 2px)"}})),S.VDOM.createElement("div",{className:h.element(d,"inputs")},S.VDOM.createElement("label",null,"H ",S.VDOM.createElement("input",{value:n.toFixed(0),onChange:function(e){t.onNumberChange(e,"h")},onWheel:function(e){t.onWheel(e,"h",10)}})),S.VDOM.createElement("label",null,"S ",S.VDOM.createElement("input",{value:r.toFixed(0),onChange:function(e){t.onNumberChange(e,"s")},onWheel:function(e){t.onWheel(e,"s",5)}})),S.VDOM.createElement("label",null,"L ",S.VDOM.createElement("input",{value:o.toFixed(0),onChange:function(e){t.onNumberChange(e,"l")},onWheel:function(e){t.onWheel(e,"l",5)}})),S.VDOM.createElement("label",null,"A ",S.VDOM.createElement("input",{value:i,onChange:function(e){t.onNumberChange(e,"a")},onWheel:function(e){t.onWheel(e,"a",.1)}}))),S.VDOM.createElement("div",{className:h.element(d,"alpha"),onMouseDown:this.onAlphaSelect.bind(this),onTouchStart:this.onAlphaSelect.bind(this),onWheel:function(e){t.onWheel(e,"a",.1)}},S.VDOM.createElement("div",{style:{background:v}}),S.VDOM.createElement("div",{className:h.element(d,"indicator"),style:{left:"calc("+100*i+"% - 2px)"}})),S.VDOM.createElement("div",{className:h.element(d,"inputs")},S.VDOM.createElement("label",null,"R ",S.VDOM.createElement("input",{value:s.toFixed(0),onChange:function(e){t.onNumberChange(e,"r")},onWheel:function(e){t.onWheel(e,"r",5)}})),S.VDOM.createElement("label",null,"G ",S.VDOM.createElement("input",{value:a.toFixed(0),onChange:function(e){t.onNumberChange(e,"g")},onWheel:function(e){t.onWheel(e,"g",5)}})),S.VDOM.createElement("label",null,"B ",S.VDOM.createElement("input",{value:l.toFixed(0),onChange:function(e){t.onNumberChange(e,"b")},onWheel:function(e){t.onWheel(e,"b",5)}})),S.VDOM.createElement("label",null,"A ",S.VDOM.createElement("input",{value:i,onChange:function(e){t.onNumberChange(e,"a")},onWheel:function(e){t.onWheel(e,"a",.1)}}))),S.VDOM.createElement("div",{className:h.element(d,"preview")},S.VDOM.createElement("div",{className:h.element(d,"color")},S.VDOM.createElement("div",{style:{backgroundColor:y}})),S.VDOM.createElement("div",{className:h.element(d,"values")},S.VDOM.createElement("input",{value:y,readOnly:!0}),S.VDOM.createElement("input",{value:m,readOnly:!0}),S.VDOM.createElement("input",{value:g,readOnly:!0})))))},e.prototype.onHueSelect=function(t){var e=this;t.preventDefault(),t.stopPropagation();var n=t.currentTarget,r=n.getBoundingClientRect(),o=function(t){var o=a(t),i=Math.max(0,Math.min(1,(o.clientX+1-r.left)/n.offsetWidth));e.setColorProp({h:360*i})};s(t,o),o(t)},e.prototype.onAlphaSelect=function(t){var e=this;t.preventDefault(),t.stopPropagation();var n=t.currentTarget,r=n.getBoundingClientRect(),o=function(t){var o=a(t),i=Math.max(0,Math.min(1,(o.clientX+1-r.left)/n.offsetWidth));e.setColorProp({a:i})};s(t,o),o(t)},e.prototype.onSLSelect=function(t){var e=this;t.preventDefault(),t.stopPropagation();var n=t.currentTarget,r=n.getBoundingClientRect(),o=function(t){var o=a(t),i=Math.max(0,Math.min(1,(o.clientX+1-r.left)/n.offsetWidth)),s=Math.max(0,Math.min(1,(o.clientY+1-r.top)/n.offsetWidth)),l=i,u=1-s;e.setColorProp({s:100*l,l:100*u})};s(t,o),o(t)},e.prototype.setColorProp=function(t,e){var n=this;if("string"==typeof t){var r;r={},r[t]=e,t=r}var o=I({},this.state),i=!1;for(var s in t)switch(e=t[s],s){case"h":o.h=Math.min(360,Math.max(0,e));var a=E.hslToRgb(o.h,o.s,o.l);o.r=a[0],o.g=a[1],o.b=a[2],i=!0;break;case"s":o.s=Math.min(100,Math.max(0,e));var l=E.hslToRgb(o.h,o.s,o.l);o.r=l[0],o.g=l[1],o.b=l[2],i=!0;break;case"l":o.l=Math.min(100,Math.max(0,e));var u=E.hslToRgb(o.h,o.s,o.l);o.r=u[0],o.g=u[1],o.b=u[2],i=!0;break;case"r":case"g":case"b":o[s]=Math.round(Math.min(255,Math.max(0,e)));var c=E.rgbToHsl(o.r,o.g,o.b),p=c[0],h=c[1],d=c[2];o.h=p,o.s=h,o.l=d,i=!0;break;case"a":o.a=Math.round(100*Math.min(1,Math.max(0,e)))/100}i&&0===o.a&&(o.a=1),this.setState(o,function(){n.props.instance.widget.handleEvent("change",n.props.instance,n.state)})},e.prototype.onNumberChange=function(t,e){t.preventDefault(),t.stopPropagation();var n=parseFloat(t.target.value||"0");this.setColorProp(e,n)},e.prototype.onWheel=function(t,e,n){t.preventDefault(),t.stopPropagation();var r=t.deltaY<0?1:-1;this.setColorProp(e,this.state[e]+n*r)},e.prototype.onBlur=function(){this.props.instance.widget.handleEvent("blur",this.props.instance,this.state)},e}(S.VDOM.Component),ke=function(t){function e(){return V(this,e),N(this,t.apply(this,arguments))}return P(e,t),e.prototype.declareData=function(){var e;"range"==this.mode&&(this.range=!0,this.mode="edit",E.Console.warn('Please use the range flag on MonthFields. Syntax mode="range" is deprecated.',this));var n={};n=this.range?{from:void 0,to:void 0}:{value:void 0},(e=t.prototype.declareData).call.apply(e,[this,n,{disabled:void 0,readOnly:void 0,enabled:void 0,placeholder:void 0,required:void 0,minValue:void 0,minExclusive:void 0,maxValue:void 0,maxExclusive:void 0}].concat(Array.prototype.slice.call(arguments)))},e.prototype.init=function(){this.culture||(this.culture=new T.DateTimeCulture(E.Format.culture)),t.prototype.init.call(this)},e.prototype.prepareData=function(e,n){var r,o,i=n.data;if((r=t.prototype.prepareData).call.apply(r,[this].concat(Array.prototype.slice.call(arguments))),!this.range&&i.value){var s=new Date(i.value);i.formatted=this.culture.format(s)}else if(this.range&&i.from&&i.to){var a={year:"numeric",month:"short"};i.from=new Date(i.from),i.to=new Date(i.to),i.to.setDate(i.to.getDate()-1);var l=this.culture.format(i.from,a),u=this.culture.format(i.to,a);l!=u?i.formatted=l+" - "+u:i.formatted=l}i.refDate&&(i.refDate=E.monthStart(new Date(i.refDate))),i.maxValue&&(i.maxValue=E.monthStart(new Date(i.maxValue))),i.minValue&&(i.minValue=E.monthStart(new Date(i.minValue))),(o=t.prototype.prepareData).call.apply(o,[this].concat(Array.prototype.slice.call(arguments)))},e.prototype.validateRequired=function(e,n){var r=n.data;if(this.range){if(!r.from||!r.to)return this.requiredText}else t.prototype.validateRequired.call(this,e,n)},e.prototype.validate=function(e,n){t.prototype.validate.call(this,e,n);var r=n.data;if(!r.error&&r.date){var o;r.maxValue&&(o=E.dateDiff(r.date,r.maxValue),o>0?r.error=M.StringTemplate.format(this.maxValueErrorText,r.maxValue):0==o&&r.maxExclusive&&(r.error=M.StringTemplate.format(this.maxExclusiveErrorText,r.maxValue))),r.minValue&&(o=E.dateDiff(r.date,r.minValue),o<0?r.error=M.StringTemplate.format(this.minValueErrorText,r.minValue):0==o&&r.minExclusive&&(r.error=M.StringTemplate.format(this.minExclusiveErrorText,r.minValue)))}},e.prototype.renderInput=function(t,e,n){return S.VDOM.createElement(Se,{key:n,instance:e,monthPicker:{value:this.value,from:this.from,to:this.to,range:this.range,minValue:this.minValue,maxValue:this.maxValue,minExclusive:this.minExclusive,maxExclusive:this.maxExclusive,maxValueErrorText:this.maxValueErrorText,maxExclusiveErrorText:this.maxExclusiveErrorText,minValueErrorText:this.minValueErrorText,minExclusiveErrorText:this.minExclusiveErrorText}})},e.prototype.formatValue=function(t,e){var n=e.data;return n.formatted||""},e.prototype.parseDate=function(t){return t?t instanceof Date?t:t=this.culture.parse(t,{useCurrentDateForDefaults:!0}):null},e.prototype.onSelect=function(t,e,n){t.setState({inputError:!1}),this.range?(t.set("from",e?e.toISOString():null),t.set("to",n?n.toISOString():null)):t.set("value",e?e.toISOString():null)},e}(Bt);ke.prototype.baseClass="monthfield",ke.prototype.memoize=!1,ke.prototype.maxValueErrorText="Selected date is after the latest allowed date of {0:d}.",ke.prototype.maxExclusiveErrorText="Selected date should be before {0:d}.",ke.prototype.minValueErrorText="Selected date is after the latest allowed date of {0:d}.",ke.prototype.minExclusiveErrorText="Selected date should be before {0:d}.",ke.prototype.suppressErrorTooltipsUntilVisited=!0,ke.prototype.icon="calendar",S.Widget.alias("monthfield",ke);var Se=function(t){function e(n){V(this,e);var r=N(this,t.call(this,n));r.props.instance.component=r;var o=r.props.instance.data;return r.data=o,r.state={dropdownOpen:!1,visited:o.visited},r}return P(e,t),e.prototype.getDropdown=function(){var t=this;if(this.dropdown)return this.dropdown;var e={type:H,relatedElement:this.input,scrollTracking:!0,inline:!0,placementOrder:"down down-left down-right up up-left up-right right right-up right-down left left-up left-down",touchFriendly:!0,items:I({type:ve},this.props.monthPicker,{autoFocus:!0,onFocusOut:function(e){t.closeDropdown(e)},onKeyDown:function(e){return t.onKeyDown(e)},onSelect:function(e){t.closeDropdown(e,function(){t.input.focus()})}})};return this.dropdown=S.Widget.create(e)},e.prototype.render=function(){var t,e=this,n=this.props.instance,r=n.data,o=n.store,i=n.widget,s=i.CSS,a=i.baseClass;r.readOnly||(t=r.required||r.disabled||(i.range?null==r.from:null==r.value)?S.VDOM.createElement("div",{className:s.element(a,"tool")},ot.render(i.icon,{className:s.element(a,"icon")})):S.VDOM.createElement("div",{className:s.element(a,"clear"),onMouseDown:function(t){e.onClearClick(t)}},S.VDOM.createElement(se,{className:s.element(a,"icon")})));var l=!1;return this.state.dropdownOpen&&(l=n.prepareRenderCleanupChild(this.getDropdown(),o,"dropdown",{name:"datefield-dropdown"})),S.VDOM.createElement("div",{className:s.expand(r.classNames,s.state({visited:r.visited||this.state.visited})),style:r.style,onMouseDown:this.onMouseDown.bind(this),onTouchStart:this.onMouseDown.bind(this),onClick:lt},S.VDOM.createElement("input",{id:r.id,ref:function(t){e.input=t},type:"text",className:s.element(a,"input"),style:r.inputStyle,defaultValue:r.formatted,disabled:r.disabled,readOnly:r.readOnly,placeholder:r.placeholder,onInput:function(t){return e.onChange(t,"input")},onChange:function(t){return e.onChange(t,"change")},onKeyDown:function(t){return e.onKeyDown(t)},onBlur:function(t){e.onBlur(t)},onFocus:function(t){e.onFocus(t)},onMouseMove:function(t){return c(t,e.props.instance,e.state)},onMouseLeave:function(t){return p(t,e.props.instance)}}),t,l)},e.prototype.onMouseDown=function(t){t.stopPropagation(),this.state.dropdownOpen?this.closeDropdown(t):this.openDropdownOnFocus=!0,t.target!=this.input&&(t.preventDefault(),this.state.dropdownOpen?this.input.focus():this.openDropdown(t))},e.prototype.onFocus=function(t){this.openDropdownOnFocus&&this.openDropdown(t)},e.prototype.onKeyDown=function(t){var e=this;switch(t.keyCode){case 13:t.stopPropagation(),this.onChange(t,"enter");break;case 27:this.state.dropdownOpen&&(t.stopPropagation(),this.closeDropdown(t,function(){e.input.focus()}));break;case 37:case 39:t.stopPropagation();break;case 40:this.openDropdown(t),t.stopPropagation(),t.preventDefault()}},e.prototype.onBlur=function(t){this.state.dropdownOpen||this.setState({visited:!0}),this.onChange(t,"blur")},e.prototype.closeDropdown=function(t,e){var n=this;this.state.dropdownOpen?(this.scrollableParents&&this.scrollableParents.forEach(function(t){t.removeEventListener("scroll",n.updateDropdownPosition)}),this.setState({dropdownOpen:!1,visited:!0},e)):e&&e()},e.prototype.openDropdown=function(t){var e=this.props.instance.data;this.openDropdownOnFocus=!1,this.state.dropdownOpen||e.disabled||e.readOnly||this.setState({dropdownOpen:!0})},e.prototype.onClearClick=function(t){t.stopPropagation(),t.preventDefault();var e=this.props.instance,n=e.widget;n.onSelect(e,null,null)},e.prototype.componentWillReceiveProps=function(t){var e=t.instance,n=e.data,r=e.state;n.formatted==this.input.value||n.formatted==this.data.formatted&&r.inputError||(this.input.value=n.formatted||"",t.instance.setState({inputError:!1})),this.data=n,n.visited&&this.setState({visited:!0}),d(this.input,this.props.instance,this.state)},e.prototype.componentDidMount=function(){this.props.instance.data.visited&&this.setState({visited:!0}),f(this.input,this.props.instance,this.state),this.props.instance.data.autoFocus&&this.input.focus()},e.prototype.componentWillUnmount=function(){h(this.input)},e.prototype.onChange=function(t,e){var n=this.props.instance,r=n.widget,o=t.target.value.split("-"),i=r.parseDate(o[0]),s=r.parseDate(o[1])||i;"blur"!=e&&"enter"!=e||(i&&isNaN(i)||s&&isNaN(s)?n.setState({inputError:"Invalid date entered."}):(s&&(s=new Date(s.getFullYear(),s.getMonth()+1,1)),r.onSelect(n,i,s)))},e}(S.VDOM.Component),Ee=function(t){function e(){return V(this,e),N(this,t.apply(this,arguments))}return P(e,t),e.prototype.declareData=function(){var e;(e=t.prototype.declareData).call.apply(e,[this,{value:void 0,disabled:void 0,readOnly:void 0,enabled:void 0,placeholder:void 0,required:void 0}].concat(Array.prototype.slice.call(arguments)))},e.prototype.prepareData=function(e,n){var r;n.data;(r=t.prototype.prepareData).call.apply(r,[this].concat(Array.prototype.slice.call(arguments)))},e.prototype.renderInput=function(t,e,n){var r=this;return S.VDOM.createElement(Me,{key:n,instance:e,onSelect:function(t){return r.onSelect(e,t)},picker:{value:this.value,format:this.format}})},e.prototype.onSelect=function(t,e){t.setState({inputError:!1}),t.set("value",e||null)},e}(Bt);Ee.prototype.baseClass="colorfield",Ee.prototype.format="rgba",Ee.prototype.suppressErrorTooltipsUntilVisited=!0,S.Widget.alias("color-field",Ee);var Me=function(t){function e(n){V(this,e);var r=N(this,t.call(this,n)),o=r.props.instance.data;return r.data=o,r.state={dropdownOpen:!1,visited:o.visited},r}return P(e,t),e.prototype.getDropdown=function(){var t=this;if(this.dropdown)return this.dropdown;var e={type:H,relatedElement:this.input,scrollTracking:!0,autoFocus:!0,focusable:E.isTouchDevice(),inline:!0,touchFriendly:!0,placementOrder:" down down-left down-right up up-left up-right right right-up right-down left left-up left-down",items:I({type:De},this.props.picker),onFocusOut:function(){t.closeDropdown()}};return this.dropdown=S.Widget.create(e)},e.prototype.render=function(){var t=this,e=this.props.instance,n=e.data,r=e.store,o=e.widget,i=o.CSS,s=o.baseClass,a=S.VDOM.createElement("div",{className:i.element(s,"tool")},S.VDOM.createElement("div",{style:{backgroundColor:n.value}})),l=!1;return this.state.dropdownOpen&&(l=e.prepareRenderCleanupChild(this.getDropdown(),r,"dropdown",{name:"colorfield-dropdown"})),S.VDOM.createElement("div",{className:i.expand(n.classNames,i.state({visited:n.visited||this.state&&this.state.visited})),style:n.style,onMouseDown:this.onMouseDown.bind(this),onTouchStart:this.onMouseDown.bind(this),onClick:lt},S.VDOM.createElement("input",{id:n.id,ref:function(e){t.input=e},type:"text",className:i.element(s,"input"),style:n.inputStyle,defaultValue:n.value,disabled:n.disabled,readOnly:n.readOnly,placeholder:n.placeholder,onInput:function(e){return t.onChange(e,"input")},onChange:function(e){return t.onChange(e,"change")},onKeyDown:function(e){return t.onKeyDown(e)},onBlur:function(e){t.onBlur(e)},onFocus:function(e){t.onFocus(e)},onMouseMove:function(e){return c(e,t.props.instance)},onMouseLeave:function(e){return p(e,t.props.instance)}}),a,l)},e.prototype.onMouseDown=function(t){t.stopPropagation(),this.state.dropdownOpen?this.closeDropdown(t):this.openDropdownOnFocus=!0,t.target!=this.input&&(t.preventDefault(),this.state.dropdownOpen?this.input.focus():this.openDropdown(t))},e.prototype.onFocus=function(t){this.openDropdownOnFocus&&this.openDropdown(t)},e.prototype.onKeyDown=function(t){var e=this;switch(t.keyCode){case 13:t.stopPropagation(),this.onChange(t,"enter");break;case 27:this.state.dropdownOpen&&(t.stopPropagation(),this.closeDropdown(t,function(){e.input.focus()}));break;case 37:case 39:t.stopPropagation();break;case 40:this.openDropdown(t),t.stopPropagation(),t.preventDefault()}},e.prototype.onBlur=function(t){this.onChange(t,"blur")},e.prototype.closeDropdown=function(t,e){var n=this;this.state.dropdownOpen?(this.scrollableParents&&this.scrollableParents.forEach(function(t){t.removeEventListener("scroll",n.updateDropdownPosition)}),this.setState({dropdownOpen:!1},e)):e&&e()},e.prototype.openDropdown=function(t){var e=this.props.instance.data;this.openDropdownOnFocus=!1,this.state.dropdownOpen||e.disabled||e.readOnly||this.setState({dropdownOpen:!0})},e.prototype.onClearClick=function(t){this.props.onSelect(null),t.stopPropagation(),t.preventDefault()},e.prototype.componentWillReceiveProps=function(t){var e=t.instance,n=e.data;e.state;n.value!=this.input.value&&(this.input.value=n.value||"",t.instance.setState({inputError:!1})),this.data=n,n.visited&&this.setState({visited:!0}),d(this.input,this.props.instance,this.state)},e.prototype.componentDidMount=function(){f(this.input,this.props.instance,this.state),this.props.instance.widget.autoFocus&&this.input.focus()},e.prototype.componentWillUnmount=function(){h(this.input)},e.prototype.onChange=function(t,e){"blur"==e&&this.setState({visited:!0});var n,r=t.target.value;try{E.parseColor(r),n=!0}catch(t){n=!1}"blur"!=e&&"enter"!=e||(null==r?this.props.onSelect(null):n?this.props.onSelect(r):this.props.instance.setState({inputError:"Invalid color entered."}))},e}(S.VDOM.Component),Oe=function(t){function e(){return V(this,e),N(this,t.apply(this,arguments))}return P(e,t),e.prototype.declareData=function(){var e;(e=t.prototype.declareData).call.apply(e,[this,{disabled:void 0,text:void 0,url:void 0}].concat(Array.prototype.slice.call(arguments)))},e.prototype.renderInput=function(t,e,n){var r=e.data;return S.VDOM.createElement(Te,{key:n,instance:e},r.text||this.renderChildren(t,e))},e}(Bt);Oe.prototype.baseClass="uploadbutton",Oe.prototype.multiple=!1;var Te=function(t){function e(n){V(this,e);var r=N(this,t.call(this,n));return r.uploads={},r.uploadKey=0,r.state={progress:100},r}return P(e,t),e.prototype.render=function(){var t=this,e=this.props.instance,n=e.widget,r=e.data,o=n.CSS,i=n.baseClass;return S.VDOM.createElement("div",{ref:function(e){t.el=e},className:r.classNames,style:r.style},S.VDOM.createElement("div",{key:"progress",className:o.element(i,"progress",{done:100==this.state.progress}),style:{width:this.state.progress+"%"}}),this.props.children,!r.disabled&&S.VDOM.createElement("input",{key:this.uploadKey,className:o.element(i,"input"),type:"file",onChange:this.onFileSelected.bind(this),multiple:n.multiple}))},e.prototype.onFileSelected=function(t){for(var e=t.dataTransfer?t.dataTransfer.files:t.target?t.target.files:[],n=0;n<e.length;n++)this.uploadFile(e[n])},e.prototype.componentDidMount=function(){this.props.instance.data.autoFocus&&this.el.focus()},e.prototype.componentWillUnmount=function(){for(var t in this.uploads){var e=this.uploads[t];e.xhr.abort()}},e.prototype.uploadFile=function(t){var e=this,n=this.props.instance,r=n.widget,o=n.data,i=new XMLHttpRequest;if(!r.onUploadStarting||r.onUploadStarting(t,n,i)!==!1){var s=this.uploadKey++,a=this.uploads[s]={progress:0,size:t.size||1,file:t,xhr:i};if(!o.url)throw new Error("Upload url not set.");var l=new FormData;l.append("file",t),i.open("POST",S.Url.resolve(o.url)),i.onload=function(){delete e.uploads[s],r.onUploadComplete&&r.onUploadComplete(i,n,t),e.reportProgress()},i.onerror=function(o){delete e.uploads[s],r.onUploadError&&r.onUploadError(o,n,t),e.reportProgress()},i.upload.onprogress=function(t){t.lengthComputable&&(a.progress=t.loaded/t.total,e.reportProgress())},i.send(l),this.reportProgress(),this.forceUpdate()}},e.prototype.reportProgress=function(){var t=0,e=0;for(var n in this.uploads){var r=this.uploads[n];t+=r.size,e+=r.size*r.progress}var o=100*(t?e/t:1);this.props.instance.setState({inputError:100!=o&&"Upload is in progress"}),this.setState({progress:Math.max(.001,Math.floor(o))})},e}(S.VDOM.Component);S.Widget.alias("upload-button",Oe);var Fe=function(t){function e(){return V(this,e),N(this,t.apply(this,arguments))}return P(e,t),e.prototype.declareData=function(){var e;(e=t.prototype.declareData).call.apply(e,[this,{from:0,to:0,step:void 0,minValue:void 0,maxValue:void 0,disabled:void 0,readOnly:void 0,rangeStyle:{structured:!0},handleStyle:{structured:!0}}].concat(Array.prototype.slice.call(arguments)))},e.prototype.init=function(){"undefined"!=typeof this.min&&(this.minValue=this.min),"undefined"!=typeof this.max&&(this.maxValue=this.max),null!=this.value&&(this.to=this.value),"undefined"==typeof this.from?this.from=this.minValue:this.showFrom=!0,"undefined"==typeof this.to?this.to=this.maxValue:this.showTo=!0,t.prototype.init.call(this)},e.prototype.prepareData=function(e,n){var r=n.data;r.stateMods=I({},r.stateMods,{horizontal:!this.vertical,vertical:this.vertical}),t.prototype.prepareData.call(this,e,n)},e.prototype.renderInput=function(t,e,n){return S.VDOM.createElement(Ve,{key:n,instance:e})},e}(Bt);Fe.prototype.baseClass="slider",Fe.prototype.minValue=0,Fe.prototype.maxValue=100,Fe.prototype.vertical=!1,S.Widget.alias("slider",Fe);var Ve=function(t){function e(n){V(this,e);var r=N(this,t.call(this,n));r.dom={};var o=n.instance.data;return r.state={from:o.from,to:o.to},r}return P(e,t),e.prototype.shouldComponentUpdate=function(t,e){return t.instance.shouldUpdate||e!=this.state},e.prototype.render=function(){var t,e,n,r=this,o=this.props.instance,i=o.data,s=o.widget,a=s.CSS,l=s.baseClass,u=i.minValue,p=i.maxValue,h=i.from,d=i.to,f=this.state,h=f.from,d=f.to;h=Math.min(p,Math.max(u,h)),d=Math.min(p,Math.max(u,d));var y=a.parseStyle(i.handleStyle),m=I({},y,(t={},t[s.vertical?"top":"left"]=100*(h-u)/(p-u)+"%",t)),g=I({},y,(e={},e[s.vertical?"top":"left"]=100*(d-u)/(p-u)+"%",e)),v=(h-u)/(p-u),b=(d-h)/(p-u),w=I({},a.parseStyle(i.rangeStyle),(n={},n[s.vertical?"top":"left"]=100*v+"%",n[s.vertical?"height":"width"]=100*b+"%",n));return S.VDOM.createElement("div",{className:i.classNames,style:i.style,id:i.id,onClick:this.onClick.bind(this)}," ",S.VDOM.createElement("div",{className:a.element(l,"axis")},b>0&&S.VDOM.createElement("div",{className:a.element(l,"range"),style:w}),S.VDOM.createElement("div",{className:a.element(l,"space"),ref:function(t){return r.dom.range=t}},s.showFrom&&S.VDOM.createElement("div",{className:a.element(l,"handle"),style:m,onMouseDown:function(t){return r.onHandleMouseDown(t,"from")},onTouchStart:function(t){return r.onHandleMouseDown(t,"from")},ref:function(t){return r.dom.from=t}}),s.showTo&&S.VDOM.createElement("button",{type:"button",className:a.element(l,"handle"),tabIndex:-1,style:g,onMouseDown:function(t){return r.onHandleMouseDown(t,"to")},onMouseMove:function(t){return c(t,o,r.state)},onMouseLeave:function(t){return r.onHandleMouseLeave(t,"to")},onTouchStart:function(t){return r.onHandleMouseDown(t,"to")},ref:function(t){return r.dom.to=t}}))))},e.prototype.componentWillReceiveProps=function(t){this.setState({from:t.instance.data.from,to:t.instance.data.to}),d(this.dom.to,t.instance,this.state)},e.prototype.componentWillUnmount=function(){h(this.dom.to,this.props.instance)},e.prototype.componentDidMount=function(){f(this.dom.to,this.props.instance)},e.prototype.onHandleMouseLeave=function(t,e){this.state.drag||p(t,this.props.instance,this.state)},e.prototype.onHandleMouseDown=function(t,e){var n=this;t.preventDefault(),t.stopPropagation();var r=this.dom[e].getBoundingClientRect(),o=a(t),i=o.clientX-(r.left+r.right)/2,l=o.clientY-(r.top+r.bottom)/2;this.setState({drag:!0}),s(t,function(t){var r=n.props.instance,o=r.widget,s=n.getValues(t,o.vertical?l:i),a=s.value;"from"==e&&(r.set("from",a)&&n.setState({from:a}),a>n.state.to&&r.set("to",a)&&n.setState({to:a})),"to"==e&&(r.set("to",a)&&n.setState({to:a}),a<n.state.from&&r.set("from",a)&&n.setState({from:a}))},function(){n.setState({drag:!1})})},e.prototype.getValues=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.props.instance,r=n.data,o=n.widget,i=r.minValue,s=r.maxValue,l=this.dom.range.getBoundingClientRect(),u=a(t),c=o.vertical?Math.max(0,Math.min(1,(u.clientY-l.top-e)/this.dom.range.offsetHeight)):Math.max(0,Math.min(1,(u.clientX-l.left-e)/this.dom.range.offsetWidth)),p=(s-i)*c;return r.step&&(p=Math.round(p/r.step)*r.step),{percent:p/(s-i),value:i+p}},e.prototype.onClick=function(t){var e=this.getValues(t),n=e.value;this.props.instance.set("value",n)},e}(S.VDOM.Component),Ae=function(t){function e(){return V(this,e),N(this,t.apply(this,arguments))}return P(e,t),e.prototype.getRecords=function(e,n,r,o){var i=t.prototype.getRecords.call(this,e,n,r,o);if(this.groupings){var s=[];this.processLevel([],i,s,o),i=s}return i},e.prototype.processLevel=function(t,e,n,r){var o=this,i=t.length,s=this.groupings.length-i;if(0!=s){var a=this.groupings[i],l=a.grouper;l.reset(),l.processAll(e);var u=l.getResults();u.forEach(function(e){var i;t.push(e.key);var l=I({},e.key,e.aggregates,{$name:e.name,$level:s}),u=new M.ReadOnlyDataView({store:r,data:(i={},i[o.groupName]=l,i),immutable:o.immutable}),c={type:"group-header",key:t.map(function(t){return Object.keys(t).map(function(e){return t[e]}).join(":")}).join("|"),data:e.records[0],group:l,grouping:a,store:u,level:s};n.push(c),o.processLevel(t,e.records,n,u),n.push(I({},c,{type:"group-footer"})),t.pop()})}else for(var c=0;c<e.length;c++)e[c].store.setStore(r),n.push(e[c])},e.prototype.groupBy=function(t){var e=this;if(t){if(!Array.isArray(t))throw new Error("Invalid grouping provided.");this.groupings=t,this.groupings.forEach(function(t){t.grouper=new M.Grouper(t.key,I({},e.aggregates,t.aggregates),function(t){return t.store.getData()},t.text)})}else this.groupings=null;this.updateSorter()},e.prototype.updateSorter=function(){var t=[];this.groupings&&this.groupings.forEach(function(e){for(var n in e.key)t.push({value:e.key[n]})}),this.sorters&&t.push.apply(t,this.sorters),
this.buildSorter(t)},e.prototype.sort=function(t){this.sorters=t,this.updateSorter()},e}(dt);Ae.prototype.groupName="$group";var Ie=function(t){function e(){return V(this,e),N(this,t.apply(this,arguments))}return P(e,t),e.prototype.declareData=function(){var e,n=this.selection.configureWidget(this);(e=t.prototype.declareData).call.apply(e,[this,{records:void 0,class:{structured:!0},className:{structured:!0},style:{structured:!0},sorters:void 0,scrollable:void 0,sortField:void 0,sortDirection:void 0,emptyText:void 0},n].concat(Array.prototype.slice.call(arguments)))},e.prototype.init=function(){var e=this;this.records&&this.records.bind&&(this.recordsBinding=M.Binding.get(this.records.bind)),this.columns=S.Widget.create(Ne,this.columns||[],{recordName:this.recordName}),this.columns.forEach(function(t){return t.init()});var n={};this.columns.filter(function(t){return t.aggregate&&t.aggregateField}).forEach(function(t){n[t.aggregateField]={value:null!=t.value?t.value:{bind:e.recordName+"."+t.field},weight:null!=t.weight?t.weight:t.weightField&&{bind:e.recordName+"."+t.weightField},type:t.aggregate}}),!this.grouping&&Object.keys(n).length>0&&(this.grouping=[{key:{},showFooter:!0}]),this.dataAdapter=ht.create({type:this.dataAdapter&&this.dataAdapter.type||Ae,recordsBinding:this.recordsBinding,keyField:this.keyField,aggregates:n,recordName:this.recordName},this.dataAdapter),this.selection=S.Selection.create(this.selection,{records:this.records}),this.selection.isDummy||(this.selectable=!0),t.prototype.init.call(this),this.grouping&&this.groupBy(this.grouping)},e.prototype.initState=function(t,e){e.state={}},e.prototype.prepareData=function(e,n){var r,o=n.data,i=n.state;i.sorters&&!o.sorters&&(o.sorters=i.sorters),o.sortField&&o.sortDirection&&(o.sorters=[{field:o.sortField,direction:o.sortDirection}]),o.sorters&&0!=o.sorters.length||!this.defaultSortField||(o.sorters=[{field:this.defaultSortField,direction:this.defaultSortDirection||"ASC"}]);var s=this.headerMode;null==this.headerMode&&(s=this.scrollable||this.columns.some(function(t){return t.sortable})?"default":"plain");var a=this.border;null==this.border&&this.scrollable&&(this.border=!0),o.stateMods=(r={selectable:this.selectable,scrollable:o.scrollable},r["header-"+s]=!0,r.border=a,r.vlines=this.vlines,r),t.prototype.prepareData.call(this,e,n),n.records=this.mapRecords(e,n)},e.prototype.initInstance=function(e,n){n.refs={header:{},fixed:{}},t.prototype.initInstance.call(this,e,n)},e.prototype.explore=function(e,n){t.prototype.explore.call(this,e,n),n.columns=[],this.columns.forEach(function(t){var r=n.getChild(e,t);r.explore(e)&&n.columns.push(r)});var r=n.store;n.isSelected=this.selection.getIsSelectedDelegate(r);for(var o,i=0;i<n.records.length;i++)if(o=n.records[i],o.cells){var s=o.selected;o.selected=n.isSelected(o.data,o.index),o.shouldUpdate=s!=o.selected;for(var a=0;a<o.cells.length;a++)o.cells[a].explore(e)}},e.prototype.prepare=function(e,n){for(var r,o,i=0;i<n.records.length;i++)if(r=n.records[i],r.cells)for(var s=0;s<r.cells.length;s++)o=r.cells[s],o.prepare(e),o.shouldUpdate&&(r.shouldUpdate=!0),r.shouldUpdate&&(n.shouldUpdate=!0);n.columns.forEach(function(t){return t.prepare(e)}),t.prototype.prepare.call(this,e,n)},e.prototype.cleanup=function(e,n){for(var r,o=0;o<n.records.length;o++)if(r=n.records[o],r.cells)for(var i=0;i<r.cells.length;i++)r.cells[i].cleanup(e);n.columns.forEach(function(t){return t.cleanup(e)}),t.prototype.cleanup.call(this,e,n)},e.prototype.groupBy=function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.autoConfigure;if(t){if(!Array.isArray(t)){if("string"==typeof t||"object"==("undefined"==typeof t?"undefined":F(t)))return this.groupBy([t]);throw new Error("DynamicGrouping should be an array or grouping objects")}t=t.map(function(n,r){if("string"==typeof n){var o;return{key:(o={},o[n]={bind:e.recordName+"."+n},o),showHeader:r==t.length-1,showFooter:!0,caption:{tpl:"{$group."+n+"}"},text:{tpl:"{$record."+n+"}"}}}return n}),C(t)}r&&(this.showHeader=!Array.isArray(t)||!t.some(function(t){return t.showHeader})),this.dataAdapter.groupBy(t),this.update()},e.prototype.render=function(t,e,n){var r=e.data,o=e.refs,i=r.scrollable&&this.showHeader&&this.renderHeader(t,e,"header",{fixed:!0,refs:o.fixed,originalRefs:o.header});this.renderRows(t,e),o.header={};var s=this.showHeader&&this.renderHeader(t,e,"header",{refs:o.header});return S.VDOM.createElement(Pe,{key:n,instance:e,header:s,headerRefs:o.header,fixedHeader:i,fixedHeaderRefs:o.fixed})},e.prototype.renderHeader=function(t,e,n,r){var o=this,i=r.fixed,s=r.refs,a=r.originalRefs,l=e.data,u=e.widget;s||(s={});var c=u.CSS,p=u.baseClass,h=[[],[],[]],d={},f=[!0,!0,!0];return e.columns.forEach(function(n,r){for(var u=n.widget,y=function(y){var m=r+"-"+y;if(d[m])return"continue";g=n["header"+(y+1)];var v=void 0,b=void 0,w=void 0,x=void 0,D=[],C=void 0;if(g&&(f[y]=!1,g.widget.align?D.push("aligned-"+g.widget.align):u.align&&D.push("aligned-"+u.align),u.sortable&&g.widget.allowSorting&&(D.push("sortable"),l.sorters&&l.sorters[0].field==(u.sortField||u.field)&&D.push("sorted-"+l.sorters[0].direction.toLowerCase())),w=g.data.style,g.data.classNames&&(x=g.data.classNames),C=g.render(t),i&&a[m]&&(w=I({},w,{width:a[m].offsetWidth+"px"})),g.data.colSpan>1||g.data.rowSpan>1)){v=g.data.colSpan,b=g.data.rowSpan;for(var k=0;k<g.data.rowSpan;k++)for(var E=0;E<g.data.colSpan;E++)d[r+E+"-"+(y+k)]=!0}x=c.element(p,"col-header",D)+(x?" "+x:""),h[y].push(S.VDOM.createElement("th",{key:r,ref:function(t){s[m]=t},colSpan:v,rowSpan:b,className:x,style:w,onClick:function(t){return o.onHeaderClick(t,u,e,y)}},S.getContent(C)))},m=0;m<3;m++){var g;y(m)}}),h=h.filter(function(t,e){return!f[e]}),i&&h[0].push(S.VDOM.createElement("th",{key:"dummy",rowSpan:h.length,className:c.element(p,"col-header"),ref:function(t){s.last=t}})),S.VDOM.createElement("tbody",{key:"h"+n,className:c.element(p,"header")},h.map(function(t,e){return S.VDOM.createElement("tr",{key:e},t)}))},e.prototype.onHeaderClick=function(t,e,n,r){t.preventDefault(),t.stopPropagation();var o=n.data,i=e["header"+(r+1)];if(i.allowSorting&&e.sortable&&(e.field||e.sortField||e.value)){var s=e.sortField||e.field,a="ASC";o.sorters&&o.sorters[0].field==s&&o.sorters[0].value==e.value&&"ASC"==o.sorters[0].direction&&(a="DESC");var l=[{field:s,direction:a,value:e.value}];n.set("sorters",l),n.set("sortField",s),n.set("sortDirection",a),this.remoteSort||n.setState({sorters:l})}},e.prototype.renderGroupHeader=function(t,e,n,r,o,i,s){var a=this.CSS,l=this.baseClass,u=s.getData(),c=n.caption(u);return S.VDOM.createElement("tbody",{key:"g-"+r+"-"+i,className:a.element(l,"group-caption",["level-"+r])},S.VDOM.createElement("tr",null,S.VDOM.createElement("td",{colSpan:e.columns.length},c)))},e.prototype.renderGroupFooter=function(t,e,n,r,o,i,s){var a=this.CSS,l=this.baseClass,u=s.getData();return S.VDOM.createElement("tbody",{key:"f"+i,className:a.element(l,"group-footer",["level-"+r])},S.VDOM.createElement("tr",null,e.columns.map(function(t,e){var n,r=t.widget;r.footer?n=r.footer(u):r.aggregate&&r.aggregateField&&(n=o[r.aggregateField],"string"==typeof t.data.format&&(n=E.Format.value(n,t.data.format)));var i="";return r.align&&(i+=a.state("aligned-"+r.align)),S.VDOM.createElement("td",{key:e,className:i},n)})))},e.prototype.renderRows=function(t,e){var n=e.records;if(!Array.isArray(n))return null;for(var r,o,i=0;i<n.length;i++)r=n[i],"data"==r.type&&(r.vdom=this.renderRow(t,e,r)),"group-header"==r.type&&(r.vdom=[],o=r.grouping,o.caption&&r.vdom.push(this.renderGroupHeader(t,e,o,r.level,r.group,r.key+"-caption",r.store)),o.showHeader&&r.vdom.push(this.renderHeader(t,e,r.key+"-header",{}))),"group-footer"==r.type&&(o=r.grouping,o.showFooter&&(r.vdom=this.renderGroupFooter(t,e,o,r.level,r.group,r.key+"-footer",r.store)))},e.prototype.onRowClick=function(t,e,n,r){t.stopPropagation(),this.selection.select(r,e,n,{toggle:t.ctrlKey})},e.prototype.renderRow=function(t,e,n){if(this.memoize&&n.shouldUpdate===!1&&n.vdom)return n.vdom;for(var r,o=[],i=0;i<n.cells.length;i++)if(r=n.cells[i],r.visible){var s=r.widget,a=r.render(t,String(i)),l=S.getContent(a),u=[];s.align&&u.push("aligned-"+s.align),r.data.pad&&u.push("pad"),null==l&&(l=r.data.value,r.data.format&&(l=E.Format.value(l,r.data.format)));var c=this.CSS.expand(r.data.classNames,this.CSS.state(u));o.push(S.VDOM.createElement("td",{key:i,className:c,style:r.data.style},l))}return S.VDOM.createElement("tr",null,o)},e.prototype.mapRecords=function(t,e){var n=this,r=e.data,o=e.store;return this.dataAdapter.sort(!this.remoteSort&&r.sorters),this.dataAdapter.getRecords(t,e,r.records,o).map(function(r){return"data"==r.type&&(r.cells=n.columns.map(function(n){var o=e.getChild(t,n,r.key,r.store);return o.repeatable=!0,o})),r})},e}(S.Widget);Ie.prototype.baseClass="grid",Ie.prototype.showHeader=!0,Ie.prototype.showFooter=!1,Ie.prototype.recordName="$record",Ie.prototype.remoteSort=!1,Ie.prototype.lockColumnWidths=!1,Ie.prototype.lockColumnWidthsRequiredRowCount=3,Ie.prototype.focused=!1,Ie.prototype.emptyText=!1,S.Widget.alias("grid",Ie);var Pe=function(t){function e(n){V(this,e);var r=N(this,t.call(this,n));r.dom={};var o=n.instance.widget;return r.state={cursor:o.focused&&o.selectable?0:-1,focused:o.focused},r}return P(e,t),e.prototype.render=function(){var t=this,e=this.props.instance,n=e.data,r=e.widget,o=r.CSS,i=r.baseClass,s=e.records.map(function(e,n){if("data"==e.type){var s=e.data,a=e.store,l=e.index,u=e.key,c=e.selected,p={selected:c,cursor:n==t.state.cursor};return S.VDOM.createElement(je,{key:u,className:o.element(i,"data",p),onClick:function(t){return r.onRowClick(t,s,l,a)},onMouseEnter:function(e){return t.moveCursor(n)},isSelected:c,cursor:p.cursor,shouldUpdate:e.shouldUpdate},e.vdom)}return e.vdom}),a=[];return 0==e.records.length&&n.emptyText?a.push(S.VDOM.createElement("div",{key:"empty",className:o.element(i,"empty-text")},n.emptyText)):(a.push(S.VDOM.createElement("div",{key:"scroller",ref:function(e){t.dom.scroller=e},tabIndex:r.selectable?0:null,onScroll:this.onScroll.bind(this),className:o.element(i,"scroll-area"),onKeyDown:this.handleKeyDown.bind(this),onMouseLeave:this.handleMouseLeave.bind(this),onFocus:this.onFocus.bind(this),onBlur:this.onBlur.bind(this)},S.VDOM.createElement("table",{ref:function(e){t.dom.table=e}},this.props.header,s))),this.props.fixedHeader&&a.push(S.VDOM.createElement("div",{key:"fh",ref:function(e){t.dom.fixedHeader=e},className:o.element(i,"fixed-header"),style:{display:this.scrollWidth>0?"block":"none"}},S.VDOM.createElement("table",null,this.props.fixedHeader)))),S.VDOM.createElement("div",{className:n.classNames,style:n.style},a)},e.prototype.onScroll=function(t){this.dom.fixedHeader&&(this.dom.fixedHeader.scrollLeft=t.target.scrollLeft)},e.prototype.shouldComponentUpdate=function(t,e){return t.instance.shouldUpdate!==!1||e!=this.state},e.prototype.componentDidMount=function(){this.componentDidUpdate();var t=this.props.instance.widget;t.scrollable&&(this.offResize=S.ResizeManager.subscribe(this.componentDidUpdate.bind(this))),t.pipeKeyDown&&t.pipeKeyDown(this.handleKeyDown.bind(this),this.props.instance)},e.prototype.componentWillReceiveProps=function(t){var e=t.instance,n=e.records,r=e.widget;this.setState({cursor:Math.max(Math.min(this.state.cursor,n.length-1),r.selectable&&this.state.focused?0:-1)})},e.prototype.componentWillUnmount=function(){var t=this.props.instance,e=t.widget;this.offResize&&this.offResize(),S.offFocusOut(this),e.pipeKeyDown&&e.pipeKeyDown(null,t)},e.prototype.componentDidUpdate=function(){var t=this.props,e=t.headerRefs,n=t.fixedHeaderRefs,r=t.instance,o=r.widget,i=r.data;if(o.scrollable){if(this.scrollWidth=this.dom.scroller.offsetWidth-this.dom.scroller.clientWidth,o.lockColumnWidths&&e&&Array.isArray(i.records)&&i.records.length>=o.lockColumnWidthsRequiredRowCount)for(var s in e){var a=e[s];a.style.width=a.offsetWidth+"px"}if(this.dom.fixedHeader){for(var s in e){var a=e[s],l=n[s];l&&(l.style.width=l.style.minWidth=l.style.maxWidth=a.offsetWidth+"px")}this.dom.fixedHeader.style.display="block",n.last.style.width=n.last.style.minWidth=this.scrollWidth+"px";var u=this.dom.fixedHeader.offsetHeight;this.dom.table.style.marginTop=-u+"px",this.dom.scroller.style.height="calc(100% - "+u+"px",this.dom.scroller.style.top=u+"px"}}},e.prototype.moveCursor=function(t,e,n){var r=this;this.props.instance.widget.selectable&&(null!=e&&this.state.focused!=e&&this.setState({focused:e||this.props.instance.widget.focused}),this.setState({cursor:t},function(){if(n){var e=r.dom.scroller.firstChild.children[t+1];E.scrollElementIntoView(e)}}))},e.prototype.showCursor=function(t){if(this.state.cursor==-1){var e=this.props.instance.records.findIndex(function(t){return t.selected});this.moveCursor(e!=-1?e:0,t)}},e.prototype.onFocus=function(){var t=this;S.FocusManager.nudge(),this.showCursor(!0);var e=this.props.instance.widget;e.focused||S.oneFocusOut(this,this.dom.scroller,function(){t.moveCursor(-1,!1)}),this.setState({focused:!0})},e.prototype.onBlur=function(){S.FocusManager.nudge()},e.prototype.handleMouseLeave=function(){this.state.focused||this.moveCursor(-1)},e.prototype.handleKeyDown=function(t){var e=this.props.instance,n=e.records,r=e.widget;if(!this.onKeyDown||this.onKeyDown(t,e)!==!1)switch(t.keyCode){case E.KeyCode.enter:var o=n[this.state.cursor];o&&r.onRowClick(t,o.data,o.index,o.store);break;case E.KeyCode.down:this.state.cursor+1<n.length&&(this.moveCursor(this.state.cursor+1,!0,!0),t.stopPropagation(),t.preventDefault());break;case E.KeyCode.up:this.state.cursor>0&&(this.moveCursor(this.state.cursor-1,!0,!0),t.stopPropagation(),t.preventDefault())}},e}(S.VDOM.Component),Ne=function(t){function e(){return V(this,e),N(this,t.apply(this,arguments))}return P(e,t),e.prototype.declareData=function(){var e;return(e=t.prototype.declareData).call.apply(e,[this].concat(Array.prototype.slice.call(arguments),[{style:{structured:!0},class:{structured:!0},className:{structured:!0},value:void 0,weight:void 0,pad:void 0,format:void 0}]))},e.prototype.init=function(){"undefined"!=typeof this.header&&(this.header1=this.header),this.header1&&M.isSelector(this.header1)&&(this.header1={text:this.header1||""}),this.header1&&this.header1&&(this.header1=S.Widget.create($e,this.header1)),this.header2&&M.isSelector(this.header2)&&(this.header2={text:this.header2||""}),this.header2&&(this.header2=S.Widget.create($e,this.header2)),this.header3&&M.isSelector(this.header3)&&(this.header3={text:this.header3||""}),this.header3&&(this.header3=S.Widget.create($e,this.header3)),!this.value&&this.field&&(this.value={bind:this.recordName+"."+this.field}),!this.aggregateField&&this.field&&(this.aggregateField=this.field),null!=this.footer&&(this.footer=M.getSelector(this.footer)),t.prototype.init.call(this)},e.prototype.initInstance=function(t,e){e.header1=this.header1&&e.getChild(t,this.header1),e.header2=this.header2&&e.getChild(t,this.header2),e.header3=this.header3&&e.getChild(t,this.header3)},e.prototype.explore=function(e,n){n.repeatable?t.prototype.explore.call(this,e,n):(n.header1&&n.header1.explore(e),n.header2&&n.header2.explore(e),n.header3&&n.header3.explore(e))},e.prototype.prepare=function(e,n){n.repeatable?t.prototype.prepare.call(this,e,n):(n.header1&&n.header1.prepare(e),n.header2&&n.header2.prepare(e),n.header3&&n.header3.prepare(e))},e.prototype.cleanup=function(e,n){n.repeatable?t.prototype.cleanup.call(this,e,n):(n.header1&&n.header1.cleanup(e),n.header2&&n.header2.cleanup(e),n.header3&&n.header3.cleanup(e))},e}(S.PureContainer);Ne.prototype.pad=!0,Ie.Column=Ne;var $e=function(t){function e(){return V(this,e),N(this,t.apply(this,arguments))}return P(e,t),e.prototype.declareData=function(){var e;return(e=t.prototype.declareData).call.apply(e,[this].concat(Array.prototype.slice.call(arguments),[{text:void 0,style:{structured:!0},class:{structured:!0},className:{structured:!0},colSpan:void 0,rowSpan:void 0}]))},e.prototype.render=function(e,n,r){var o=n.data;return o.text||t.prototype.render.call(this,e,n,r)},e}(S.PureContainer);$e.prototype.colSpan=1,$e.prototype.rowSpan=1,$e.prototype.allowSorting=!0;var je=function(t){function e(){return V(this,e),N(this,t.apply(this,arguments))}return P(e,t),e.prototype.render=function(){return S.VDOM.createElement("tbody",{className:this.props.className,onClick:this.props.onClick,onMouseEnter:this.props.onMouseEnter},this.props.children)},e.prototype.shouldComponentUpdate=function(t){return t.shouldUpdate!==!1||t.cursor!=this.props.cursor},e}(S.VDOM.Component),Le=function(t){function e(){return V(this,e),N(this,t.apply(this,arguments))}return P(e,t),e.prototype.getRecords=function(t,e,n,r){var o=this.mapRecords(t,e,n,r,this.recordsBinding),i=[];return this.processList(t,e,0,"",o,i),i},e.prototype.processList=function(t,e,n,r,o,i){var s=this,a=[],l=[];o.forEach(function(o){o.key=r+o.key,s.processNode(t,e,n,o.data.$leaf?l:a,o)}),i.push.apply(i,a.concat(l))},e.prototype.processNode=function(t,e,n,r,o){var i=this;r.push(o);var s=o.data,a=o.store;if(s.$level=n,!s[this.leafField])if(s[this.expandedField]){if(s[this.childrenField]){var l=this.mapRecords(t,e,s[this.childrenField],a,M.Binding.get(this.recordName+"."+this.childrenField));this.processList(t,e,n+1,o.key+":",l,r)}else if(!s[this.loadedField]&&this.load){a.set("$record.$loading",!0);var u=this.load(t,e,s);Promise.resolve(u).then(function(t){a.set("$record.$children",t),a.set("$record.$loaded",!0),a.set("$record.$loading",!1)}).catch(function(t){i.onLoadError&&i.onLoadError(t)})}}else s.$expanded=!1},e}(dt);Le.prototype.childrenField="$children",Le.prototype.expandedField="$expanded",Le.prototype.leafField="$leaf",Le.prototype.loadingField="$loading",Le.prototype.loadedField="$loaded";var _e=function(t){function e(){return V(this,e),N(this,t.apply(this,arguments))}return P(e,t),e.prototype.declareData=function(){var e;(e=t.prototype.declareData).call.apply(e,[this,{level:void 0,expanded:void 0,leaf:void 0,text:void 0,loading:void 0}].concat(Array.prototype.slice.call(arguments)))},e.prototype.prepareData=function(e,n){var r=n.data;r.stateMods={expanded:r.expanded,loading:r.loading,leaf:r.leaf,folder:!r.leaf},r.stateMods["level-"+r.level]=!0,t.prototype.prepareData.call(this,e,n)},e.prototype.render=function(t,e,n){var r=this,o=e.data,i=e.widget,s=i.CSS,a=i.baseClass;return S.VDOM.createElement("div",{className:o.classNames,style:o.style},S.VDOM.createElement("div",{className:s.element(a,"handle"),onClick:function(t){return r.toggle(t,e)}},S.VDOM.createElement("div",null)),S.VDOM.createElement("div",null,o.text))},e.prototype.toggle=function(t,e){var n=e.data;n.leaf||e.set("expanded",!n.expanded),t.preventDefault(),t.stopPropagation()},e}(S.Widget);_e.prototype.baseClass="treenode",S.Widget.alias("treenode",_e);var Re=function(t){function e(){return V(this,e),N(this,t.apply(this,arguments))}return P(e,t),e.prototype.declareData=function(){var e;(e=t.prototype.declareData).call.apply(e,[this,{page:void 0,length:void 0,pageCount:void 0,class:{structured:!0},className:{structured:!0},style:{structured:!0}}].concat(Array.prototype.slice.call(arguments)))},e.prototype.render=function(t,e,n){var r=this;return S.VDOM.createElement(Ke,{key:n,instance:e,onSetPage:function(t,n){r.onSetPage(t,e,n)}})},e.prototype.onSetPage=function(t,e,n){var r=e.data,o=r.pageCount;n<=o&&n>0&&e.set("page",n),t.preventDefault(),t.stopPropagation()},e}(S.Widget);Re.prototype.baseClass="pagination",Re.prototype.length=5,S.Widget.alias("pagination",Re);var Ke=function(t){function e(){return V(this,e),N(this,t.apply(this,arguments))}return P(e,t),e.prototype.render=function(){var t=this,e=this.props.instance,n=e.data,r=e.widget,o=n.page,i=n.pageCount,s=n.length,a=r.CSS,l=r.baseClass;i||(i=1);var u=Math.max(1,o-Math.floor(s/2)),c=u+s-1,p=[];this.pageRefs={};for(var h=function(e){p.push(S.VDOM.createElement("li",{key:e<u?"-1":e>c?"-2":e,ref:function(n){t.pageRefs[e]=n},className:a.element(l,"page",{active:o==e,disabled:e>i||e<o&&1==o}),tabIndex:e==o?0:-1,onKeyDown:function(n){return t.onKeyDown(n,e)},onMouseDown:function(t){t.stopPropagation(),t.preventDefault()},onClick:function(n){return t.props.onSetPage(n,e<u?o-1:e>c?o+1:e)}},e<u?"«":e>c?"»":e))},d=u-1;d<=c+1;d++)h(d);return S.VDOM.createElement("ul",{className:n.classNames,style:n.style},p)},e.prototype.onKeyDown=function(t,e){switch(t.keyCode){case E.KeyCode.enter:this.props.onSetPage(t,e);break;case E.KeyCode.left:var n=this.pageRefs[e-1];n&&n.focus(),t.preventDefault(),t.stopPropagation();break;case E.KeyCode.right:var n=this.pageRefs[e+1];n&&n.focus(),t.preventDefault(),t.stopPropagation()}},e}(S.VDOM.Component);n.Widget=S.Widget,n.PureContainer=S.PureContainer,n.StaticText=$,n.Text=j,n.urlAttributes=G,n.HtmlElement=Q,n.Button=ct,n.DocumentTitle=pt,n.List=ft,n.Sandbox=mt,n.Repeater=gt,n.Cx=xt,n.CxCredit=Dt,n.FlexBox=Ct,n.FlexRow=kt,n.FlexCol=St,n.Heading=Et,n.Section=Mt,n.Overlay=L,n.OverlayComponent=_,n.Dropdown=H,n.Tooltip=U,n.tooltipMouseMove=c,n.tooltipMouseLeave=p,n.tooltipComponentWillUnmount=h,n.tooltipComponentWillReceiveProps=d,n.tooltipComponentDidMount=f,n.Window=it,n.MsgBox=at,n.Toast=Ot,n.Route=Ft,n.RedirectRoute=Vt,n.Tab=At,n.Link=It,n.Menu=jt,n.MenuItem=Nt,n.Submenu=Rt,n.TextField=Wt,n.Checkbox=zt,n.Radio=Yt,n.Select=Qt,n.Option=Jt,n.Calendar=re,n.CalendarCmp=ie,n.DateField=ae,n.LookupField=ue,n.NumberField=pe,n.TextArea=de,n.LabeledContainer=ye,n.ValidationError=me,n.ValidationGroup=ge,n.MonthPicker=ve,n.MonthPickerComponent=xe,n.ColorPicker=De,n.MonthField=ke,n.ColorField=Ee,n.UploadButton=Oe,n.Slider=Fe,n.Grid=Ie,n.DataAdapter=ht,n.ArrayAdapter=dt,n.TreeAdapter=Le,n.TreeNode=_e,n.Pagination=Re,n.PaginationComponent=Ke},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=n(15);n.d(e,"a",function(){return i});var i=function(){function t(e){r(this,t),Object.assign(this,e),this.cache={version:-1},this.store&&this.setStore(this.store)}return t.prototype.getData=function(){throw new Error("abstract method")},t.prototype.init=function(t,e){var n=this.get(t);"undefined"==typeof n&&this.set(t,e)},t.prototype.set=function(t,e){if(this.store)return this.store.set(t,e);throw new Error("abstract method")},t.prototype.delete=function(t){if(this.store)return this.store.delete(t);throw new Error("abstract method")},t.prototype.clear=function(){if(this.store)return this.store.clear();throw new Error("abstract method")},t.prototype.get=function(t){return o.a.get(t).value(this.getData())},t.prototype.toggle=function(t){this.set(t,!this.get(t))},t.prototype.update=function(t,e){for(var n=arguments.length,r=Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];this.set(t,e.apply(null,[this.get(t)].concat(r)))},t.prototype.batch=function(t){this.notificationsSuspended=(this.notificationsSuspended||0)+1;try{t(this)}finally{this.notificationsSuspended--,this.dirty&&(this.dirty=!1,this.notify())}},t.prototype.silently=function(t){this.notificationsSuspended=(this.notificationsSuspended||0)+1;var e,n=this.dirty;this.dirty=!1;try{t(this)}finally{this.notificationsSuspended--,e=this.dirty,this.dirty=n}return e},t.prototype.notify=function(t){this.notificationsSuspended?this.dirty=!0:this.doNotify(t)},t.prototype.doNotify=function(t){if(this.store)return this.store.notify(t);throw new Error("abstract method")},t.prototype.subscribe=function(t){if(this.store)return this.store.subscribe(t);throw new Error("abstract method")},t.prototype.load=function(t){this.batch(function(e){for(var n in t)e.set(n,t[n])})},t.prototype.dispatch=function(t){if(this.store)return this.store.dispatch(t);throw new Error("The underlying store doesn't support dispatch.")},t.prototype.getMeta=function(){return this.meta},t.prototype.setStore=function(t){this.store=t,this.meta=t.getMeta()},t}()},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(15),a=n(53),l=n(16);n.d(e,"a",function(){return u});var u=function(t){function e(n){r(this,e);var i=o(this,t.call(this));return i.store=n,i.meta={version:0},i}return i(e,t),e.prototype.getData=function(){return this.store.getState()},e.prototype.set=function(t,e){var n=this.getData(),r=s.a.get(t).set(n,e);n!==r&&this.dispatch({type:l.a,state:r})},e.prototype.delete=function(t){var e=this.getData(),n=s.a.get(t).delete(e);e!==n&&this.dispatch({type:l.a,state:n})},e.prototype.clear=function(){this.dispatch({type:l.a,state:{}})},e.prototype.load=function(t){var e=this.getData(),n=e;for(var r in t)n=s.a.get(r).set(n,t[r]);e!==n&&this.dispatch({type:l.a,state:n})},e.prototype.doNotify=function(){this.store.dispatch({type:l.a,state:this.getData()})},e.prototype.dispatch=function(t){var e;return"function"==typeof t?t(this.dispatch.bind(this)):((e=this.store).dispatch.apply(e,arguments),void this.meta.version++)},e.prototype.subscribe=function(){var t;return(t=this.store).subscribe.apply(t,arguments)},e}(a.a)},function(t,e,n){"use strict";function r(t){return function(e,n){return n.type==o.a?n.state:t(e,n)}}var o=n(16);e.a=r},function(t,e,n){"use strict";function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments[2],s=n.i(i.a)(t);return"function"==typeof e&&(r=e,e={}),n.i(o.a)(s,e,r)}var o=n(6),i=n(55);e.a=r},function(t,e,n){"use strict";var r=n(58),o=n.i(r.a)(Object.getPrototypeOf,Object);e.a=o},function(t,e,n){"use strict";function r(t,e){return function(n){return t(e(n))}}e.a=r},function(t,e,n){"use strict";function r(t){return null!=t&&"object"==("undefined"==typeof t?"undefined":o(t))}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.a=r},function(t,e){"use strict";function n(t){return function(e){var n=e.dispatch,r=e.getState;return function(e){return function(o){return"function"==typeof o?o(n,r,t):e(o)}}}}e.__esModule=!0;var r=n();r.withExtraArgument=n,e.default=r},function(t,e,n){"use strict";function r(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return function(n,r,s){var a=t(n,r,s),l=a.dispatch,u=[],c={getState:a.getState,dispatch:function(t){return l(t)}};return u=e.map(function(t){return t(c)}),l=o.a.apply(void 0,u)(a.dispatch),i({},a,{dispatch:l})}}}var o=n(18);e.a=r;var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}},function(t,e,n){"use strict";"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}},function(t,e,n){"use strict";function r(t,e){var n=e&&e.type,r=n&&'"'+n.toString()+'"'||"an action";return"Given action "+r+', reducer "'+t+'" returned undefined. To ignore an action, you must explicitly return the previous state.'}function o(t){Object.keys(t).forEach(function(e){var n=t[e],r=n(void 0,{type:s.a.INIT});if("undefined"==typeof r)throw new Error('Reducer "'+e+'" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined.');var o="@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".");if("undefined"==typeof n(void 0,{type:o}))throw new Error('Reducer "'+e+'" returned undefined when probed with a random type. '+("Don't try to handle "+s.a.INIT+' or other actions in "redux/*" ')+"namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined.")})}function i(t){for(var e=Object.keys(t),n={},i=0;i<e.length;i++){var s=e[i];"function"==typeof t[s]&&(n[s]=t[s])}var a,l=Object.keys(n);try{o(n)}catch(t){a=t}return function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],e=arguments[1];if(a)throw a;for(var o=!1,i={},s=0;s<l.length;s++){var u=l[s],c=n[u],p=t[u],h=c(p,e);if("undefined"==typeof h){var d=r(u,e);throw new Error(d)}i[u]=h,o=o||h!==p}return o?i:t}}var s=n(19);n(17),n(20);e.a=i},function(t,e,n){"use strict";var r=n(75),o=n.n(r),i=n(76),s=n.n(i),a=o.a;a.DOM=s.a;const l=a;e.VDOM=l},function(t,e,n){"use strict";var r=n(66);t.exports=r},function(t,e,n){"use strict";function r(t){var e;if(e=this?this:Object.create(r.prototype),"undefined"==typeof t)throw new Error("A route spec is required");return e.spec=t,e.ast=o.parse(t),e}var o=n(68),i=n(69),s=n(70);r.prototype=Object.create(null),r.prototype.match=function(t){var e=i.visit(this.ast),n=e.match(t);return!!n&&n},r.prototype.reverse=function(t){return s.visit(this.ast,t)},t.exports=r},function(t,e,n){var r=function(){function t(){this.yy={}}var e=function(t,e,n,r){for(n=n||{},r=t.length;r--;n[t[r]]=e);return n},n=[1,9],r=[1,10],o=[1,11],i=[1,12],s=[5,11,12,13,14,15],a={trace:function(){},yy:{},symbols_:{error:2,root:3,expressions:4,EOF:5,expression:6,optional:7,literal:8,splat:9,param:10,"(":11,")":12,LITERAL:13,SPLAT:14,PARAM:15,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",11:"(",12:")",13:"LITERAL",14:"SPLAT",15:"PARAM"},productions_:[0,[3,2],[3,1],[4,2],[4,1],[6,1],[6,1],[6,1],[6,1],[7,3],[8,1],[9,1],[10,1]],performAction:function(t,e,n,r,o,i,s){var a=i.length-1;switch(o){case 1:return new r.Root({},[i[a-1]]);case 2:return new r.Root({},[new r.Literal({value:""})]);case 3:this.$=new r.Concat({},[i[a-1],i[a]]);break;case 4:case 5:this.$=i[a];break;case 6:this.$=new r.Literal({value:i[a]});break;case 7:this.$=new r.Splat({name:i[a]});break;case 8:this.$=new r.Param({name:i[a]});break;case 9:this.$=new r.Optional({},[i[a-1]]);break;case 10:this.$=t;break;case 11:case 12:this.$=t.slice(1)}},table:[{3:1,4:2,5:[1,3],6:4,7:5,8:6,9:7,10:8,11:n,13:r,14:o,15:i},{1:[3]},{5:[1,13],6:14,7:5,8:6,9:7,10:8,11:n,13:r,14:o,15:i},{1:[2,2]},e(s,[2,4]),e(s,[2,5]),e(s,[2,6]),e(s,[2,7]),e(s,[2,8]),{4:15,6:4,7:5,8:6,9:7,10:8,11:n,13:r,14:o,15:i},e(s,[2,10]),e(s,[2,11]),e(s,[2,12]),{1:[2,1]},e(s,[2,3]),{6:14,7:5,8:6,9:7,10:8,11:n,12:[1,16],13:r,14:o,15:i},e(s,[2,9])],defaultActions:{3:[2,2],13:[2,1]},parseError:function(t,e){function n(t,e){this.message=t,this.hash=e}if(!e.recoverable)throw n.prototype=Error,new n(t,e);this.trace(t)},parse:function(t){var e=this,n=[0],r=[null],o=[],i=this.table,s="",a=0,l=0,u=0,c=2,p=1,h=o.slice.call(arguments,1),d=Object.create(this.lexer),f={yy:{}};for(var y in this.yy)Object.prototype.hasOwnProperty.call(this.yy,y)&&(f.yy[y]=this.yy[y]);d.setInput(t,f.yy),f.yy.lexer=d,f.yy.parser=this,"undefined"==typeof d.yylloc&&(d.yylloc={});var m=d.yylloc;o.push(m);var g=d.options&&d.options.ranges;"function"==typeof f.yy.parseError?this.parseError=f.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var v,b,w,x,D,C,k,S,E,M=function(){var t;return t=d.lex()||p,"number"!=typeof t&&(t=e.symbols_[t]||t),t},O={};;){if(w=n[n.length-1],this.defaultActions[w]?x=this.defaultActions[w]:(null!==v&&"undefined"!=typeof v||(v=M()),x=i[w]&&i[w][v]),"undefined"==typeof x||!x.length||!x[0]){var T="";E=[];for(C in i[w])this.terminals_[C]&&C>c&&E.push("'"+this.terminals_[C]+"'");T=d.showPosition?"Parse error on line "+(a+1)+":\n"+d.showPosition()+"\nExpecting "+E.join(", ")+", got '"+(this.terminals_[v]||v)+"'":"Parse error on line "+(a+1)+": Unexpected "+(v==p?"end of input":"'"+(this.terminals_[v]||v)+"'"),
this.parseError(T,{text:d.match,token:this.terminals_[v]||v,line:d.yylineno,loc:m,expected:E})}if(x[0]instanceof Array&&x.length>1)throw new Error("Parse Error: multiple actions possible at state: "+w+", token: "+v);switch(x[0]){case 1:n.push(v),r.push(d.yytext),o.push(d.yylloc),n.push(x[1]),v=null,b?(v=b,b=null):(l=d.yyleng,s=d.yytext,a=d.yylineno,m=d.yylloc,u>0&&u--);break;case 2:if(k=this.productions_[x[1]][1],O.$=r[r.length-k],O._$={first_line:o[o.length-(k||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(k||1)].first_column,last_column:o[o.length-1].last_column},g&&(O._$.range=[o[o.length-(k||1)].range[0],o[o.length-1].range[1]]),D=this.performAction.apply(O,[s,l,a,f.yy,x[1],r,o].concat(h)),"undefined"!=typeof D)return D;k&&(n=n.slice(0,-1*k*2),r=r.slice(0,-1*k),o=o.slice(0,-1*k)),n.push(this.productions_[x[1]][0]),r.push(O.$),o.push(O._$),S=i[n[n.length-2]][n[n.length-1]],n.push(S);break;case 3:return!0}}return!0}},l=function(){var t={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t;var e=t.match(/(?:\r\n?|\n).*/g);return e?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,n=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var o=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[o[0],o[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},test_match:function(t,e){var n,r,o;if(this.options.backtrack_lexer&&(o={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(o.yylloc.range=this.yylloc.range.slice(0))),r=t[0].match(/(?:\r\n?|\n).*/g),r&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],n=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),n)return n;if(this._backtrack){for(var i in o)this[i]=o[i];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var t,e,n,r;this._more||(this.yytext="",this.match="");for(var o=this._currentRules(),i=0;i<o.length;i++)if(n=this._input.match(this.rules[o[i]]),n&&(!e||n[0].length>e[0].length)){if(e=n,r=i,this.options.backtrack_lexer){if(t=this.test_match(n,o[i]),t!==!1)return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?(t=this.test_match(e,o[r]),t!==!1&&t):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return t?t:this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){var t=this.conditionStack.length-1;return t>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(t){return t=this.conditionStack.length-1-Math.abs(t||0),t>=0?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(t,e,n,r){switch(n){case 0:return"(";case 1:return")";case 2:return"SPLAT";case 3:return"PARAM";case 4:return"LITERAL";case 5:return"LITERAL";case 6:return"EOF"}},rules:[/^(?:\()/,/^(?:\))/,/^(?:\*+\w+)/,/^(?::+\w+)/,/^(?:[\w%\-~\n]+)/,/^(?:.)/,/^(?:$)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6],inclusive:!0}}};return t}();return a.lexer=l,t.prototype=a,a.Parser=t,new t}();e.parser=r,e.Parser=r.Parser,e.parse=function(){return r.parse.apply(r,arguments)}},function(t,e,n){"use strict";var r=n(67).parser;r.yy=n(23),t.exports=r},function(t,e,n){"use strict";function r(t){this.captures=t.captures,this.re=t.re}var o=n(24),i=/[\-{}\[\]+?.,\\\^$|#\s]/g;r.prototype.match=function(t){var e=this.re.exec(t),n={};if(e)return this.captures.forEach(function(t,r){"undefined"==typeof e[r+1]?n[t]=void 0:n[t]=decodeURIComponent(e[r+1])}),n};var s=o({Concat:function(t){return t.children.reduce(function(t,e){var n=this.visit(e);return{re:t.re+n.re,captures:t.captures.concat(n.captures)}}.bind(this),{re:"",captures:[]})},Literal:function(t){return{re:t.props.value.replace(i,"\\$&"),captures:[]}},Splat:function(t){return{re:"([^?]*?)",captures:[t.props.name]}},Param:function(t){return{re:"([^\\/\\?]+)",captures:[t.props.name]}},Optional:function(t){var e=this.visit(t.children[0]);return{re:"(?:"+e.re+")?",captures:e.captures}},Root:function(t){var e=this.visit(t.children[0]);return new r({re:new RegExp("^"+e.re+"(?=\\?|$)"),captures:e.captures})}});t.exports=s},function(t,e,n){"use strict";var r=n(24),o=r({Concat:function(t,e){var n=t.children.map(function(t){return this.visit(t,e)}.bind(this));return!n.some(function(t){return t===!1})&&n.join("")},Literal:function(t){return decodeURI(t.props.value)},Splat:function(t,e){return!!e[t.props.name]&&e[t.props.name]},Param:function(t,e){return!!e[t.props.name]&&e[t.props.name]},Optional:function(t,e){var n=this.visit(t.children[0],e);return n?n:""},Root:function(t,e){e=e||{};var n=this.visit(t.children[0],e);return!!n&&encodeURI(n)}});t.exports=o},function(t,e,n){t.exports=n(72)},function(t,e,n){"use strict";(function(t,r){function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i,s=n(73),a=o(s);i="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof t?t:r;var l=(0,a.default)(i);e.default=l}).call(e,n(25),n(74)(t))},function(t,e){"use strict";function n(t){var e,n=t.Symbol;return"function"==typeof n?n.observable?e=n.observable:(e=n("observable"),n.observable=e):e="@@observable",e}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,configurable:!1,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,configurable:!1,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e){t.exports=React},function(t,e){t.exports=ReactDOM},function(t,e,n){"use strict";function r(){f.set("hash",window.location.hash||"#")}var o,i=n(0),s=(n.n(i),n(5)),a=(n.n(s),n(29)),l=n(6),u=n(28),c=n(30),p=(n.n(c),n(27)),h=n(26),d=n.i(a.a)(p.a,l.c.apply(void 0,h.a)),f=new a.b(d);r(),setInterval(r,100),i.Widget.resetCounter(),s.Debug.enable("app-data"),o=n.i(i.startAppLoop)(document.getElementById("app"),f,u.a),document.body.addEventListener("keyup",function(t){switch(t.key){case"?":"INPUT"!=t.target.tagName&&"TEXTAREA"!=t.target.tagName&&(t.preventDefault(),t.stopPropagation(),window.location.hash="#help");break;case"Escape":if(!document.activeElement.classList.contains("cxb-task")){t.preventDefault(),t.stopPropagation();var e=document.getElementsByClassName("cxb-task");e&&e.length>0&&i.FocusManager.focusFirst(e[0])}break;case"/":if("INPUT"!=t.target.tagName&&"TEXTAREA"!=t.target.tagName){t.preventDefault(),t.stopPropagation();var n=document.getElementById("search");i.FocusManager.focusFirst(n)}break;case"{":var r,o,s,a=function(){if(!t.ctrlKey)return"break";var e=f.getData(),n=e.hash,i=e.tdo;return n=n.split("#").join(""),r=i.boards.findIndex(function(t){return t.id==n}),r==-1?"break":(o=r-1,o<0&&(o=i.boards.length-1),s=i.boards[o],window.location="#"+s.id,"break")}();if("break"===a)break;case"}":var r,s,l=function(){if(!t.ctrlKey)return"break";var e=f.getData(),n=e.hash,o=e.tdo;return n=n.split("#").join(""),r=o.boards.findIndex(function(t){return t.id==n}),r==-1?"break":(s=o.boards[(r+1)%o.boards.length],window.location="#"+s.id,"break")}();if("break"===l)break}})}]);